<div id="wrapper">
  <div id="page" class="pt-40">
    <div class="tf-section-2 pt-60 widget-box-icon">
      <div class="themesflat-container w920">
        <div class="row">
          <div class="col-md-12">
            <div class="heading-section-1">
              <h2 class="tf-title pb-16">Login</h2>
              <p class="pb-40">Get started today by entering just a few details</p>
            </div>
          </div>
          <div class="col-12">
            <div class="widget-login">
              <!-- === Form Login Email === -->
              <form (ngSubmit)="onLogin($event)" id="commentform" class="comment-form">
                <fieldset class="email">
                  <label>Email *</label>
                  <input
                    type="email"
                    name="email"
                    [(ngModel)]="email"
                    placeholder="mail@website.com"
                    required
                  />
                </fieldset>

                <fieldset class="password">
                  <label>Password *</label>
                  <input
                      [type]="showPassword ? 'text' : 'password'"
                      name="password"
                      [(ngModel)]="password"
                      placeholder="Min. 8 character"
                      required
                  />
                  <i
                    class="{{ showPassword ? 'icon-hide' : 'icon-show' }} password-addon"
                    (click)="togglePassword()"
                  ></i>
                  <div class="forget-password">
                    <a href="#">Forget password</a>
                  </div>
                </fieldset>

                <div class="btn-submit mb-30">
                  <button class="tf-button style-1 h50 w-100" type="submit">
                    Login <i class="icon-arrow-up-right2"></i>
                  </button>
                </div>
              </form>

              <div class="other">or continue</div>
              <div class="login-other">
                <a class="login-other-item" (click)="googleLogin()">
                  <img src="assets/images/google.png" alt="" />
                  <span>Log in with Google</span>
                </a>
                <!-- <a href="#" class="login-other-item" (click)="connectWallet(); $event.preventDefault();">
                  <img src="assets/images/box-icon/wallet-05.png" alt="" style="height: 25px;" />
                  <span *ngIf="!userAddress">Log in with Phantom</span>
                  <span *ngIf="userAddress">Wallet: {{ shorten(userAddress) }}</span>
                </a> -->
                <div *ngIf="userAddress" class="wallet-info mt-3" style="width: 100%;">
                  <button (click)="disconnectWallet()" class="tf-button style-2 h40 mt-2" style="width: 100%;">
                    Disconnect Wallet
                  </button>
                </div>
                <a class="login-other-item" (click)="toggleAccountsModal();">
                  <div class="item-avatar">
                    <ion-icon name="download-outline"></ion-icon>
                  </div>
                  <span *ngIf="!userAddress">Import Wallet</span>
                </a>
              </div>

              <div class="no-account">
                Don't have an account?
                <a (click)="onRegister()" class="tf-color">Sign up</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ðŸ”„ Modal Accounts -->
    <div class="custom-modal" *ngIf="showAccountsModal">
      <div class="modal-backdrop" (click)="resetAccountsModal()"></div>

      <div class="modal-sheet" [ngClass]="{ 'slide-up': !isClosingAccounts, 'slide-down': isClosingAccounts }">

        <!-- Step 1: Pilihan utama -->
        <div *ngIf="!selectedAccountAction">
          <h2 class="modal-title">Add Account</h2>

          <div class="widget-table-ranking pb-20">            

            <!-- Import Recovery Phrase -->
            <div class="table-ranking-content" (click)="selectAccountAction('phrase')">
              <div class="fl-row-ranking">
                <div class="td1">
                  <div class="item-avatar">
                    <ion-icon name="document-text-outline"></ion-icon>
                  </div>
                  <div class="item-name">
                    Import Recovery Phrase
                    <p class="price gem pt-10">Import from seed phrase</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Import Private Key -->
            <div class="table-ranking-content" (click)="selectAccountAction('private')">
              <div class="fl-row-ranking">
                <div class="td1">
                  <div class="item-avatar">
                    <ion-icon name="key-outline"></ion-icon>
                  </div>
                  <div class="item-name">
                    Import Private Key
                    <p class="price gem pt-10">Import a single-chain account</p>
                  </div>
                </div>
              </div>
            </div>

          </div>

          <div class="modal-actions">
            <button type="button" class="btn-cancel" (click)="resetAccountsModal()">Cancel</button>
          </div>
        </div>

        <!-- Step 2a: Import Phrase -->
        <div *ngIf="selectedAccountAction === 'phrase'">
          <h2 class="modal-title">Import Recovery Phrase</h2>
          <form (submit)="importRecoveryPhrase($event)">
            <textarea
              [(ngModel)]="recoveryPhrase"
              name="recoveryPhrase"
              placeholder="Enter your 12/24-word phrase"
              class="search-field style-1"
              rows="3"
              required>
            </textarea>
            <div class="modal-actions pt-20">
              <button class="btn-cancel" (click)="selectedAccountAction = null">Back</button>
              <button type="submit" class="btn-send">Import</button>
            </div>
          </form>
        </div>

        <!-- Step 2b: Import Private Key -->
        <div *ngIf="selectedAccountAction === 'private'">
          <h2 class="modal-title">Import Private Key</h2>
          <form (submit)="importPrivateKey($event)">
            <input
              type="text"
              [(ngModel)]="privateKey"
              name="privateKey"
              placeholder="Enter your private key"
              class="search-field style-1"
              required>
            <div class="modal-actions pt-20">
              <button class="btn-cancel" (click)="selectedAccountAction = null">Back</button>
              <button type="submit" class="btn-send">Import</button>
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>
</div>
