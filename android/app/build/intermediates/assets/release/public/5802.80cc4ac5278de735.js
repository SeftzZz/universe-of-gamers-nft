(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5802],{917:function(Rt,Ne,ge){!function(w,ce){"use strict";function q(A,a){if(!A)throw new Error(a||"Assertion failed")}function te(A,a){A.super_=a;var h=function(){};h.prototype=a.prototype,A.prototype=new h,A.prototype.constructor=A}function R(A,a,h){if(R.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,null!==A&&(("le"===a||"be"===a)&&(h=a,a=10),this._init(A||0,a||10,h||"be"))}var j;"object"==typeof w?w.exports=R:ce.BN=R,R.BN=R,R.wordSize=26;try{j=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:ge(7790).Buffer}catch{}function T(A,a){var h=A.charCodeAt(a);return h>=48&&h<=57?h-48:h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:void q(!1,"Invalid character in "+A)}function fe(A,a,h){var y=T(A,h);return h-1>=a&&(y|=T(A,h-1)<<4),y}function p(A,a,h,y){for(var S=0,O=0,U=Math.min(A.length,h),F=a;F<U;F++){var I=A.charCodeAt(F)-48;S*=y,O=I>=49?I-49+10:I>=17?I-17+10:I,q(I>=0&&O<y,"Invalid character"),S+=O}return S}function Ee(A,a){A.words=a.words,A.length=a.length,A.negative=a.negative,A.red=a.red}if(R.isBN=function(a){return a instanceof R||null!==a&&"object"==typeof a&&a.constructor.wordSize===R.wordSize&&Array.isArray(a.words)},R.max=function(a,h){return a.cmp(h)>0?a:h},R.min=function(a,h){return a.cmp(h)<0?a:h},R.prototype._init=function(a,h,y){if("number"==typeof a)return this._initNumber(a,h,y);if("object"==typeof a)return this._initArray(a,h,y);"hex"===h&&(h=16),q(h===(0|h)&&h>=2&&h<=36);var S=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(S++,this.negative=1),S<a.length&&(16===h?this._parseHex(a,S,y):(this._parseBase(a,h,S),"le"===y&&this._initArray(this.toArray(),h,y)))},R.prototype._initNumber=function(a,h,y){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(q(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===y&&this._initArray(this.toArray(),h,y)},R.prototype._initArray=function(a,h,y){if(q("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var O,U,F=0;if("be"===y)for(S=a.length-1,O=0;S>=0;S-=3)this.words[O]|=(U=a[S]|a[S-1]<<8|a[S-2]<<16)<<F&67108863,this.words[O+1]=U>>>26-F&67108863,(F+=24)>=26&&(F-=26,O++);else if("le"===y)for(S=0,O=0;S<a.length;S+=3)this.words[O]|=(U=a[S]|a[S+1]<<8|a[S+2]<<16)<<F&67108863,this.words[O+1]=U>>>26-F&67108863,(F+=24)>=26&&(F-=26,O++);return this._strip()},R.prototype._parseHex=function(a,h,y){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var F,O=0,U=0;if("be"===y)for(S=a.length-1;S>=h;S-=2)F=fe(a,h,S)<<O,this.words[U]|=67108863&F,O>=18?(O-=18,this.words[U+=1]|=F>>>26):O+=8;else for(S=(a.length-h)%2==0?h+1:h;S<a.length;S+=2)F=fe(a,h,S)<<O,this.words[U]|=67108863&F,O>=18?(O-=18,this.words[U+=1]|=F>>>26):O+=8;this._strip()},R.prototype._parseBase=function(a,h,y){this.words=[0],this.length=1;for(var S=0,O=1;O<=67108863;O*=h)S++;S--,O=O/h|0;for(var U=a.length-y,F=U%S,I=Math.min(U,U-F)+y,d=0,_=y;_<I;_+=S)d=p(a,_,_+S,h),this.imuln(O),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(0!==F){var g=1;for(d=p(a,_,a.length,h),_=0;_<F;_++)g*=h;this.imuln(g),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this._strip()},R.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red},R.prototype._move=function(a){Ee(a,this)},R.prototype.clone=function(){var a=new R(null);return this.copy(a),a},R.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},R.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},R.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},typeof Symbol<"u"&&"function"==typeof Symbol.for)try{R.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ce}catch{R.prototype.inspect=Ce}else R.prototype.inspect=Ce;function Ce(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var Oe=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ae=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],X=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function Y(A,a,h){h.negative=a.negative^A.negative;var y=A.length+a.length|0;h.length=y,y=y-1|0;var S=0|A.words[0],O=0|a.words[0],U=S*O,I=U/67108864|0;h.words[0]=67108863&U;for(var d=1;d<y;d++){for(var _=I>>>26,g=67108863&I,E=Math.min(d,a.length-1),k=Math.max(0,d-A.length+1);k<=E;k++)_+=(U=(S=0|A.words[d-k|0])*(O=0|a.words[k])+g)/67108864|0,g=67108863&U;h.words[d]=0|g,I=0|_}return 0!==I?h.words[d]=0|I:h.length--,h._strip()}R.prototype.toString=function(a,h){var y;if(h=0|h||1,16===(a=a||10)||"hex"===a){y="";for(var S=0,O=0,U=0;U<this.length;U++){var F=this.words[U],I=(16777215&(F<<S|O)).toString(16);O=F>>>24-S&16777215,(S+=2)>=26&&(S-=26,U--),y=0!==O||U!==this.length-1?Oe[6-I.length]+I+y:I+y}for(0!==O&&(y=O.toString(16)+y);y.length%h!==0;)y="0"+y;return 0!==this.negative&&(y="-"+y),y}if(a===(0|a)&&a>=2&&a<=36){var d=ae[a],_=X[a];y="";var g=this.clone();for(g.negative=0;!g.isZero();){var E=g.modrn(_).toString(a);y=(g=g.idivn(_)).isZero()?E+y:Oe[d-E.length]+E+y}for(this.isZero()&&(y="0"+y);y.length%h!==0;)y="0"+y;return 0!==this.negative&&(y="-"+y),y}q(!1,"Base should be between 2 and 36")},R.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&q(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},R.prototype.toJSON=function(){return this.toString(16,2)},j&&(R.prototype.toBuffer=function(a,h){return this.toArrayLike(j,a,h)}),R.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)},R.prototype.toArrayLike=function(a,h,y){this._strip();var S=this.byteLength(),O=y||Math.max(1,S);q(S<=O,"byte array longer than desired length"),q(O>0,"Requested array length <= 0");var U=function(a,h){return a.allocUnsafe?a.allocUnsafe(h):new a(h)}(a,O);return this["_toArrayLike"+("le"===h?"LE":"BE")](U,S),U},R.prototype._toArrayLikeLE=function(a,h){for(var y=0,S=0,O=0,U=0;O<this.length;O++){var F=this.words[O]<<U|S;a[y++]=255&F,y<a.length&&(a[y++]=F>>8&255),y<a.length&&(a[y++]=F>>16&255),6===U?(y<a.length&&(a[y++]=F>>24&255),S=0,U=0):(S=F>>>24,U+=2)}if(y<a.length)for(a[y++]=S;y<a.length;)a[y++]=0},R.prototype._toArrayLikeBE=function(a,h){for(var y=a.length-1,S=0,O=0,U=0;O<this.length;O++){var F=this.words[O]<<U|S;a[y--]=255&F,y>=0&&(a[y--]=F>>8&255),y>=0&&(a[y--]=F>>16&255),6===U?(y>=0&&(a[y--]=F>>24&255),S=0,U=0):(S=F>>>24,U+=2)}if(y>=0)for(a[y--]=S;y>=0;)a[y--]=0},R.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var h=a,y=0;return h>=4096&&(y+=13,h>>>=13),h>=64&&(y+=7,h>>>=7),h>=8&&(y+=4,h>>>=4),h>=2&&(y+=2,h>>>=2),y+h},R.prototype._zeroBits=function(a){if(0===a)return 26;var h=a,y=0;return!(8191&h)&&(y+=13,h>>>=13),!(127&h)&&(y+=7,h>>>=7),!(15&h)&&(y+=4,h>>>=4),!(3&h)&&(y+=2,h>>>=2),!(1&h)&&y++,y},R.prototype.bitLength=function(){var h=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+h},R.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var y=this._zeroBits(this.words[h]);if(a+=y,26!==y)break}return a},R.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},R.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},R.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},R.prototype.isNeg=function(){return 0!==this.negative},R.prototype.neg=function(){return this.clone().ineg()},R.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},R.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this._strip()},R.prototype.ior=function(a){return q(0===(this.negative|a.negative)),this.iuor(a)},R.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},R.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},R.prototype.iuand=function(a){var h;h=this.length>a.length?a:this;for(var y=0;y<h.length;y++)this.words[y]=this.words[y]&a.words[y];return this.length=h.length,this._strip()},R.prototype.iand=function(a){return q(0===(this.negative|a.negative)),this.iuand(a)},R.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},R.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},R.prototype.iuxor=function(a){var h,y;this.length>a.length?(h=this,y=a):(h=a,y=this);for(var S=0;S<y.length;S++)this.words[S]=h.words[S]^y.words[S];if(this!==h)for(;S<h.length;S++)this.words[S]=h.words[S];return this.length=h.length,this._strip()},R.prototype.ixor=function(a){return q(0===(this.negative|a.negative)),this.iuxor(a)},R.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},R.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},R.prototype.inotn=function(a){q("number"==typeof a&&a>=0);var h=0|Math.ceil(a/26),y=a%26;this._expand(h),y>0&&h--;for(var S=0;S<h;S++)this.words[S]=67108863&~this.words[S];return y>0&&(this.words[S]=~this.words[S]&67108863>>26-y),this._strip()},R.prototype.notn=function(a){return this.clone().inotn(a)},R.prototype.setn=function(a,h){q("number"==typeof a&&a>=0);var y=a/26|0,S=a%26;return this._expand(y+1),this.words[y]=h?this.words[y]|1<<S:this.words[y]&~(1<<S),this._strip()},R.prototype.iadd=function(a){var h,y,S;if(0!==this.negative&&0===a.negative)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();this.length>a.length?(y=this,S=a):(y=a,S=this);for(var O=0,U=0;U<S.length;U++)this.words[U]=67108863&(h=(0|y.words[U])+(0|S.words[U])+O),O=h>>>26;for(;0!==O&&U<y.length;U++)this.words[U]=67108863&(h=(0|y.words[U])+O),O=h>>>26;if(this.length=y.length,0!==O)this.words[this.length]=O,this.length++;else if(y!==this)for(;U<y.length;U++)this.words[U]=y.words[U];return this},R.prototype.add=function(a){var h;return 0!==a.negative&&0===this.negative?(a.negative=0,h=this.sub(a),a.negative^=1,h):0===a.negative&&0!==this.negative?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},R.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var S,O,y=this.cmp(a);if(0===y)return this.negative=0,this.length=1,this.words[0]=0,this;y>0?(S=this,O=a):(S=a,O=this);for(var U=0,F=0;F<O.length;F++)U=(h=(0|S.words[F])-(0|O.words[F])+U)>>26,this.words[F]=67108863&h;for(;0!==U&&F<S.length;F++)U=(h=(0|S.words[F])+U)>>26,this.words[F]=67108863&h;if(0===U&&F<S.length&&S!==this)for(;F<S.length;F++)this.words[F]=S.words[F];return this.length=Math.max(this.length,F),S!==this&&(this.negative=1),this._strip()},R.prototype.sub=function(a){return this.clone().isub(a)};var ve=function(a,h,y){var I,d,_,S=a.words,O=h.words,U=y.words,F=0,g=0|S[0],E=8191&g,k=g>>>13,L=0|S[1],$=8191&L,G=L>>>13,se=0|S[2],ee=8191&se,be=se>>>13,lt=0|S[3],qe=8191&lt,et=lt>>>13,hn=0|S[4],yt=8191&hn,St=hn>>>13,fn=0|S[5],It=8191&fn,ft=fn>>>13,Cn=0|S[6],bt=8191&Cn,st=Cn>>>13,Bn=0|S[7],m=8191&Bn,c=Bn>>>13,f=0|S[8],v=8191&f,D=f>>>13,W=0|S[9],J=8191&W,Be=W>>>13,At=0|O[0],Xe=8191&At,Ze=At>>>13,pt=0|O[1],Lt=8191&pt,Mt=pt>>>13,Ai=0|O[2],qt=8191&Ai,zt=Ai>>>13,vn=0|O[3],Pt=8191&vn,jt=vn>>>13,Mr=0|O[4],Kt=8191&Mr,$t=Mr>>>13,In=0|O[5],Et=8191&In,Nt=In>>>13,vi=0|O[6],at=8191&vi,ct=vi>>>13,Ii=0|O[7],Yt=8191&Ii,Ut=Ii>>>13,Oi=0|O[8],Bt=8191&Oi,Xt=Oi>>>13,xi=0|O[9],Zt=8191&xi,Ct=xi>>>13;y.negative=a.negative^h.negative,y.length=19;var Wn=(F+(I=Math.imul(E,Xe))|0)+((8191&(d=(d=Math.imul(E,Ze))+Math.imul(k,Xe)|0))<<13)|0;F=((_=Math.imul(k,Ze))+(d>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,I=Math.imul($,Xe),d=(d=Math.imul($,Ze))+Math.imul(G,Xe)|0,_=Math.imul(G,Ze);var ei=(F+(I=I+Math.imul(E,Lt)|0)|0)+((8191&(d=(d=d+Math.imul(E,Mt)|0)+Math.imul(k,Lt)|0))<<13)|0;F=((_=_+Math.imul(k,Mt)|0)+(d>>>13)|0)+(ei>>>26)|0,ei&=67108863,I=Math.imul(ee,Xe),d=(d=Math.imul(ee,Ze))+Math.imul(be,Xe)|0,_=Math.imul(be,Ze),I=I+Math.imul($,Lt)|0,d=(d=d+Math.imul($,Mt)|0)+Math.imul(G,Lt)|0,_=_+Math.imul(G,Mt)|0;var On=(F+(I=I+Math.imul(E,qt)|0)|0)+((8191&(d=(d=d+Math.imul(E,zt)|0)+Math.imul(k,qt)|0))<<13)|0;F=((_=_+Math.imul(k,zt)|0)+(d>>>13)|0)+(On>>>26)|0,On&=67108863,I=Math.imul(qe,Xe),d=(d=Math.imul(qe,Ze))+Math.imul(et,Xe)|0,_=Math.imul(et,Ze),I=I+Math.imul(ee,Lt)|0,d=(d=d+Math.imul(ee,Mt)|0)+Math.imul(be,Lt)|0,_=_+Math.imul(be,Mt)|0,I=I+Math.imul($,qt)|0,d=(d=d+Math.imul($,zt)|0)+Math.imul(G,qt)|0,_=_+Math.imul(G,zt)|0;var pn=(F+(I=I+Math.imul(E,Pt)|0)|0)+((8191&(d=(d=d+Math.imul(E,jt)|0)+Math.imul(k,Pt)|0))<<13)|0;F=((_=_+Math.imul(k,jt)|0)+(d>>>13)|0)+(pn>>>26)|0,pn&=67108863,I=Math.imul(yt,Xe),d=(d=Math.imul(yt,Ze))+Math.imul(St,Xe)|0,_=Math.imul(St,Ze),I=I+Math.imul(qe,Lt)|0,d=(d=d+Math.imul(qe,Mt)|0)+Math.imul(et,Lt)|0,_=_+Math.imul(et,Mt)|0,I=I+Math.imul(ee,qt)|0,d=(d=d+Math.imul(ee,zt)|0)+Math.imul(be,qt)|0,_=_+Math.imul(be,zt)|0,I=I+Math.imul($,Pt)|0,d=(d=d+Math.imul($,jt)|0)+Math.imul(G,Pt)|0,_=_+Math.imul(G,jt)|0;var Gn=(F+(I=I+Math.imul(E,Kt)|0)|0)+((8191&(d=(d=d+Math.imul(E,$t)|0)+Math.imul(k,Kt)|0))<<13)|0;F=((_=_+Math.imul(k,$t)|0)+(d>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,I=Math.imul(It,Xe),d=(d=Math.imul(It,Ze))+Math.imul(ft,Xe)|0,_=Math.imul(ft,Ze),I=I+Math.imul(yt,Lt)|0,d=(d=d+Math.imul(yt,Mt)|0)+Math.imul(St,Lt)|0,_=_+Math.imul(St,Mt)|0,I=I+Math.imul(qe,qt)|0,d=(d=d+Math.imul(qe,zt)|0)+Math.imul(et,qt)|0,_=_+Math.imul(et,zt)|0,I=I+Math.imul(ee,Pt)|0,d=(d=d+Math.imul(ee,jt)|0)+Math.imul(be,Pt)|0,_=_+Math.imul(be,jt)|0,I=I+Math.imul($,Kt)|0,d=(d=d+Math.imul($,$t)|0)+Math.imul(G,Kt)|0,_=_+Math.imul(G,$t)|0;var br=(F+(I=I+Math.imul(E,Et)|0)|0)+((8191&(d=(d=d+Math.imul(E,Nt)|0)+Math.imul(k,Et)|0))<<13)|0;F=((_=_+Math.imul(k,Nt)|0)+(d>>>13)|0)+(br>>>26)|0,br&=67108863,I=Math.imul(bt,Xe),d=(d=Math.imul(bt,Ze))+Math.imul(st,Xe)|0,_=Math.imul(st,Ze),I=I+Math.imul(It,Lt)|0,d=(d=d+Math.imul(It,Mt)|0)+Math.imul(ft,Lt)|0,_=_+Math.imul(ft,Mt)|0,I=I+Math.imul(yt,qt)|0,d=(d=d+Math.imul(yt,zt)|0)+Math.imul(St,qt)|0,_=_+Math.imul(St,zt)|0,I=I+Math.imul(qe,Pt)|0,d=(d=d+Math.imul(qe,jt)|0)+Math.imul(et,Pt)|0,_=_+Math.imul(et,jt)|0,I=I+Math.imul(ee,Kt)|0,d=(d=d+Math.imul(ee,$t)|0)+Math.imul(be,Kt)|0,_=_+Math.imul(be,$t)|0,I=I+Math.imul($,Et)|0,d=(d=d+Math.imul($,Nt)|0)+Math.imul(G,Et)|0,_=_+Math.imul(G,Nt)|0;var Qn=(F+(I=I+Math.imul(E,at)|0)|0)+((8191&(d=(d=d+Math.imul(E,ct)|0)+Math.imul(k,at)|0))<<13)|0;F=((_=_+Math.imul(k,ct)|0)+(d>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,I=Math.imul(m,Xe),d=(d=Math.imul(m,Ze))+Math.imul(c,Xe)|0,_=Math.imul(c,Ze),I=I+Math.imul(bt,Lt)|0,d=(d=d+Math.imul(bt,Mt)|0)+Math.imul(st,Lt)|0,_=_+Math.imul(st,Mt)|0,I=I+Math.imul(It,qt)|0,d=(d=d+Math.imul(It,zt)|0)+Math.imul(ft,qt)|0,_=_+Math.imul(ft,zt)|0,I=I+Math.imul(yt,Pt)|0,d=(d=d+Math.imul(yt,jt)|0)+Math.imul(St,Pt)|0,_=_+Math.imul(St,jt)|0,I=I+Math.imul(qe,Kt)|0,d=(d=d+Math.imul(qe,$t)|0)+Math.imul(et,Kt)|0,_=_+Math.imul(et,$t)|0,I=I+Math.imul(ee,Et)|0,d=(d=d+Math.imul(ee,Nt)|0)+Math.imul(be,Et)|0,_=_+Math.imul(be,Nt)|0,I=I+Math.imul($,at)|0,d=(d=d+Math.imul($,ct)|0)+Math.imul(G,at)|0,_=_+Math.imul(G,ct)|0;var xn=(F+(I=I+Math.imul(E,Yt)|0)|0)+((8191&(d=(d=d+Math.imul(E,Ut)|0)+Math.imul(k,Yt)|0))<<13)|0;F=((_=_+Math.imul(k,Ut)|0)+(d>>>13)|0)+(xn>>>26)|0,xn&=67108863,I=Math.imul(v,Xe),d=(d=Math.imul(v,Ze))+Math.imul(D,Xe)|0,_=Math.imul(D,Ze),I=I+Math.imul(m,Lt)|0,d=(d=d+Math.imul(m,Mt)|0)+Math.imul(c,Lt)|0,_=_+Math.imul(c,Mt)|0,I=I+Math.imul(bt,qt)|0,d=(d=d+Math.imul(bt,zt)|0)+Math.imul(st,qt)|0,_=_+Math.imul(st,zt)|0,I=I+Math.imul(It,Pt)|0,d=(d=d+Math.imul(It,jt)|0)+Math.imul(ft,Pt)|0,_=_+Math.imul(ft,jt)|0,I=I+Math.imul(yt,Kt)|0,d=(d=d+Math.imul(yt,$t)|0)+Math.imul(St,Kt)|0,_=_+Math.imul(St,$t)|0,I=I+Math.imul(qe,Et)|0,d=(d=d+Math.imul(qe,Nt)|0)+Math.imul(et,Et)|0,_=_+Math.imul(et,Nt)|0,I=I+Math.imul(ee,at)|0,d=(d=d+Math.imul(ee,ct)|0)+Math.imul(be,at)|0,_=_+Math.imul(be,ct)|0,I=I+Math.imul($,Yt)|0,d=(d=d+Math.imul($,Ut)|0)+Math.imul(G,Yt)|0,_=_+Math.imul(G,Ut)|0;var ir=(F+(I=I+Math.imul(E,Bt)|0)|0)+((8191&(d=(d=d+Math.imul(E,Xt)|0)+Math.imul(k,Bt)|0))<<13)|0;F=((_=_+Math.imul(k,Xt)|0)+(d>>>13)|0)+(ir>>>26)|0,ir&=67108863,I=Math.imul(J,Xe),d=(d=Math.imul(J,Ze))+Math.imul(Be,Xe)|0,_=Math.imul(Be,Ze),I=I+Math.imul(v,Lt)|0,d=(d=d+Math.imul(v,Mt)|0)+Math.imul(D,Lt)|0,_=_+Math.imul(D,Mt)|0,I=I+Math.imul(m,qt)|0,d=(d=d+Math.imul(m,zt)|0)+Math.imul(c,qt)|0,_=_+Math.imul(c,zt)|0,I=I+Math.imul(bt,Pt)|0,d=(d=d+Math.imul(bt,jt)|0)+Math.imul(st,Pt)|0,_=_+Math.imul(st,jt)|0,I=I+Math.imul(It,Kt)|0,d=(d=d+Math.imul(It,$t)|0)+Math.imul(ft,Kt)|0,_=_+Math.imul(ft,$t)|0,I=I+Math.imul(yt,Et)|0,d=(d=d+Math.imul(yt,Nt)|0)+Math.imul(St,Et)|0,_=_+Math.imul(St,Nt)|0,I=I+Math.imul(qe,at)|0,d=(d=d+Math.imul(qe,ct)|0)+Math.imul(et,at)|0,_=_+Math.imul(et,ct)|0,I=I+Math.imul(ee,Yt)|0,d=(d=d+Math.imul(ee,Ut)|0)+Math.imul(be,Yt)|0,_=_+Math.imul(be,Ut)|0,I=I+Math.imul($,Bt)|0,d=(d=d+Math.imul($,Xt)|0)+Math.imul(G,Bt)|0,_=_+Math.imul(G,Xt)|0;var wr=(F+(I=I+Math.imul(E,Zt)|0)|0)+((8191&(d=(d=d+Math.imul(E,Ct)|0)+Math.imul(k,Zt)|0))<<13)|0;F=((_=_+Math.imul(k,Ct)|0)+(d>>>13)|0)+(wr>>>26)|0,wr&=67108863,I=Math.imul(J,Lt),d=(d=Math.imul(J,Mt))+Math.imul(Be,Lt)|0,_=Math.imul(Be,Mt),I=I+Math.imul(v,qt)|0,d=(d=d+Math.imul(v,zt)|0)+Math.imul(D,qt)|0,_=_+Math.imul(D,zt)|0,I=I+Math.imul(m,Pt)|0,d=(d=d+Math.imul(m,jt)|0)+Math.imul(c,Pt)|0,_=_+Math.imul(c,jt)|0,I=I+Math.imul(bt,Kt)|0,d=(d=d+Math.imul(bt,$t)|0)+Math.imul(st,Kt)|0,_=_+Math.imul(st,$t)|0,I=I+Math.imul(It,Et)|0,d=(d=d+Math.imul(It,Nt)|0)+Math.imul(ft,Et)|0,_=_+Math.imul(ft,Nt)|0,I=I+Math.imul(yt,at)|0,d=(d=d+Math.imul(yt,ct)|0)+Math.imul(St,at)|0,_=_+Math.imul(St,ct)|0,I=I+Math.imul(qe,Yt)|0,d=(d=d+Math.imul(qe,Ut)|0)+Math.imul(et,Yt)|0,_=_+Math.imul(et,Ut)|0,I=I+Math.imul(ee,Bt)|0,d=(d=d+Math.imul(ee,Xt)|0)+Math.imul(be,Bt)|0,_=_+Math.imul(be,Xt)|0;var ti=(F+(I=I+Math.imul($,Zt)|0)|0)+((8191&(d=(d=d+Math.imul($,Ct)|0)+Math.imul(G,Zt)|0))<<13)|0;F=((_=_+Math.imul(G,Ct)|0)+(d>>>13)|0)+(ti>>>26)|0,ti&=67108863,I=Math.imul(J,qt),d=(d=Math.imul(J,zt))+Math.imul(Be,qt)|0,_=Math.imul(Be,zt),I=I+Math.imul(v,Pt)|0,d=(d=d+Math.imul(v,jt)|0)+Math.imul(D,Pt)|0,_=_+Math.imul(D,jt)|0,I=I+Math.imul(m,Kt)|0,d=(d=d+Math.imul(m,$t)|0)+Math.imul(c,Kt)|0,_=_+Math.imul(c,$t)|0,I=I+Math.imul(bt,Et)|0,d=(d=d+Math.imul(bt,Nt)|0)+Math.imul(st,Et)|0,_=_+Math.imul(st,Nt)|0,I=I+Math.imul(It,at)|0,d=(d=d+Math.imul(It,ct)|0)+Math.imul(ft,at)|0,_=_+Math.imul(ft,ct)|0,I=I+Math.imul(yt,Yt)|0,d=(d=d+Math.imul(yt,Ut)|0)+Math.imul(St,Yt)|0,_=_+Math.imul(St,Ut)|0,I=I+Math.imul(qe,Bt)|0,d=(d=d+Math.imul(qe,Xt)|0)+Math.imul(et,Bt)|0,_=_+Math.imul(et,Xt)|0;var vt=(F+(I=I+Math.imul(ee,Zt)|0)|0)+((8191&(d=(d=d+Math.imul(ee,Ct)|0)+Math.imul(be,Zt)|0))<<13)|0;F=((_=_+Math.imul(be,Ct)|0)+(d>>>13)|0)+(vt>>>26)|0,vt&=67108863,I=Math.imul(J,Pt),d=(d=Math.imul(J,jt))+Math.imul(Be,Pt)|0,_=Math.imul(Be,jt),I=I+Math.imul(v,Kt)|0,d=(d=d+Math.imul(v,$t)|0)+Math.imul(D,Kt)|0,_=_+Math.imul(D,$t)|0,I=I+Math.imul(m,Et)|0,d=(d=d+Math.imul(m,Nt)|0)+Math.imul(c,Et)|0,_=_+Math.imul(c,Nt)|0,I=I+Math.imul(bt,at)|0,d=(d=d+Math.imul(bt,ct)|0)+Math.imul(st,at)|0,_=_+Math.imul(st,ct)|0,I=I+Math.imul(It,Yt)|0,d=(d=d+Math.imul(It,Ut)|0)+Math.imul(ft,Yt)|0,_=_+Math.imul(ft,Ut)|0,I=I+Math.imul(yt,Bt)|0,d=(d=d+Math.imul(yt,Xt)|0)+Math.imul(St,Bt)|0,_=_+Math.imul(St,Xt)|0;var Pr=(F+(I=I+Math.imul(qe,Zt)|0)|0)+((8191&(d=(d=d+Math.imul(qe,Ct)|0)+Math.imul(et,Zt)|0))<<13)|0;F=((_=_+Math.imul(et,Ct)|0)+(d>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,I=Math.imul(J,Kt),d=(d=Math.imul(J,$t))+Math.imul(Be,Kt)|0,_=Math.imul(Be,$t),I=I+Math.imul(v,Et)|0,d=(d=d+Math.imul(v,Nt)|0)+Math.imul(D,Et)|0,_=_+Math.imul(D,Nt)|0,I=I+Math.imul(m,at)|0,d=(d=d+Math.imul(m,ct)|0)+Math.imul(c,at)|0,_=_+Math.imul(c,ct)|0,I=I+Math.imul(bt,Yt)|0,d=(d=d+Math.imul(bt,Ut)|0)+Math.imul(st,Yt)|0,_=_+Math.imul(st,Ut)|0,I=I+Math.imul(It,Bt)|0,d=(d=d+Math.imul(It,Xt)|0)+Math.imul(ft,Bt)|0,_=_+Math.imul(ft,Xt)|0;var Er=(F+(I=I+Math.imul(yt,Zt)|0)|0)+((8191&(d=(d=d+Math.imul(yt,Ct)|0)+Math.imul(St,Zt)|0))<<13)|0;F=((_=_+Math.imul(St,Ct)|0)+(d>>>13)|0)+(Er>>>26)|0,Er&=67108863,I=Math.imul(J,Et),d=(d=Math.imul(J,Nt))+Math.imul(Be,Et)|0,_=Math.imul(Be,Nt),I=I+Math.imul(v,at)|0,d=(d=d+Math.imul(v,ct)|0)+Math.imul(D,at)|0,_=_+Math.imul(D,ct)|0,I=I+Math.imul(m,Yt)|0,d=(d=d+Math.imul(m,Ut)|0)+Math.imul(c,Yt)|0,_=_+Math.imul(c,Ut)|0,I=I+Math.imul(bt,Bt)|0,d=(d=d+Math.imul(bt,Xt)|0)+Math.imul(st,Bt)|0,_=_+Math.imul(st,Xt)|0;var ni=(F+(I=I+Math.imul(It,Zt)|0)|0)+((8191&(d=(d=d+Math.imul(It,Ct)|0)+Math.imul(ft,Zt)|0))<<13)|0;F=((_=_+Math.imul(ft,Ct)|0)+(d>>>13)|0)+(ni>>>26)|0,ni&=67108863,I=Math.imul(J,at),d=(d=Math.imul(J,ct))+Math.imul(Be,at)|0,_=Math.imul(Be,ct),I=I+Math.imul(v,Yt)|0,d=(d=d+Math.imul(v,Ut)|0)+Math.imul(D,Yt)|0,_=_+Math.imul(D,Ut)|0,I=I+Math.imul(m,Bt)|0,d=(d=d+Math.imul(m,Xt)|0)+Math.imul(c,Bt)|0,_=_+Math.imul(c,Xt)|0;var or=(F+(I=I+Math.imul(bt,Zt)|0)|0)+((8191&(d=(d=d+Math.imul(bt,Ct)|0)+Math.imul(st,Zt)|0))<<13)|0;F=((_=_+Math.imul(st,Ct)|0)+(d>>>13)|0)+(or>>>26)|0,or&=67108863,I=Math.imul(J,Yt),d=(d=Math.imul(J,Ut))+Math.imul(Be,Yt)|0,_=Math.imul(Be,Ut),I=I+Math.imul(v,Bt)|0,d=(d=d+Math.imul(v,Xt)|0)+Math.imul(D,Bt)|0,_=_+Math.imul(D,Xt)|0;var Ur=(F+(I=I+Math.imul(m,Zt)|0)|0)+((8191&(d=(d=d+Math.imul(m,Ct)|0)+Math.imul(c,Zt)|0))<<13)|0;F=((_=_+Math.imul(c,Ct)|0)+(d>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,I=Math.imul(J,Bt),d=(d=Math.imul(J,Xt))+Math.imul(Be,Bt)|0,_=Math.imul(Be,Xt);var sr=(F+(I=I+Math.imul(v,Zt)|0)|0)+((8191&(d=(d=d+Math.imul(v,Ct)|0)+Math.imul(D,Zt)|0))<<13)|0;F=((_=_+Math.imul(D,Ct)|0)+(d>>>13)|0)+(sr>>>26)|0,sr&=67108863;var Rr=(F+(I=Math.imul(J,Zt))|0)+((8191&(d=(d=Math.imul(J,Ct))+Math.imul(Be,Zt)|0))<<13)|0;return F=((_=Math.imul(Be,Ct))+(d>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,U[0]=Wn,U[1]=ei,U[2]=On,U[3]=pn,U[4]=Gn,U[5]=br,U[6]=Qn,U[7]=xn,U[8]=ir,U[9]=wr,U[10]=ti,U[11]=vt,U[12]=Pr,U[13]=Er,U[14]=ni,U[15]=or,U[16]=Ur,U[17]=sr,U[18]=Rr,0!==F&&(U[19]=F,y.length++),y};function me(A,a,h){h.negative=a.negative^A.negative,h.length=A.length+a.length;for(var y=0,S=0,O=0;O<h.length-1;O++){var U=S;S=0;for(var F=67108863&y,I=Math.min(O,a.length-1),d=Math.max(0,O-A.length+1);d<=I;d++){var k=(0|A.words[O-d])*(0|a.words[d]),L=67108863&k;F=67108863&(L=L+F|0),S+=(U=(U=U+(k/67108864|0)|0)+(L>>>26)|0)>>>26,U&=67108863}h.words[O]=F,y=U,U=S}return 0!==y?h.words[O]=y:h.length--,h._strip()}function Se(A,a,h){return me(A,a,h)}function he(A,a){this.x=A,this.y=a}Math.imul||(ve=Y),R.prototype.mulTo=function(a,h){var S=this.length+a.length;return 10===this.length&&10===a.length?ve(this,a,h):S<63?Y(this,a,h):S<1024?me(this,a,h):Se(this,a,h)},he.prototype.makeRBT=function(a){for(var h=new Array(a),y=R.prototype._countBits(a)-1,S=0;S<a;S++)h[S]=this.revBin(S,y,a);return h},he.prototype.revBin=function(a,h,y){if(0===a||a===y-1)return a;for(var S=0,O=0;O<h;O++)S|=(1&a)<<h-O-1,a>>=1;return S},he.prototype.permute=function(a,h,y,S,O,U){for(var F=0;F<U;F++)S[F]=h[a[F]],O[F]=y[a[F]]},he.prototype.transform=function(a,h,y,S,O,U){this.permute(U,a,h,y,S,O);for(var F=1;F<O;F<<=1)for(var I=F<<1,d=Math.cos(2*Math.PI/I),_=Math.sin(2*Math.PI/I),g=0;g<O;g+=I)for(var E=d,k=_,L=0;L<F;L++){var $=y[g+L],G=S[g+L],se=y[g+L+F],ee=S[g+L+F],be=E*se-k*ee;ee=E*ee+k*se,y[g+L]=$+(se=be),S[g+L]=G+ee,y[g+L+F]=$-se,S[g+L+F]=G-ee,L!==I&&(be=d*E-_*k,k=d*k+_*E,E=be)}},he.prototype.guessLen13b=function(a,h){var y=1|Math.max(h,a),S=1&y,O=0;for(y=y/2|0;y;y>>>=1)O++;return 1<<O+1+S},he.prototype.conjugate=function(a,h,y){if(!(y<=1))for(var S=0;S<y/2;S++){var O=a[S];a[S]=a[y-S-1],a[y-S-1]=O,O=h[S],h[S]=-h[y-S-1],h[y-S-1]=-O}},he.prototype.normalize13b=function(a,h){for(var y=0,S=0;S<h/2;S++){var O=8192*Math.round(a[2*S+1]/h)+Math.round(a[2*S]/h)+y;a[S]=67108863&O,y=O<67108864?0:O/67108864|0}return a},he.prototype.convert13b=function(a,h,y,S){for(var O=0,U=0;U<h;U++)y[2*U]=8191&(O+=0|a[U]),y[2*U+1]=8191&(O>>>=13),O>>>=13;for(U=2*h;U<S;++U)y[U]=0;q(0===O),q(!(-8192&O))},he.prototype.stub=function(a){for(var h=new Array(a),y=0;y<a;y++)h[y]=0;return h},he.prototype.mulp=function(a,h,y){var S=2*this.guessLen13b(a.length,h.length),O=this.makeRBT(S),U=this.stub(S),F=new Array(S),I=new Array(S),d=new Array(S),_=new Array(S),g=new Array(S),E=new Array(S),k=y.words;k.length=S,this.convert13b(a.words,a.length,F,S),this.convert13b(h.words,h.length,_,S),this.transform(F,U,I,d,S,O),this.transform(_,U,g,E,S,O);for(var L=0;L<S;L++){var $=I[L]*g[L]-d[L]*E[L];d[L]=I[L]*E[L]+d[L]*g[L],I[L]=$}return this.conjugate(I,d,S),this.transform(I,d,k,U,S,O),this.conjugate(k,U,S),this.normalize13b(k,S),y.negative=a.negative^h.negative,y.length=a.length+h.length,y._strip()},R.prototype.mul=function(a){var h=new R(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},R.prototype.mulf=function(a){var h=new R(null);return h.words=new Array(this.length+a.length),Se(this,a,h)},R.prototype.imul=function(a){return this.clone().mulTo(a,this)},R.prototype.imuln=function(a){var h=a<0;h&&(a=-a),q("number"==typeof a),q(a<67108864);for(var y=0,S=0;S<this.length;S++){var O=(0|this.words[S])*a,U=(67108863&O)+(67108863&y);y>>=26,y+=O/67108864|0,y+=U>>>26,this.words[S]=67108863&U}return 0!==y&&(this.words[S]=y,this.length++),this.length=0===a?1:this.length,h?this.ineg():this},R.prototype.muln=function(a){return this.clone().imuln(a)},R.prototype.sqr=function(){return this.mul(this)},R.prototype.isqr=function(){return this.imul(this.clone())},R.prototype.pow=function(a){var h=function Q(A){for(var a=new Array(A.bitLength()),h=0;h<a.length;h++)a[h]=A.words[h/26|0]>>>h%26&1;return a}(a);if(0===h.length)return new R(1);for(var y=this,S=0;S<h.length&&0===h[S];S++,y=y.sqr());if(++S<h.length)for(var O=y.sqr();S<h.length;S++,O=O.sqr())0!==h[S]&&(y=y.mul(O));return y},R.prototype.iushln=function(a){q("number"==typeof a&&a>=0);var O,h=a%26,y=(a-h)/26,S=67108863>>>26-h<<26-h;if(0!==h){var U=0;for(O=0;O<this.length;O++){var F=this.words[O]&S;this.words[O]=(0|this.words[O])-F<<h|U,U=F>>>26-h}U&&(this.words[O]=U,this.length++)}if(0!==y){for(O=this.length-1;O>=0;O--)this.words[O+y]=this.words[O];for(O=0;O<y;O++)this.words[O]=0;this.length+=y}return this._strip()},R.prototype.ishln=function(a){return q(0===this.negative),this.iushln(a)},R.prototype.iushrn=function(a,h,y){var S;q("number"==typeof a&&a>=0),S=h?(h-h%26)/26:0;var O=a%26,U=Math.min((a-O)/26,this.length),F=67108863^67108863>>>O<<O,I=y;if(S-=U,S=Math.max(0,S),I){for(var d=0;d<U;d++)I.words[d]=this.words[d];I.length=U}if(0!==U)if(this.length>U)for(this.length-=U,d=0;d<this.length;d++)this.words[d]=this.words[d+U];else this.words[0]=0,this.length=1;var _=0;for(d=this.length-1;d>=0&&(0!==_||d>=S);d--){var g=0|this.words[d];this.words[d]=_<<26-O|g>>>O,_=g&F}return I&&0!==_&&(I.words[I.length++]=_),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},R.prototype.ishrn=function(a,h,y){return q(0===this.negative),this.iushrn(a,h,y)},R.prototype.shln=function(a){return this.clone().ishln(a)},R.prototype.ushln=function(a){return this.clone().iushln(a)},R.prototype.shrn=function(a){return this.clone().ishrn(a)},R.prototype.ushrn=function(a){return this.clone().iushrn(a)},R.prototype.testn=function(a){q("number"==typeof a&&a>=0);var h=a%26,y=(a-h)/26;return!(this.length<=y||!(this.words[y]&1<<h))},R.prototype.imaskn=function(a){q("number"==typeof a&&a>=0);var h=a%26,y=(a-h)/26;return q(0===this.negative,"imaskn works only with positive numbers"),this.length<=y?this:(0!==h&&y++,this.length=Math.min(y,this.length),0!==h&&(this.words[this.length-1]&=67108863^67108863>>>h<<h),this._strip())},R.prototype.maskn=function(a){return this.clone().imaskn(a)},R.prototype.iaddn=function(a){return q("number"==typeof a),q(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<=a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},R.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},R.prototype.isubn=function(a){if(q("number"==typeof a),q(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},R.prototype.addn=function(a){return this.clone().iaddn(a)},R.prototype.subn=function(a){return this.clone().isubn(a)},R.prototype.iabs=function(){return this.negative=0,this},R.prototype.abs=function(){return this.clone().iabs()},R.prototype._ishlnsubmul=function(a,h,y){var O;this._expand(a.length+y);var U,F=0;for(O=0;O<a.length;O++){U=(0|this.words[O+y])+F;var I=(0|a.words[O])*h;F=((U-=67108863&I)>>26)-(I/67108864|0),this.words[O+y]=67108863&U}for(;O<this.length-y;O++)F=(U=(0|this.words[O+y])+F)>>26,this.words[O+y]=67108863&U;if(0===F)return this._strip();for(q(-1===F),F=0,O=0;O<this.length;O++)F=(U=-(0|this.words[O])+F)>>26,this.words[O]=67108863&U;return this.negative=1,this._strip()},R.prototype._wordDiv=function(a,h){var y,S=this.clone(),O=a,U=0|O.words[O.length-1];0!=(y=26-this._countBits(U))&&(O=O.ushln(y),S.iushln(y),U=0|O.words[O.length-1]);var d,I=S.length-O.length;if("mod"!==h){(d=new R(null)).length=I+1,d.words=new Array(d.length);for(var _=0;_<d.length;_++)d.words[_]=0}var g=S.clone()._ishlnsubmul(O,1,I);0===g.negative&&(S=g,d&&(d.words[I]=1));for(var E=I-1;E>=0;E--){var k=67108864*(0|S.words[O.length+E])+(0|S.words[O.length+E-1]);for(k=Math.min(k/U|0,67108863),S._ishlnsubmul(O,k,E);0!==S.negative;)k--,S.negative=0,S._ishlnsubmul(O,1,E),S.isZero()||(S.negative^=1);d&&(d.words[E]=k)}return d&&d._strip(),S._strip(),"div"!==h&&0!==y&&S.iushrn(y),{div:d||null,mod:S}},R.prototype.divmod=function(a,h,y){return q(!a.isZero()),this.isZero()?{div:new R(0),mod:new R(0)}:0!==this.negative&&0===a.negative?(U=this.neg().divmod(a,h),"mod"!==h&&(S=U.div.neg()),"div"!==h&&(O=U.mod.neg(),y&&0!==O.negative&&O.iadd(a)),{div:S,mod:O}):0===this.negative&&0!==a.negative?(U=this.divmod(a.neg(),h),"mod"!==h&&(S=U.div.neg()),{div:S,mod:U.mod}):0!==(this.negative&a.negative)?(U=this.neg().divmod(a.neg(),h),"div"!==h&&(O=U.mod.neg(),y&&0!==O.negative&&O.isub(a)),{div:U.div,mod:O}):a.length>this.length||this.cmp(a)<0?{div:new R(0),mod:this}:1===a.length?"div"===h?{div:this.divn(a.words[0]),mod:null}:"mod"===h?{div:null,mod:new R(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new R(this.modrn(a.words[0]))}:this._wordDiv(a,h);var S,O,U},R.prototype.div=function(a){return this.divmod(a,"div",!1).div},R.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},R.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},R.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var y=0!==h.div.negative?h.mod.isub(a):h.mod,S=a.ushrn(1),O=a.andln(1),U=y.cmp(S);return U<0||1===O&&0===U?h.div:0!==h.div.negative?h.div.isubn(1):h.div.iaddn(1)},R.prototype.modrn=function(a){var h=a<0;h&&(a=-a),q(a<=67108863);for(var y=(1<<26)%a,S=0,O=this.length-1;O>=0;O--)S=(y*S+(0|this.words[O]))%a;return h?-S:S},R.prototype.modn=function(a){return this.modrn(a)},R.prototype.idivn=function(a){var h=a<0;h&&(a=-a),q(a<=67108863);for(var y=0,S=this.length-1;S>=0;S--){var O=(0|this.words[S])+67108864*y;this.words[S]=O/a|0,y=O%a}return this._strip(),h?this.ineg():this},R.prototype.divn=function(a){return this.clone().idivn(a)},R.prototype.egcd=function(a){q(0===a.negative),q(!a.isZero());var h=this,y=a.clone();h=0!==h.negative?h.umod(a):h.clone();for(var S=new R(1),O=new R(0),U=new R(0),F=new R(1),I=0;h.isEven()&&y.isEven();)h.iushrn(1),y.iushrn(1),++I;for(var d=y.clone(),_=h.clone();!h.isZero();){for(var g=0,E=1;0===(h.words[0]&E)&&g<26;++g,E<<=1);if(g>0)for(h.iushrn(g);g-- >0;)(S.isOdd()||O.isOdd())&&(S.iadd(d),O.isub(_)),S.iushrn(1),O.iushrn(1);for(var k=0,L=1;0===(y.words[0]&L)&&k<26;++k,L<<=1);if(k>0)for(y.iushrn(k);k-- >0;)(U.isOdd()||F.isOdd())&&(U.iadd(d),F.isub(_)),U.iushrn(1),F.iushrn(1);h.cmp(y)>=0?(h.isub(y),S.isub(U),O.isub(F)):(y.isub(h),U.isub(S),F.isub(O))}return{a:U,b:F,gcd:y.iushln(I)}},R.prototype._invmp=function(a){q(0===a.negative),q(!a.isZero());var g,h=this,y=a.clone();h=0!==h.negative?h.umod(a):h.clone();for(var S=new R(1),O=new R(0),U=y.clone();h.cmpn(1)>0&&y.cmpn(1)>0;){for(var F=0,I=1;0===(h.words[0]&I)&&F<26;++F,I<<=1);if(F>0)for(h.iushrn(F);F-- >0;)S.isOdd()&&S.iadd(U),S.iushrn(1);for(var d=0,_=1;0===(y.words[0]&_)&&d<26;++d,_<<=1);if(d>0)for(y.iushrn(d);d-- >0;)O.isOdd()&&O.iadd(U),O.iushrn(1);h.cmp(y)>=0?(h.isub(y),S.isub(O)):(y.isub(h),O.isub(S))}return(g=0===h.cmpn(1)?S:O).cmpn(0)<0&&g.iadd(a),g},R.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),y=a.clone();h.negative=0,y.negative=0;for(var S=0;h.isEven()&&y.isEven();S++)h.iushrn(1),y.iushrn(1);for(;;){for(;h.isEven();)h.iushrn(1);for(;y.isEven();)y.iushrn(1);var O=h.cmp(y);if(O<0){var U=h;h=y,y=U}else if(0===O||0===y.cmpn(1))break;h.isub(y)}return y.iushln(S)},R.prototype.invm=function(a){return this.egcd(a).a.umod(a)},R.prototype.isEven=function(){return!(1&this.words[0])},R.prototype.isOdd=function(){return!(1&~this.words[0])},R.prototype.andln=function(a){return this.words[0]&a},R.prototype.bincn=function(a){q("number"==typeof a);var h=a%26,y=(a-h)/26,S=1<<h;if(this.length<=y)return this._expand(y+1),this.words[y]|=S,this;for(var O=S,U=y;0!==O&&U<this.length;U++){var F=0|this.words[U];O=(F+=O)>>>26,this.words[U]=F&=67108863}return 0!==O&&(this.words[U]=O,this.length++),this},R.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},R.prototype.cmpn=function(a){var y,h=a<0;if(0!==this.negative&&!h)return-1;if(0===this.negative&&h)return 1;if(this._strip(),this.length>1)y=1;else{h&&(a=-a),q(a<=67108863,"Number is too big");var S=0|this.words[0];y=S===a?0:S<a?-1:1}return 0!==this.negative?0|-y:y},R.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var h=this.ucmp(a);return 0!==this.negative?0|-h:h},R.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,y=this.length-1;y>=0;y--){var S=0|this.words[y],O=0|a.words[y];if(S!==O){S<O?h=-1:S>O&&(h=1);break}}return h},R.prototype.gtn=function(a){return 1===this.cmpn(a)},R.prototype.gt=function(a){return 1===this.cmp(a)},R.prototype.gten=function(a){return this.cmpn(a)>=0},R.prototype.gte=function(a){return this.cmp(a)>=0},R.prototype.ltn=function(a){return-1===this.cmpn(a)},R.prototype.lt=function(a){return-1===this.cmp(a)},R.prototype.lten=function(a){return this.cmpn(a)<=0},R.prototype.lte=function(a){return this.cmp(a)<=0},R.prototype.eqn=function(a){return 0===this.cmpn(a)},R.prototype.eq=function(a){return 0===this.cmp(a)},R.red=function(a){return new ue(a)},R.prototype.toRed=function(a){return q(!this.red,"Already a number in reduction context"),q(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},R.prototype.fromRed=function(){return q(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},R.prototype._forceRed=function(a){return this.red=a,this},R.prototype.forceRed=function(a){return q(!this.red,"Already a number in reduction context"),this._forceRed(a)},R.prototype.redAdd=function(a){return q(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},R.prototype.redIAdd=function(a){return q(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},R.prototype.redSub=function(a){return q(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},R.prototype.redISub=function(a){return q(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},R.prototype.redShl=function(a){return q(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},R.prototype.redMul=function(a){return q(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},R.prototype.redIMul=function(a){return q(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},R.prototype.redSqr=function(){return q(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},R.prototype.redISqr=function(){return q(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},R.prototype.redSqrt=function(){return q(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},R.prototype.redInvm=function(){return q(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},R.prototype.redNeg=function(){return q(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},R.prototype.redPow=function(a){return q(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Me={k256:null,p224:null,p192:null,p25519:null};function Ue(A,a){this.name=A,this.p=new R(a,16),this.n=this.p.bitLength(),this.k=new R(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function ze(){Ue.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function Qe(){Ue.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function de(){Ue.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function Z(){Ue.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function ue(A){if("string"==typeof A){var a=R._prime(A);this.m=a.p,this.prime=a}else q(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}function ye(A){ue.call(this,A),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new R(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Ue.prototype._tmp=function(){var a=new R(null);return a.words=new Array(Math.ceil(this.n/13)),a},Ue.prototype.ireduce=function(a){var y,h=a;do{this.split(h,this.tmp),y=(h=(h=this.imulK(h)).iadd(this.tmp)).bitLength()}while(y>this.n);var S=y<this.n?-1:h.ucmp(this.p);return 0===S?(h.words[0]=0,h.length=1):S>0?h.isub(this.p):void 0!==h.strip?h.strip():h._strip(),h},Ue.prototype.split=function(a,h){a.iushrn(this.n,0,h)},Ue.prototype.imulK=function(a){return a.imul(this.k)},te(ze,Ue),ze.prototype.split=function(a,h){for(var y=4194303,S=Math.min(a.length,9),O=0;O<S;O++)h.words[O]=a.words[O];if(h.length=S,a.length<=9)return a.words[0]=0,void(a.length=1);var U=a.words[9];for(h.words[h.length++]=U&y,O=10;O<a.length;O++){var F=0|a.words[O];a.words[O-10]=(F&y)<<4|U>>>22,U=F}a.words[O-10]=U>>>=22,a.length-=0===U&&a.length>10?10:9},ze.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,y=0;y<a.length;y++){var S=0|a.words[y];a.words[y]=67108863&(h+=977*S),h=64*S+(h/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},te(Qe,Ue),te(de,Ue),te(Z,Ue),Z.prototype.imulK=function(a){for(var h=0,y=0;y<a.length;y++){var S=19*(0|a.words[y])+h,O=67108863&S;S>>>=26,a.words[y]=O,h=S}return 0!==h&&(a.words[a.length++]=h),a},R._prime=function(a){if(Me[a])return Me[a];var h;if("k256"===a)h=new ze;else if("p224"===a)h=new Qe;else if("p192"===a)h=new de;else{if("p25519"!==a)throw new Error("Unknown prime "+a);h=new Z}return Me[a]=h,h},ue.prototype._verify1=function(a){q(0===a.negative,"red works only with positives"),q(a.red,"red works only with red numbers")},ue.prototype._verify2=function(a,h){q(0===(a.negative|h.negative),"red works only with positives"),q(a.red&&a.red===h.red,"red works only with red numbers")},ue.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(Ee(a,a.umod(this.m)._forceRed(this)),a)},ue.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},ue.prototype.add=function(a,h){this._verify2(a,h);var y=a.add(h);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},ue.prototype.iadd=function(a,h){this._verify2(a,h);var y=a.iadd(h);return y.cmp(this.m)>=0&&y.isub(this.m),y},ue.prototype.sub=function(a,h){this._verify2(a,h);var y=a.sub(h);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},ue.prototype.isub=function(a,h){this._verify2(a,h);var y=a.isub(h);return y.cmpn(0)<0&&y.iadd(this.m),y},ue.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},ue.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},ue.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},ue.prototype.isqr=function(a){return this.imul(a,a.clone())},ue.prototype.sqr=function(a){return this.mul(a,a)},ue.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(q(h%2==1),3===h){var y=this.m.add(new R(1)).iushrn(2);return this.pow(a,y)}for(var S=this.m.subn(1),O=0;!S.isZero()&&0===S.andln(1);)O++,S.iushrn(1);q(!S.isZero());var U=new R(1).toRed(this),F=U.redNeg(),I=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new R(2*d*d).toRed(this);0!==this.pow(d,I).cmp(F);)d.redIAdd(F);for(var _=this.pow(d,S),g=this.pow(a,S.addn(1).iushrn(1)),E=this.pow(a,S),k=O;0!==E.cmp(U);){for(var L=E,$=0;0!==L.cmp(U);$++)L=L.redSqr();q($<k);var G=this.pow(_,new R(1).iushln(k-$-1));g=g.redMul(G),_=G.redSqr(),E=E.redMul(_),k=$}return g},ue.prototype.invm=function(a){var h=a._invmp(this.m);return 0!==h.negative?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},ue.prototype.pow=function(a,h){if(h.isZero())return new R(1).toRed(this);if(0===h.cmpn(1))return a.clone();var S=new Array(16);S[0]=new R(1).toRed(this),S[1]=a;for(var O=2;O<S.length;O++)S[O]=this.mul(S[O-1],a);var U=S[0],F=0,I=0,d=h.bitLength()%26;for(0===d&&(d=26),O=h.length-1;O>=0;O--){for(var _=h.words[O],g=d-1;g>=0;g--){var E=_>>g&1;U!==S[0]&&(U=this.sqr(U)),0!==E||0!==F?(F<<=1,F|=E,(4===++I||0===O&&0===g)&&(U=this.mul(U,S[F]),I=0,F=0)):I=0}d=26}return U},ue.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},ue.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},R.mont=function(a){return new ye(a)},te(ye,ue),ye.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},ye.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},ye.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var y=a.imul(h),S=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=y.isub(S).iushrn(this.shift),U=O;return O.cmp(this.m)>=0?U=O.isub(this.m):O.cmpn(0)<0&&(U=O.iadd(this.m)),U._forceRed(this)},ye.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new R(0)._forceRed(this);var y=a.mul(h),S=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=y.isub(S).iushrn(this.shift),U=O;return O.cmp(this.m)>=0?U=O.isub(this.m):O.cmpn(0)<0&&(U=O.iadd(this.m)),U._forceRed(this)},ye.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(Rt=ge.nmd(Rt),this)},1254:Rt=>{"use strict";var Ne=Object.prototype.hasOwnProperty,ge="~";function w(){}function ce(j,T,fe){this.fn=j,this.context=T,this.once=fe||!1}function q(j,T,fe,p,Ee){if("function"!=typeof fe)throw new TypeError("The listener must be a function");var Ce=new ce(fe,p||j,Ee),Oe=ge?ge+T:T;return j._events[Oe]?j._events[Oe].fn?j._events[Oe]=[j._events[Oe],Ce]:j._events[Oe].push(Ce):(j._events[Oe]=Ce,j._eventsCount++),j}function te(j,T){0===--j._eventsCount?j._events=new w:delete j._events[T]}function R(){this._events=new w,this._eventsCount=0}Object.create&&(w.prototype=Object.create(null),(new w).__proto__||(ge=!1)),R.prototype.eventNames=function(){var fe,p,T=[];if(0===this._eventsCount)return T;for(p in fe=this._events)Ne.call(fe,p)&&T.push(ge?p.slice(1):p);return Object.getOwnPropertySymbols?T.concat(Object.getOwnPropertySymbols(fe)):T},R.prototype.listeners=function(T){var p=this._events[ge?ge+T:T];if(!p)return[];if(p.fn)return[p.fn];for(var Ee=0,Ce=p.length,Oe=new Array(Ce);Ee<Ce;Ee++)Oe[Ee]=p[Ee].fn;return Oe},R.prototype.listenerCount=function(T){var p=this._events[ge?ge+T:T];return p?p.fn?1:p.length:0},R.prototype.emit=function(T,fe,p,Ee,Ce,Oe){var ae=ge?ge+T:T;if(!this._events[ae])return!1;var Q,Y,X=this._events[ae],De=arguments.length;if(X.fn){switch(X.once&&this.removeListener(T,X.fn,void 0,!0),De){case 1:return X.fn.call(X.context),!0;case 2:return X.fn.call(X.context,fe),!0;case 3:return X.fn.call(X.context,fe,p),!0;case 4:return X.fn.call(X.context,fe,p,Ee),!0;case 5:return X.fn.call(X.context,fe,p,Ee,Ce),!0;case 6:return X.fn.call(X.context,fe,p,Ee,Ce,Oe),!0}for(Y=1,Q=new Array(De-1);Y<De;Y++)Q[Y-1]=arguments[Y];X.fn.apply(X.context,Q)}else{var me,ve=X.length;for(Y=0;Y<ve;Y++)switch(X[Y].once&&this.removeListener(T,X[Y].fn,void 0,!0),De){case 1:X[Y].fn.call(X[Y].context);break;case 2:X[Y].fn.call(X[Y].context,fe);break;case 3:X[Y].fn.call(X[Y].context,fe,p);break;case 4:X[Y].fn.call(X[Y].context,fe,p,Ee);break;default:if(!Q)for(me=1,Q=new Array(De-1);me<De;me++)Q[me-1]=arguments[me];X[Y].fn.apply(X[Y].context,Q)}}return!0},R.prototype.on=function(T,fe,p){return q(this,T,fe,p,!1)},R.prototype.once=function(T,fe,p){return q(this,T,fe,p,!0)},R.prototype.removeListener=function(T,fe,p,Ee){var Ce=ge?ge+T:T;if(!this._events[Ce])return this;if(!fe)return te(this,Ce),this;var Oe=this._events[Ce];if(Oe.fn)Oe.fn===fe&&(!Ee||Oe.once)&&(!p||Oe.context===p)&&te(this,Ce);else{for(var ae=0,X=[],De=Oe.length;ae<De;ae++)(Oe[ae].fn!==fe||Ee&&!Oe[ae].once||p&&Oe[ae].context!==p)&&X.push(Oe[ae]);X.length?this._events[Ce]=1===X.length?X[0]:X:te(this,Ce)}return this},R.prototype.removeAllListeners=function(T){var fe;return T?this._events[fe=ge?ge+T:T]&&te(this,fe):(this._events=new w,this._eventsCount=0),this},R.prototype.off=R.prototype.removeListener,R.prototype.addListener=R.prototype.on,R.prefixed=ge,R.EventEmitter=R,Rt.exports=R},1923:(Rt,Ne,ge)=>{"use strict";ge.r(Ne),ge.d(Ne,{Account:()=>x0,AddressLookupTableAccount:()=>vo,AddressLookupTableInstruction:()=>bg,AddressLookupTableProgram:()=>Lo,Authorized:()=>_c,BLOCKHASH_CACHE_TIMEOUT_MS:()=>ja,BPF_LOADER_DEPRECATED_PROGRAM_ID:()=>k0,BPF_LOADER_PROGRAM_ID:()=>V0,BpfLoader:()=>W0,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:()=>Hn,ComputeBudgetInstruction:()=>wg,ComputeBudgetProgram:()=>Mo,Connection:()=>yg,Ed25519Program:()=>Ei,Enum:()=>I0,EpochSchedule:()=>Wa,FeeCalculatorLayout:()=>Ka,Keypair:()=>Cr,LAMPORTS_PER_SOL:()=>Mg,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:()=>Jn,Loader:()=>Ro,Lockup:()=>Qr,MAX_SEED_LENGTH:()=>Pa,Message:()=>Nn,MessageAccountKeys:()=>Yr,MessageV0:()=>gr,NONCE_ACCOUNT_LENGTH:()=>Eo,NonceAccount:()=>_i,PACKET_DATA_SIZE:()=>rr,PUBLIC_KEY_LENGTH:()=>zn,PublicKey:()=>Ae,SIGNATURE_LENGTH_IN_BYTES:()=>jr,SOLANA_SCHEMA:()=>qr,STAKE_CONFIG_ID:()=>gc,STAKE_INSTRUCTION_LAYOUTS:()=>cn,SYSTEM_INSTRUCTION_LAYOUTS:()=>xt,SYSVAR_CLOCK_PUBKEY:()=>$n,SYSVAR_EPOCH_SCHEDULE_PUBKEY:()=>P0,SYSVAR_INSTRUCTIONS_PUBKEY:()=>U0,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:()=>pi,SYSVAR_RENT_PUBKEY:()=>kr,SYSVAR_REWARDS_PUBKEY:()=>D0,SYSVAR_SLOT_HASHES_PUBKEY:()=>F0,SYSVAR_SLOT_HISTORY_PUBKEY:()=>z0,SYSVAR_STAKE_HISTORY_PUBKEY:()=>gi,Secp256k1Program:()=>Br,SendTransactionError:()=>Xr,SolanaJSONRPCError:()=>Fe,SolanaJSONRPCErrorCode:()=>K0,StakeAuthorizationLayout:()=>vg,StakeInstruction:()=>Ag,StakeProgram:()=>Ri,Struct:()=>ho,SystemInstruction:()=>$0,SystemProgram:()=>an,Transaction:()=>mt,TransactionExpiredBlockheightExceededError:()=>po,TransactionExpiredNonceInvalidError:()=>xr,TransactionExpiredTimeoutError:()=>go,TransactionInstruction:()=>Ot,TransactionMessage:()=>mo,TransactionStatus:()=>Zn,VALIDATOR_INFO_KEY:()=>yc,VERSION_PREFIX_MASK:()=>di,VOTE_PROGRAM_ID:()=>kg,ValidatorInfo:()=>Do,VersionedMessage:()=>_o,VersionedTransaction:()=>yo,VoteAccount:()=>Fo,VoteAuthorizationLayout:()=>Og,VoteInit:()=>mc,VoteInstruction:()=>Ig,VoteProgram:()=>Lr,clusterApiUrl:()=>Bg,sendAndConfirmRawTransaction:()=>Lg,sendAndConfirmTransaction:()=>bo});var w=ge(467),ce=ge(3838);const q="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function te(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name}function R(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function j(n,...e){if(!te(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function T(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.createHasher");R(n.outputLen),R(n.blockLen)}function fe(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function p(n,e){j(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Oe(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function ae(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function X(n,e){return n<<32-e|n>>>e}function Y(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const he=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]?n=>n:function Se(n){for(let e=0;e<n.length;e++)n[e]=Y(n[e]);return n},Me="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,Ue=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function ze(n){if(j(n),Me)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=Ue[n[t]];return e}function de(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void 0}function Z(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);if(Me)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,o=0;i<t;i++,o+=2){const s=de(n.charCodeAt(o)),u=de(n.charCodeAt(o+1));if(void 0===s||void 0===u)throw new Error('hex string expected, got non-hex character "'+(n[o]+n[o+1])+'" at index '+o);r[i]=16*s+u}return r}function a(n){if("string"!=typeof n)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(n))}function y(n){return"string"==typeof n&&(n=a(n)),j(n),n}function O(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];j(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const o=n[r];t.set(o,i),i+=o.length}return t}class F{}function I(n){const e=r=>n().update(y(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function L(n=32){if(q&&"function"==typeof q.getRandomValues)return q.getRandomValues(new Uint8Array(n));if(q&&"function"==typeof q.randomBytes)return Uint8Array.from(q.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function G(n,e,t){return n&e^~n&t}function se(n,e,t){return n&e^n&t^e&t}class ee extends F{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=ae(this.buffer)}update(e){fe(this),j(e=y(e));const{view:t,buffer:r,blockLen:i}=this,o=e.length;for(let s=0;s<o;){const u=Math.min(i-this.pos,o-s);if(u===i){const l=ae(e);for(;i<=o-s;s+=i)this.process(l,s);continue}r.set(e.subarray(s,s+u),this.pos),this.pos+=u,s+=u,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fe(this),p(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;t[s++]=128,Oe(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(r,0),s=0);for(let M=s;M<i;M++)t[M]=0;(function $(n,e,t,r){if("function"==typeof n.setBigUint64)return n.setBigUint64(e,t,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),u=Number(t&o),b=r?0:4;n.setUint32(e+(r?4:0),s,r),n.setUint32(e+b,u,r)})(r,i-8,BigInt(8*this.length),o),this.process(r,0);const u=ae(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=l/4,x=this.get();if(b>x.length)throw new Error("_sha2: outputLen bigger than state");for(let M=0;M<b;M++)u.setUint32(4*M,x[M],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:o,destroyed:s,pos:u}=this;return e.destroyed=s,e.finished=o,e.length=i,e.pos=u,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const be=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),et=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),hn=BigInt(2**32-1),yt=BigInt(32);function St(n,e=!1){return e?{h:Number(n&hn),l:Number(n>>yt&hn)}:{h:0|Number(n>>yt&hn),l:0|Number(n&hn)}}function fn(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let o=0;o<t;o++){const{h:s,l:u}=St(n[o],e);[r[o],i[o]]=[s,u]}return[r,i]}const ft=(n,e,t)=>n>>>t,Cn=(n,e,t)=>n<<32-t|e>>>t,bt=(n,e,t)=>n>>>t|e<<32-t,st=(n,e,t)=>n<<32-t|e>>>t,Bn=(n,e,t)=>n<<64-t|e>>>t-32,m=(n,e,t)=>n>>>t-32|e<<64-t;function Be(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:0|i}}const At=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Xe=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Ze=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),pt=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,Lt=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),Mt=(n,e,t,r,i,o)=>e+t+r+i+o+(n/2**32|0)|0,zt=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vn=new Uint32Array(64);class Pt extends ee{constructor(e=32){super(64,e,8,!1),this.A=0|be[0],this.B=0|be[1],this.C=0|be[2],this.D=0|be[3],this.E=0|be[4],this.F=0|be[5],this.G=0|be[6],this.H=0|be[7]}get(){const{A:e,B:t,C:r,D:i,E:o,F:s,G:u,H:l}=this;return[e,t,r,i,o,s,u,l]}set(e,t,r,i,o,s,u,l){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|o,this.F=0|s,this.G=0|u,this.H=0|l}process(e,t){for(let M=0;M<16;M++,t+=4)vn[M]=e.getUint32(t,!1);for(let M=16;M<64;M++){const N=vn[M-15],B=vn[M-2],P=X(N,7)^X(N,18)^N>>>3,z=X(B,17)^X(B,19)^B>>>10;vn[M]=z+vn[M-7]+P+vn[M-16]|0}let{A:r,B:i,C:o,D:s,E:u,F:l,G:b,H:x}=this;for(let M=0;M<64;M++){const B=x+(X(u,6)^X(u,11)^X(u,25))+G(u,l,b)+zt[M]+vn[M]|0,z=(X(r,2)^X(r,13)^X(r,22))+se(r,i,o)|0;x=b,b=l,l=u,u=s+B|0,s=o,o=i,i=r,r=B+z|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,u=u+this.E|0,l=l+this.F|0,b=b+this.G|0,x=x+this.H|0,this.set(r,i,o,s,u,l,b,x)}roundClean(){Oe(vn)}destroy(){this.set(0,0,0,0,0,0,0,0),Oe(this.buffer)}}const Mr=fn(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Kt=Mr[0],$t=Mr[1],In=new Uint32Array(80),Et=new Uint32Array(80);class Nt extends ee{constructor(e=64){super(128,e,16,!1),this.Ah=0|et[0],this.Al=0|et[1],this.Bh=0|et[2],this.Bl=0|et[3],this.Ch=0|et[4],this.Cl=0|et[5],this.Dh=0|et[6],this.Dl=0|et[7],this.Eh=0|et[8],this.El=0|et[9],this.Fh=0|et[10],this.Fl=0|et[11],this.Gh=0|et[12],this.Gl=0|et[13],this.Hh=0|et[14],this.Hl=0|et[15]}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:o,Cl:s,Dh:u,Dl:l,Eh:b,El:x,Fh:M,Fl:N,Gh:B,Gl:P,Hh:z,Hl:V}=this;return[e,t,r,i,o,s,u,l,b,x,M,N,B,P,z,V]}set(e,t,r,i,o,s,u,l,b,x,M,N,B,P,z,V){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|o,this.Cl=0|s,this.Dh=0|u,this.Dl=0|l,this.Eh=0|b,this.El=0|x,this.Fh=0|M,this.Fl=0|N,this.Gh=0|B,this.Gl=0|P,this.Hh=0|z,this.Hl=0|V}process(e,t){for(let ne=0;ne<16;ne++,t+=4)In[ne]=e.getUint32(t),Et[ne]=e.getUint32(t+=4);for(let ne=16;ne<80;ne++){const Te=0|In[ne-15],je=0|Et[ne-15],ot=bt(Te,je,1)^bt(Te,je,8)^ft(Te,0,7),ht=st(Te,je,1)^st(Te,je,8)^Cn(Te,je,7),tt=0|In[ne-2],_e=0|Et[ne-2],He=bt(tt,_e,19)^Bn(tt,_e,61)^ft(tt,0,6),Je=st(tt,_e,19)^m(tt,_e,61)^Cn(tt,_e,6),Ve=Ze(ht,Je,Et[ne-7],Et[ne-16]),le=pt(Ve,ot,He,In[ne-7],In[ne-16]);In[ne]=0|le,Et[ne]=0|Ve}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:u,Cl:l,Dh:b,Dl:x,Eh:M,El:N,Fh:B,Fl:P,Gh:z,Gl:V,Hh:K,Hl:oe}=this;for(let ne=0;ne<80;ne++){const Te=bt(M,N,14)^bt(M,N,18)^Bn(M,N,41),je=st(M,N,14)^st(M,N,18)^m(M,N,41),ot=M&B^~M&z,tt=Lt(oe,je,N&P^~N&V,$t[ne],Et[ne]),_e=Mt(tt,K,Te,ot,Kt[ne],In[ne]),He=0|tt,Je=bt(r,i,28)^Bn(r,i,34)^Bn(r,i,39),Ve=st(r,i,28)^m(r,i,34)^m(r,i,39),le=r&o^r&u^o&u,re=i&s^i&l^s&l;K=0|z,oe=0|V,z=0|B,V=0|P,B=0|M,P=0|N,({h:M,l:N}=Be(0|b,0|x,0|_e,0|He)),b=0|u,x=0|l,u=0|o,l=0|s,o=0|r,s=0|i;const ie=At(He,Ve,re);r=Xe(ie,_e,Je,le),i=0|ie}({h:r,l:i}=Be(0|this.Ah,0|this.Al,0|r,0|i)),({h:o,l:s}=Be(0|this.Bh,0|this.Bl,0|o,0|s)),({h:u,l}=Be(0|this.Ch,0|this.Cl,0|u,0|l)),({h:b,l:x}=Be(0|this.Dh,0|this.Dl,0|b,0|x)),({h:M,l:N}=Be(0|this.Eh,0|this.El,0|M,0|N)),({h:B,l:P}=Be(0|this.Fh,0|this.Fl,0|B,0|P)),({h:z,l:V}=Be(0|this.Gh,0|this.Gl,0|z,0|V)),({h:K,l:oe}=Be(0|this.Hh,0|this.Hl,0|K,0|oe)),this.set(r,i,o,s,u,l,b,x,M,N,B,P,z,V,K,oe)}roundClean(){Oe(In,Et)}destroy(){Oe(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ut=I(()=>new Pt),Bt=I(()=>new Nt),Ct=BigInt(0),Wn=BigInt(1);function On(n,e=""){if("boolean"!=typeof n)throw new Error((e&&`"${e}"`)+"expected boolean, got type="+typeof n);return n}function pn(n,e,t=""){const r=te(n),i=n?.length,o=void 0!==e;if(!r||o&&i!==e)throw new Error((t&&`"${t}" `)+"expected Uint8Array"+(o?` of length ${e}`:"")+", got "+(r?`length=${i}`:"type="+typeof n));return n}function Gn(n){const e=n.toString(16);return 1&e.length?"0"+e:e}function br(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);return""===n?Ct:BigInt("0x"+n)}function Qn(n){return br(ze(n))}function xn(n){return j(n),br(ze(Uint8Array.from(n).reverse()))}function ir(n,e){return Z(n.toString(16).padStart(2*e,"0"))}function wr(n,e){return ir(n,e).reverse()}function vt(n,e,t){let r;if("string"==typeof e)try{r=Z(e)}catch(o){throw new Error(n+" must be hex string or Uint8Array, cause: "+o)}else{if(!te(e))throw new Error(n+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const i=r.length;if("number"==typeof t&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function Er(n){return Uint8Array.from(n)}const or=n=>"bigint"==typeof n&&Ct<=n;function sr(n,e,t,r){if(!function Ur(n,e,t){return or(n)&&or(e)&&or(t)&&e<=n&&n<t}(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function Rr(n){let e;for(e=0;n>Ct;n>>=Wn,e+=1);return e}const Dr=n=>(Wn<<BigInt(n))-Wn;function Fr(n,e,t={}){if(!n||"object"!=typeof n)throw new Error("expected valid options object");function r(i,o,s){const u=n[i];if(s&&void 0===u)return;const l=typeof u;if(l!==o||null===u)throw new Error(`param "${i}" is invalid: expected ${o}, got ${l}`)}Object.entries(e).forEach(([i,o])=>r(i,o,!1)),Object.entries(t).forEach(([i,o])=>r(i,o,!0))}function ri(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(void 0!==i)return i;const o=n(t,...r);return e.set(t,o),o}}const gn=BigInt(0),tn=BigInt(1),ar=BigInt(2),$o=BigInt(3),Ho=BigInt(4),Vo=BigInt(5),vc=BigInt(7),Wo=BigInt(8),Ic=BigInt(9),Go=BigInt(16);function Jt(n,e){const t=n%e;return t>=gn?t:e+t}function Ht(n,e,t){let r=n;for(;e-- >gn;)r*=r,r%=t;return r}function ki(n,e){if(n===gn)throw new Error("invert: expected non-zero number");if(e<=gn)throw new Error("invert: expected positive modulus, got "+e);let t=Jt(n,e),r=e,i=gn,o=tn,s=tn,u=gn;for(;t!==gn;){const b=r/t,x=r%t,M=i-s*b,N=o-u*b;r=t,t=x,i=s,o=u,s=M,u=N}if(r!==tn)throw new Error("invert: does not exist");return Jt(i,e)}function Ti(n,e,t){if(!n.eql(n.sqr(e),t))throw new Error("Cannot find square root")}function qo(n,e){const r=n.pow(e,(n.ORDER+tn)/Ho);return Ti(n,r,e),r}function Oc(n,e){const t=(n.ORDER-Vo)/Wo,r=n.mul(e,ar),i=n.pow(r,t),o=n.mul(e,i),s=n.mul(n.mul(o,ar),i),u=n.mul(o,n.sub(s,n.ONE));return Ti(n,u,e),u}function jo(n){if(n<$o)throw new Error("sqrt is not defined for small field");let e=n-tn,t=0;for(;e%ar===gn;)e/=ar,t++;let r=ar;const i=qn(n);for(;1===Ni(i,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===t)return qo;let o=i.pow(r,e);const s=(e+tn)/ar;return function(l,b){if(l.is0(b))return b;if(1!==Ni(l,b))throw new Error("Cannot find square root");let x=t,M=l.mul(l.ONE,o),N=l.pow(b,e),B=l.pow(b,s);for(;!l.eql(N,l.ONE);){if(l.is0(N))return l.ZERO;let P=1,z=l.sqr(N);for(;!l.eql(z,l.ONE);)if(P++,z=l.sqr(z),P===x)throw new Error("Cannot find square root");const V=tn<<BigInt(x-P-1),K=l.pow(M,V);x=P,M=l.sqr(K),N=l.mul(N,M),B=l.mul(B,K)}return B}}const Tc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Xo(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((s,u,l)=>n.is0(u)?s:(r[l]=s,n.mul(s,u)),n.ONE),o=n.inv(i);return e.reduceRight((s,u,l)=>n.is0(u)?s:(r[l]=n.mul(s,r[l]),n.mul(s,u)),o),r}function Ni(n,e){const r=n.pow(e,(n.ORDER-tn)/ar),i=n.eql(r,n.ONE),o=n.eql(r,n.ZERO),s=n.eql(r,n.neg(n.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function Ci(n,e){void 0!==e&&R(e);const t=void 0!==e?e:n.toString(2).length;return{nBitLength:t,nByteLength:Math.ceil(t/8)}}function qn(n,e,t=!1,r={}){if(n<=gn)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,o,u,s=!1;if("object"==typeof e&&null!=e){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");e.BITS&&(i=e.BITS),e.sqrt&&(o=e.sqrt),"boolean"==typeof e.isLE&&(t=e.isLE),"boolean"==typeof e.modFromBytes&&(s=e.modFromBytes),u=e.allowedLengths}else"number"==typeof e&&(i=e),r.sqrt&&(o=r.sqrt);const{nBitLength:l,nByteLength:b}=Ci(n,i);if(b>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let x;const M=Object.freeze({ORDER:n,isLE:t,BITS:l,BYTES:b,MASK:Dr(l),ZERO:gn,ONE:tn,allowedLengths:u,create:N=>Jt(N,n),isValid:N=>{if("bigint"!=typeof N)throw new Error("invalid field element: expected bigint, got "+typeof N);return gn<=N&&N<n},is0:N=>N===gn,isValidNot0:N=>!M.is0(N)&&M.isValid(N),isOdd:N=>(N&tn)===tn,neg:N=>Jt(-N,n),eql:(N,B)=>N===B,sqr:N=>Jt(N*N,n),add:(N,B)=>Jt(N+B,n),sub:(N,B)=>Jt(N-B,n),mul:(N,B)=>Jt(N*B,n),pow:(N,B)=>function Yo(n,e,t){if(t<gn)throw new Error("invalid exponent, negatives unsupported");if(t===gn)return n.ONE;if(t===tn)return e;let r=n.ONE,i=e;for(;t>gn;)t&tn&&(r=n.mul(r,i)),i=n.sqr(i),t>>=tn;return r}(M,N,B),div:(N,B)=>Jt(N*ki(B,n),n),sqrN:N=>N*N,addN:(N,B)=>N+B,subN:(N,B)=>N-B,mulN:(N,B)=>N*B,inv:N=>ki(N,n),sqrt:o||(N=>(x||(x=function kc(n){return n%Ho===$o?qo:n%Wo===Vo?Oc:n%Go===Ic?function xc(n){const e=qn(n),t=jo(n),r=t(e,e.neg(e.ONE)),i=t(e,r),o=t(e,e.neg(r)),s=(n+vc)/Go;return(u,l)=>{let b=u.pow(l,s),x=u.mul(b,r);const M=u.mul(b,i),N=u.mul(b,o),B=u.eql(u.sqr(x),l),P=u.eql(u.sqr(M),l);b=u.cmov(b,x,B),x=u.cmov(N,M,P);const z=u.eql(u.sqr(x),l),V=u.cmov(b,x,z);return Ti(u,V,l),V}}(n):jo(n)}(n)),x(M,N))),toBytes:N=>t?wr(N,b):ir(N,b),fromBytes:(N,B=!0)=>{if(u){if(!u.includes(N.length)||N.length>b)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+N.length);const z=new Uint8Array(b);z.set(N,t?0:z.length-N.length),N=z}if(N.length!==b)throw new Error("Field.fromBytes: expected "+b+" bytes, got "+N.length);let P=t?xn(N):Qn(N);if(s&&(P=Jt(P,n)),!B&&!M.isValid(P))throw new Error("invalid field element: outside of range 0..ORDER");return P},invertBatch:N=>Xo(M,N),cmov:(N,B,P)=>P?B:N});return Object.freeze(M)}function Zo(n){if("bigint"!=typeof n)throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function Jo(n){const e=Zo(n);return e+Math.ceil(e/2)}const Sr=BigInt(0),cr=BigInt(1);function ii(n,e){const t=e.negate();return n?t:e}function ur(n,e){const t=Xo(n.Fp,e.map(r=>r.Z));return e.map((r,i)=>n.fromAffine(r.toAffine(t[i])))}function Bi(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function Li(n,e){Bi(n,e);const i=2**n;return{windows:Math.ceil(e/n)+1,windowSize:2**(n-1),mask:Dr(n),maxNumber:i,shiftBy:BigInt(n)}}function Qo(n,e,t){const{windowSize:r,mask:i,maxNumber:o,shiftBy:s}=t;let u=Number(n&i),l=n>>s;u>r&&(u-=o,l+=cr);const b=e*r;return{nextN:l,offset:b+Math.abs(u)-1,isZero:0===u,isNeg:u<0,isNegF:e%2!=0,offsetF:b}}const Mi=new WeakMap,ns=new WeakMap;function Pi(n){return ns.get(n)||1}function rs(n){if(n!==Sr)throw new Error("invalid wNAF")}class is{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let i=e;for(;t>Sr;)t&cr&&(r=r.add(i)),i=i.double(),t>>=cr;return r}precomputeWindow(e,t){const{windows:r,windowSize:i}=Li(t,this.bits),o=[];let s=e,u=s;for(let l=0;l<r;l++){u=s,o.push(u);for(let b=1;b<i;b++)u=u.add(s),o.push(u);s=u.double()}return o}wNAF(e,t,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,o=this.BASE;const s=Li(e,this.bits);for(let u=0;u<s.windows;u++){const{nextN:l,offset:b,isZero:x,isNeg:M,isNegF:N,offsetF:B}=Qo(r,u,s);r=l,x?o=o.add(ii(N,t[B])):i=i.add(ii(M,t[b]))}return rs(r),{p:i,f:o}}wNAFUnsafe(e,t,r,i=this.ZERO){const o=Li(e,this.bits);for(let s=0;s<o.windows&&r!==Sr;s++){const{nextN:u,offset:l,isZero:b,isNeg:x}=Qo(r,s,o);if(r=u,!b){const M=t[l];i=i.add(x?M.negate():M)}}return rs(r),i}getPrecomputes(e,t,r){let i=Mi.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(i=r(i)),Mi.set(t,i))),i}cached(e,t,r){const i=Pi(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)}unsafe(e,t,r,i){const o=Pi(e);return 1===o?this._unsafeLadder(e,t,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,r),t,i)}createCache(e,t){Bi(t,this.bits),ns.set(e,t),Mi.delete(e)}hasCache(e){return 1!==Pi(e)}}function Ui(n,e,t,r){(function es(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})})(t,n),function ts(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}(r,e);const i=t.length,o=r.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");const s=n.ZERO,u=Rr(BigInt(i));let l=1;u>12?l=u-3:u>4?l=u-2:u>0&&(l=2);const b=Dr(l),x=new Array(Number(b)+1).fill(s);let N=s;for(let B=Math.floor((e.BITS-1)/l)*l;B>=0;B-=l){x.fill(s);for(let z=0;z<o;z++){const K=Number(r[z]>>BigInt(B)&b);x[K]=x[K].add(t[z])}let P=s;for(let z=x.length-1,V=s;z>0;z--)V=V.add(x[z]),P=P.add(V);if(N=N.add(P),0!==B)for(let z=0;z<l;z++)N=N.double()}return N}function os(n,e,t){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return function Nc(n){Fr(n,Tc.reduce((r,i)=>(r[i]="function",r),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"}))}(e),e}return qn(n,{isLE:t})}function ss(n,e,t={},r){if(void 0===r&&(r="edwards"===n),!e||"object"!=typeof e)throw new Error(`expected valid ${n} CURVE object`);for(const l of["p","n","h"]){const b=e[l];if(!("bigint"==typeof b&&b>Sr))throw new Error(`CURVE.${l} must be positive bigint`)}const i=os(e.p,t.Fp,r),o=os(e.n,t.Fn,r),u=["Gx","Gy","a","weierstrass"===n?"b":"d"];for(const l of u)if(!i.isValid(e[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return{CURVE:e=Object.freeze(Object.assign({},e)),Fp:i,Fn:o}}const tr=BigInt(0),sn=BigInt(1),Di=BigInt(2),Lc=BigInt(8);a("HashToScalar-");const Ln=BigInt(1),Ki=BigInt(2),us=(BigInt(3),BigInt(5)),ls=BigInt(8),lr=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Kr={p:lr,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:ls,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")},$i=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");const Le=qn(Kr.p,{isLE:!0}),jc=(qn(Kr.n,{isLE:!0}),{...Kr,Fp:Le,hash:Bt,adjustScalarBytes:function qc(n){return n[0]&=248,n[31]&=127,n[31]|=64,n},uvRatio:function Hi(n,e){const t=lr,r=Jt(e*e*e,t),o=function Gc(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),o=lr,u=n*n%o*n%o,l=Ht(u,Ki,o)*u%o,b=Ht(l,Ln,o)*n%o,x=Ht(b,us,o)*b%o,M=Ht(x,e,o)*x%o,N=Ht(M,t,o)*M%o,B=Ht(N,r,o)*N%o,P=Ht(B,i,o)*B%o,z=Ht(P,i,o)*B%o,V=Ht(z,e,o)*x%o;return{pow_p_5_8:Ht(V,Ki,o)*n%o,b2:u}}(n*Jt(r*r*e,t)).pow_p_5_8;let s=Jt(n*r*o,t);const u=Jt(e*s*s,t),l=s,b=Jt(s*$i,t),x=u===n,M=u===Jt(-n,t),N=u===Jt(-n*$i,t);return x&&(s=l),(M||N)&&(s=b),((n,e)=>(Jt(n,e)&tn)===tn)(s,t)&&(s=Jt(-s,t)),{isValid:x||M,value:s}}}),_n=function Kc(n){const{CURVE:e,curveOpts:t,hash:r,eddsaOpts:i}=function Fc(n){const e={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy};return{CURVE:e,curveOpts:{Fp:n.Fp,Fn:qn(e.n,n.nBitLength,!0),uvRatio:n.uvRatio},hash:n.hash,eddsaOpts:{randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve}}}(n),o=function Pc(n,e={}){const t=ss("edwards",n,e,e.FpFnLE),{Fp:r,Fn:i}=t;let o=t.CURVE;const{h:s}=o;Fr(e,{},{uvRatio:"function"});const u=Di<<BigInt(8*i.BYTES)-sn,l=V=>r.create(V),b=e.uvRatio||((V,K)=>{try{return{isValid:!0,value:r.sqrt(r.div(V,K))}}catch{return{isValid:!1,value:tr}}});if(!function Mc(n,e,t,r){const i=n.sqr(t),o=n.sqr(r),s=n.add(n.mul(e.a,i),o),u=n.add(n.ONE,n.mul(e.d,n.mul(i,o)));return n.eql(s,u)}(r,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function x(V,K,oe=!1){return sr("coordinate "+V,K,oe?sn:tr,u),K}function M(V){if(!(V instanceof P))throw new Error("ExtendedPoint expected")}const N=ri((V,K)=>{const{X:oe,Y:ne,Z:Te}=V,je=V.is0();null==K&&(K=je?Lc:r.inv(Te));const ot=l(oe*K),ht=l(ne*K),tt=r.mul(Te,K);if(je)return{x:tr,y:sn};if(tt!==sn)throw new Error("invZ was invalid");return{x:ot,y:ht}}),B=ri(V=>{const{a:K,d:oe}=o;if(V.is0())throw new Error("bad point: ZERO");const{X:ne,Y:Te,Z:je,T:ot}=V,ht=l(ne*ne),tt=l(Te*Te),_e=l(je*je),He=l(_e*_e),Je=l(ht*K);if(l(_e*l(Je+tt))!==l(He+l(oe*l(ht*tt))))throw new Error("bad point: equation left != right (1)");if(l(ne*Te)!==l(je*ot))throw new Error("bad point: equation left != right (2)");return!0});class P{constructor(K,oe,ne,Te){this.X=x("x",K),this.Y=x("y",oe),this.Z=x("z",ne,!0),this.T=x("t",Te),Object.freeze(this)}static CURVE(){return o}static fromAffine(K){if(K instanceof P)throw new Error("extended point not allowed");const{x:oe,y:ne}=K||{};return x("x",oe),x("y",ne),new P(oe,ne,sn,l(oe*ne))}static fromBytes(K,oe=!1){const ne=r.BYTES,{a:Te,d:je}=o;K=Er(pn(K,ne,"point")),On(oe,"zip215");const ot=Er(K),ht=K[ne-1];ot[ne-1]=-129&ht;const tt=xn(ot);sr("point.y",tt,tr,oe?u:r.ORDER);const He=l(tt*tt),Je=l(He-sn),Ve=l(je*He-Te);let{isValid:le,value:re}=b(Je,Ve);if(!le)throw new Error("bad point: invalid y coordinate");const ie=(re&sn)===sn,Re=!!(128&ht);if(!oe&&re===tr&&Re)throw new Error("bad point: x=0 and x_0=1");return Re!==ie&&(re=l(-re)),P.fromAffine({x:re,y:tt})}static fromHex(K,oe=!1){return P.fromBytes(vt("point",K),oe)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(K=8,oe=!0){return z.createCache(this,K),oe||this.multiply(Di),this}assertValidity(){B(this)}equals(K){M(K);const{X:oe,Y:ne,Z:Te}=this,{X:je,Y:ot,Z:ht}=K,tt=l(oe*ht),_e=l(je*Te),He=l(ne*ht),Je=l(ot*Te);return tt===_e&&He===Je}is0(){return this.equals(P.ZERO)}negate(){return new P(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:K}=o,{X:oe,Y:ne,Z:Te}=this,je=l(oe*oe),ot=l(ne*ne),ht=l(Di*l(Te*Te)),tt=l(K*je),_e=oe+ne,He=l(l(_e*_e)-je-ot),Je=tt+ot,Ve=Je-ht,le=tt-ot,re=l(He*Ve),ie=l(Je*le),Re=l(He*le),Pe=l(Ve*Je);return new P(re,ie,Pe,Re)}add(K){M(K);const{a:oe,d:ne}=o,{X:Te,Y:je,Z:ot,T:ht}=this,{X:tt,Y:_e,Z:He,T:Je}=K,Ve=l(Te*tt),le=l(je*_e),re=l(ht*ne*Je),ie=l(ot*He),Re=l((Te+je)*(tt+_e)-Ve-le),Pe=ie-re,Ge=ie+re,Ke=l(le-oe*Ve),$e=l(Re*Pe),Ye=l(Ge*Ke),nt=l(Re*Ke),Vt=l(Pe*Ge);return new P($e,Ye,Vt,nt)}subtract(K){return this.add(K.negate())}multiply(K){if(!i.isValidNot0(K))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:oe,f:ne}=z.cached(this,K,Te=>ur(P,Te));return ur(P,[oe,ne])[0]}multiplyUnsafe(K,oe=P.ZERO){if(!i.isValid(K))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return K===tr?P.ZERO:this.is0()||K===sn?this:z.unsafe(this,K,ne=>ur(P,ne),oe)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return z.unsafe(this,o.n).is0()}toAffine(K){return N(this,K)}clearCofactor(){return s===sn?this:this.multiplyUnsafe(s)}toBytes(){const{x:K,y:oe}=this.toAffine(),ne=r.toBytes(oe);return ne[ne.length-1]|=K&sn?128:0,ne}toHex(){return ze(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(K){return ur(P,K)}static msm(K,oe){return Ui(P,i,K,oe)}_setWindowSize(K){this.precompute(K)}toRawBytes(){return this.toBytes()}}P.BASE=new P(o.Gx,o.Gy,sn,l(o.Gx*o.Gy)),P.ZERO=new P(tr,sn,sn,tr),P.Fp=r,P.Fn=i;const z=new is(P,i.BITS);return P.BASE.precompute(8),P}(e,t);return function zc(n,e){const t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:n,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}(n,function Dc(n,e,t={}){if("function"!=typeof e)throw new Error('"hash" function param is required');Fr(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=t,{BASE:i,Fp:o,Fn:s}=n,u=t.randomBytes||L,l=t.adjustScalarBytes||(_e=>_e),b=t.domain||((_e,He,Je)=>{if(On(Je,"phflag"),He.length||Je)throw new Error("Contexts/pre-hash are not supported");return _e});function x(_e){return s.create(xn(_e))}function N(_e){const{head:He,prefix:Je,scalar:Ve}=function M(_e){const He=ne.secretKey;_e=vt("private key",_e,He);const Je=vt("hashed private key",e(_e),2*He),Ve=l(Je.slice(0,He));return{head:Ve,prefix:Je.slice(He,2*He),scalar:x(Ve)}}(_e),le=i.multiply(Ve),re=le.toBytes();return{head:He,prefix:Je,scalar:Ve,point:le,pointBytes:re}}function B(_e){return N(_e).pointBytes}function P(_e=Uint8Array.of(),...He){const Je=O(...He);return x(e(b(Je,vt("context",_e),!!r)))}const V={zip215:!0},oe=o.BYTES,ne={secretKey:oe,publicKey:oe,signature:2*oe,seed:oe};function Te(_e=u(ne.seed)){return pn(_e,ne.seed,"seed")}const tt={getExtendedPublicKey:N,randomSecretKey:Te,isValidSecretKey:function ot(_e){return te(_e)&&_e.length===s.BYTES},isValidPublicKey:function ht(_e,He){try{return!!n.fromBytes(_e,He)}catch{return!1}},toMontgomery(_e){const{y:He}=n.fromBytes(_e),Je=ne.publicKey,Ve=32===Je;if(!Ve&&57!==Je)throw new Error("only defined for 25519 and 448");const le=Ve?o.div(sn+He,sn-He):o.div(He-sn,He+sn);return o.toBytes(le)},toMontgomerySecret(_e){const He=ne.secretKey;pn(_e,He);const Je=e(_e.subarray(0,He));return l(Je).subarray(0,He)},randomPrivateKey:Te,precompute:(_e=8,He=n.BASE)=>He.precompute(_e,!1)};return Object.freeze({keygen:function je(_e){const He=tt.randomSecretKey(_e);return{secretKey:He,publicKey:B(He)}},getPublicKey:B,sign:function z(_e,He,Je={}){_e=vt("message",_e),r&&(_e=r(_e));const{prefix:Ve,scalar:le,pointBytes:re}=N(He),ie=P(Je.context,Ve,_e),Re=i.multiply(ie).toBytes(),Pe=P(Je.context,Re,re,_e),Ge=s.create(ie+Pe*le);if(!s.isValid(Ge))throw new Error("sign failed: invalid s");return pn(O(Re,s.toBytes(Ge)),ne.signature,"result")},verify:function K(_e,He,Je,Ve=V){const{context:le,zip215:re}=Ve,ie=ne.signature;_e=vt("signature",_e,ie),He=vt("message",He),Je=vt("publicKey",Je,ne.publicKey),void 0!==re&&On(re,"zip215"),r&&(He=r(He));const Re=ie/2,Pe=_e.subarray(0,Re),Ge=xn(_e.subarray(Re,ie));let Ke,$e,Ye;try{Ke=n.fromBytes(Je,re),$e=n.fromBytes(Pe,re),Ye=i.multiplyUnsafe(Ge)}catch{return!1}if(!re&&Ke.isSmallOrder())return!1;const nt=P(le,$e.toBytes(),Ke.toBytes(),He);return $e.add(Ke.multiplyUnsafe(nt)).subtract(Ye).clearCofactor().is0()},utils:tt,Point:n,lengths:ne})}(o,r,i))}(jc);var ru=ge(917),ms=ge.n(ru),iu=ge(7238),un=ge.n(iu);const ys=Ut;var Gi=ge(2476),C=ge(7680);function qs(n){return Array.isArray(n)?"%5B"+n.map(qs).join("%2C%20")+"%5D":"bigint"==typeof n?`${n}n`:encodeURIComponent(String(null!=n&&null===Object.getPrototypeOf(n)?{...n}:n))}function $d([n,e]){return`${n}=${qs(e)}`}var Pn=class extends Error{cause=this.cause;context;constructor(...[n,e]){let t,r;if(e){const{cause:o,...s}=e;o&&(r={cause:o}),Object.keys(s).length>0&&(t=s)}super(function Wd(n,e={}){{let t=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(e).length&&(t+=` '${function Hd(n){const e=Object.entries(n).map($d).join("&");return btoa(e)}(e)}'`),`${t}\``}}(n,t),r),this.context={__code:n,...t},this.name="SolanaError"}};function Qt(n){return"fixedSize"in n&&"number"==typeof n.fixedSize}function ia(n){return 1!==n?.endian}function Sn(n){return function kn(n){return Object.freeze({...n,encode:e=>{const t=new Uint8Array(function oi(n,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(n)}(e,n));return n.write(e,t,0),t}})}({fixedSize:n.size,write(e,t,r){n.range&&function ra(n,e,t,r){if(r<e||r>t)throw new Pn(8078011,{codecDescription:n,max:t,min:e,value:r})}(n.name,n.range[0],n.range[1],e);const i=new ArrayBuffer(n.size);return n.set(new DataView(i),e,ia(n.config)),t.set(new Uint8Array(i),r),r+n.size}})}function An(n){return function Un(n){return Object.freeze({...n,decode:(e,t=0)=>n.read(e,t)[0]})}({fixedSize:n.size,read(e,t=0){(function nh(n,e,t=0){if(e.length-t<=0)throw new Pn(8078e3,{codecDescription:n})})(n.name,e,t),function ji(n,e,t,r=0){const i=t.length-r;if(i<e)throw new Pn(8078001,{bytesLength:i,codecDescription:n,expected:e})}(n.name,n.size,e,t);const r=new DataView(function _h(n,e,t){const r=n.byteOffset+(e??0);return n.buffer.slice(r,r+(t??n.byteLength))}(e,t,n.size));return[n.get(r,ia(n.config)),t+n.size]}})}var oa=(n={})=>Sn({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}),zh=(n={})=>function Yn(n,e){if(Qt(n)!==Qt(e))throw new Pn(8078004);if(Qt(n)&&Qt(e)&&n.fixedSize!==e.fixedSize)throw new Pn(8078005,{decoderFixedSize:e.fixedSize,encoderFixedSize:n.fixedSize});if(!Qt(n)&&!Qt(e)&&n.maxSize!==e.maxSize)throw new Pn(8078006,{decoderMaxSize:e.maxSize,encoderMaxSize:n.maxSize});return{...e,...n,decode:e.decode,encode:n.encode,read:e.read,write:n.write}}(oa(n),((n={})=>An({config:n,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}))(n));class Hh extends TypeError{constructor(e,t){let r;const{message:i,explanation:o,...s}=e,{path:u}=e,l=0===u.length?i:`At path: ${u.join(".")} -- ${i}`;super(o??l),null!=o&&(this.cause=l),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function Ar(n){return"object"==typeof n&&null!=n}function vr(n){return Ar(n)&&!Array.isArray(n)}function rn(n){return"symbol"==typeof n?n.toString():"string"==typeof n?JSON.stringify(n):`${n}`}function Gh(n,e,t,r){if(!0===n)return;!1===n?n={}:"string"==typeof n&&(n={message:n});const{path:i,branch:o}=e,{type:s}=t,{refinement:u,message:l=`Expected a value of type \`${s}\`${u?` with refinement \`${u}\``:""}, but received: \`${rn(r)}\``}=n;return{value:r,type:s,refinement:u,key:i[i.length-1],path:i,branch:o,...n,message:l}}function*Qi(n,e,t,r){(function Vh(n){return Ar(n)&&"function"==typeof n[Symbol.iterator]})(n)||(n=[n]);for(const i of n){const o=Gh(i,e,t,r);o&&(yield o)}}function*eo(n,e,t={}){const{path:r=[],branch:i=[n],coerce:o=!1,mask:s=!1}=t,u={path:r,branch:i,mask:s};o&&(n=e.coercer(n,u));let l="valid";for(const b of e.validator(n,u))b.explanation=t.message,l="not_valid",yield[b,void 0];for(let[b,x,M]of e.entries(n,u)){const N=eo(x,M,{path:void 0===b?r:[...r,b],branch:void 0===b?i:[...i,x],coerce:o,mask:s,message:t.message});for(const B of N)B[0]?(l=null!=B[0].refinement?"not_refined":"not_valid",yield[B[0],void 0]):o&&(x=B[1],void 0===b?n=x:n instanceof Map?n.set(b,x):n instanceof Set?n.add(x):Ar(n)&&(void 0!==x||b in n)&&(n[b]=x))}if("not_valid"!==l)for(const b of e.refiner(n,u))b.explanation=t.message,l="not_refined",yield[b,void 0];"valid"===l&&(yield[void 0,n])}class nn{constructor(e){const{type:t,schema:r,validator:i,refiner:o,coercer:s=l=>l,entries:u=function*(){}}=e;this.type=t,this.schema=r,this.entries=u,this.coercer=s,this.validator=i?(l,b)=>Qi(i(l,b),b,this,l):()=>[],this.refiner=o?(l,b)=>Qi(o(l,b),b,this,l):()=>[]}assert(e,t){return aa(e,this,t)}create(e,t){return Ie(e,this,t)}is(e){return ca(e,this)}mask(e,t){return function qh(n,e,t){const r=$r(n,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}(e,this,t)}validate(e,t={}){return $r(e,this,t)}}function aa(n,e,t){const r=$r(n,e,{message:t});if(r[0])throw r[0]}function Ie(n,e,t){const r=$r(n,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function ca(n,e){return!$r(n,e)[0]}function $r(n,e,t={}){const r=eo(n,e,t),i=function Wh(n){const{done:e,value:t}=n.next();return e?void 0:t}(r);return i[0]?[new Hh(i[0],function*(){for(const s of r)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function En(n,e){return new nn({type:n,schema:null,validator:e})}function xe(n){return new nn({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${rn(e)}`})}function Dn(){return En("boolean",n=>"boolean"==typeof n)}function to(n){return En("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${rn(e)}`)}function Dt(n){const e=rn(n),t=typeof n;return new nn({type:"literal",schema:"string"===t||"number"===t||"boolean"===t?n:null,validator:r=>r===n||`Expected the literal \`${e}\`, but received: ${rn(r)}`})}function ke(n){return new nn({...n,validator:(e,t)=>null===e||n.validator(e,t),refiner:(e,t)=>null===e||n.refiner(e,t)})}function H(){return En("number",n=>"number"==typeof n&&!isNaN(n)||`Expected a number, but received: ${rn(n)}`)}function We(n){return new nn({...n,validator:(e,t)=>void 0===e||n.validator(e,t),refiner:(e,t)=>void 0===e||n.refiner(e,t)})}function la(n,e){return new nn({type:"record",schema:null,*entries(t){if(Ar(t))for(const r in t){const i=t[r];yield[r,r,n],yield[r,i,e]}},validator:t=>vr(t)||`Expected an object, but received: ${rn(t)}`,coercer:t=>vr(t)?{...t}:t})}function we(){return En("string",n=>"string"==typeof n||`Expected a string, but received: ${rn(n)}`)}function no(n){const e=function ua(){return En("never",()=>!1)}();return new nn({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(n.length,t.length);for(let i=0;i<r;i++)yield[i,t[i],n[i]||e]}},validator:t=>Array.isArray(t)||`Expected an array, but received: ${rn(t)}`,coercer:t=>Array.isArray(t)?t.slice():t})}function pe(n){const e=Object.keys(n);return new nn({type:"type",schema:n,*entries(t){if(Ar(t))for(const r of e)yield[r,t[r],n[r]]},validator:t=>vr(t)||`Expected an object, but received: ${rn(t)}`,coercer:t=>vr(t)?{...t}:t})}function mn(n){const e=n.map(t=>t.type).join(" | ");return new nn({type:"union",schema:null,coercer(t,r){for(const i of n){const[o,s]=i.validate(t,{coerce:!0,mask:r.mask});if(!o)return s}return t},validator(t,r){const i=[];for(const o of n){const[...s]=eo(t,o,r),[u]=s;if(!u[0])return[];for(const[l]of s)l&&i.push(l)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${rn(t)}`,...i]}})}function fr(){return En("unknown",()=>!0)}function dr(n,e,t){return new nn({...n,coercer:(r,i)=>ca(r,e)?n.coercer(t(r,i),i):n.coercer(r,i)})}var Yh=ge(5749),Xh=ge.n(Yh),da=ge(1254),Zh=class extends da{socket;constructor(n,e,t){super(),this.socket=new window.WebSocket(n,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(n,e,t){const r=t||e;try{this.socket.send(n),r()}catch(i){r(i)}}close(n,e){this.socket.close(n,e)}addEventListener(n,e,t){this.socket.addEventListener(n,e,t)}};var Jh=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},pa=class extends da{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:r=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...s}={},u,l){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=s,this.current_reconnects=0,this.generate_request_id=u||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),this.dataPack=l||new Jh,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,e,t,r){return!r&&"object"==typeof t&&(r=t,t=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const s=this.generate_request_id(n,e);this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:n,params:e||void 0,id:s}),r,l=>{if(l)return o(l);this.queue[s]={promise:[i,o]},t&&(this.queue[s].timeout=setTimeout(()=>{delete this.queue[s],o(new Error("reply timeout"))},t))})})}login(n){var e=this;return(0,w.A)(function*(){const t=yield e.call("rpc.login",n);if(!t)throw new Error("authentication failed");return t})()}listMethods(){var n=this;return(0,w.A)(function*(){return yield n.call("__listMethods")})()}notify(n,e){return new Promise((t,r)=>{if(!this.ready)return r(new Error("socket not ready"));this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:n,params:e}),o=>{if(o)return r(o);t()})})}subscribe(n){var e=this;return(0,w.A)(function*(){"string"==typeof n&&(n=[n]);const t=yield e.call("rpc.on",n);if("string"==typeof n&&"ok"!==t[n])throw new Error("Failed subscribing to an event '"+n+"' with: "+t[n]);return t})()}unsubscribe(n){var e=this;return(0,w.A)(function*(){"string"==typeof n&&(n=[n]);const t=yield e.call("rpc.off",n);if("string"==typeof n&&"ok"!==t[n])throw new Error("Failed unsubscribing from an event with: "+t);return t})()}close(n,e){this.socket&&this.socket.close(n||1e3,e)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return void 0!==this.reconnect_timer_id}willReconnect(){return this.reconnect&&(0===this.max_reconnects||this.current_reconnects<this.max_reconnects)}_connect(n,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=ce.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const r=[t.notification];if(t.params.constructor===Object)r.push(t.params);else for(let i=0;i<t.params.length;i++)r.push(t.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",t,r),0),this.ready=!1,this.socket=void 0,1e3!==t&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)?this.reconnect_timer_id=setTimeout(()=>this._connect(n,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",t,r),1))})}};const Qh=BigInt(0),Hr=BigInt(1),e0=BigInt(2),t0=BigInt(7),n0=BigInt(256),r0=BigInt(113),ga=[],_a=[],ma=[];for(let n=0,e=Hr,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],ga.push(2*(5*r+t)),_a.push((n+1)*(n+2)/2%64);let i=Qh;for(let o=0;o<7;o++)e=(e<<Hr^(e>>t0)*r0)%n0,e&e0&&(i^=Hr<<(Hr<<BigInt(o))-Hr);ma.push(i)}const ya=fn(ma,!0),i0=ya[0],o0=ya[1],ba=(n,e,t)=>t>32?((n,e,t)=>e<<t-32|n>>>64-t)(n,e,t):((n,e,t)=>n<<t|e>>>32-t)(n,e,t),wa=(n,e,t)=>t>32?((n,e,t)=>n<<t-32|e>>>64-t)(n,e,t):((n,e,t)=>e<<t|n>>>32-t)(n,e,t);class ui extends F{constructor(e,t,r,i=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=o,R(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=function Ce(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}(this.state)}clone(){return this._cloneInto()}keccak(){he(this.state32),function s0(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let s=0;s<10;s++)t[s]=n[s]^n[s+10]^n[s+20]^n[s+30]^n[s+40];for(let s=0;s<10;s+=2){const u=(s+8)%10,l=(s+2)%10,b=t[l],x=t[l+1],M=ba(b,x,1)^t[u],N=wa(b,x,1)^t[u+1];for(let B=0;B<50;B+=10)n[s+B]^=M,n[s+B+1]^=N}let i=n[2],o=n[3];for(let s=0;s<24;s++){const u=_a[s],l=ba(i,o,u),b=wa(i,o,u),x=ga[s];i=n[x],o=n[x+1],n[x]=l,n[x+1]=b}for(let s=0;s<50;s+=10){for(let u=0;u<10;u++)t[u]=n[s+u];for(let u=0;u<10;u++)n[s+u]^=~t[(u+2)%10]&t[(u+4)%10]}n[0]^=i0[r],n[1]^=o0[r]}Oe(t)}(this.state32,this.rounds),he(this.state32),this.posOut=0,this.pos=0}update(e){fe(this),j(e=y(e));const{blockLen:t,state:r}=this,i=e.length;for(let o=0;o<i;){const s=Math.min(t-this.pos,i-o);for(let u=0;u<s;u++)r[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,!!(128&t)&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){fe(this,!1),j(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,o=e.length;i<o;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,o-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return R(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(p(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Oe(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:o,enableXOF:s}=this;return e||(e=new ui(t,r,i,s,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}const Ea=I(()=>new ui(136,1,32));class Ra extends F{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,T(e);const r=y(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),Oe(o)}update(e){return fe(this),this.iHash.update(e),this}digestInto(e){fe(this),j(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:u}=this;return e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Sa=(n,e,t)=>new Ra(n,e).update(t).digest();Sa.create=(n,e)=>new Ra(n,e);const Aa=(n,e)=>(n+(n>=0?e:-e)/Fn)/e;function ro(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function io(n,e){const t={};for(let r of Object.keys(e))t[r]=void 0===n[r]?e[r]:n[r];return On(t.lowS,"lowS"),On(t.prehash,"prehash"),void 0!==t.format&&ro(t.format),t}class u0 extends Error{constructor(e=""){super(e)}}const Xn={Err:u0,_tlv:{encode:(n,e)=>{const{Err:t}=Xn;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(1&e.length)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=Gn(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const o=r>127?Gn(i.length/2|128):"";return Gn(n)+o+i+e},decode(n,e){const{Err:t}=Xn;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++];let s=0;if(128&i){const l=127&i;if(!l)throw new t("tlv.decode(long): indefinite length not supported");if(l>4)throw new t("tlv.decode(long): byte length is too big");const b=e.subarray(r,r+l);if(b.length!==l)throw new t("tlv.decode: length bytes not complete");if(0===b[0])throw new t("tlv.decode(long): zero leftmost byte");for(const x of b)s=s<<8|x;if(r+=l,s<128)throw new t("tlv.decode(long): not minimal encoding")}else s=i;const u=e.subarray(r,r+s);if(u.length!==s)throw new t("tlv.decode: wrong value length");return{v:u,l:e.subarray(r+s)}}},_int:{encode(n){const{Err:e}=Xn;if(n<Tn)throw new e("integer: negative integers are not allowed");let t=Gn(n);if(8&Number.parseInt(t[0],16)&&(t="00"+t),1&t.length)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=Xn;if(128&n[0])throw new e("invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new e("invalid signature integer: unnecessary leading zero");return Qn(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=Xn,i=vt("signature",n),{v:o,l:s}=r.decode(48,i);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:u,l}=r.decode(2,o),{v:b,l:x}=r.decode(2,l);if(x.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(u),s:t.decode(b)}},hexFromSig(n){const{_tlv:e,_int:t}=Xn,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s));return e.encode(48,r+i)}},Tn=BigInt(0),ln=BigInt(1),Fn=BigInt(2),Or=BigInt(3),oo=BigInt(4);function hr(n,e){const{BYTES:t}=n;let r;if("bigint"==typeof e)r=e;else{let i=vt("private key",e);try{r=n.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Ia(n){return Uint8Array.of(n?2:3)}function Oa(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function d0(n,e,t={}){T(e),Fr(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||L,i=t.hmac||((re,...ie)=>Sa(e,re,O(...ie))),{Fp:o,Fn:s}=n,{ORDER:u,BITS:l}=s,{keygen:b,getPublicKey:x,getSharedSecret:M,utils:N,lengths:B}=function f0(n,e={}){const{Fn:t}=n,r=e.randomBytes||L,i=Object.assign(Oa(n.Fp,t),{seed:Jo(t.ORDER)});function o(B){try{return!!hr(t,B)}catch{return!1}}function u(B=r(i.seed)){return function Cc(n,e,t=!1){const r=n.length,i=Zo(e),o=Jo(e);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const u=Jt(t?xn(n):Qn(n),e-tn)+tn;return t?wr(u,i):ir(u,i)}(pn(B,i.seed,"seed"),t.ORDER)}function l(B,P=!0){return n.BASE.multiply(hr(t,B)).toBytes(P)}function x(B){if("bigint"==typeof B)return!1;if(B instanceof n)return!0;const{secretKey:P,publicKey:z,publicKeyUncompressed:V}=i;if(t.allowedLengths||P===z)return;const K=vt("key",B).length;return K===z||K===V}return Object.freeze({getPublicKey:l,getSharedSecret:function M(B,P,z=!0){if(!0===x(B))throw new Error("first arg must be private key");if(!1===x(P))throw new Error("second arg must be public key");const V=hr(t,B);return n.fromHex(P).multiply(V).toBytes(z)},keygen:function b(B){const P=u(B);return{secretKey:P,publicKey:l(P)}},Point:n,utils:{isValidSecretKey:o,isValidPublicKey:function s(B,P){const{publicKey:z,publicKeyUncompressed:V}=i;try{const K=B.length;return!(!0===P&&K!==z||!1===P&&K!==V||!n.fromBytes(B))}catch{return!1}},randomSecretKey:u,isValidPrivateKey:o,randomPrivateKey:u,normPrivateKeyToScalar:B=>hr(t,B),precompute:(B=8,P=n.BASE)=>P.precompute(B,!1)},lengths:i})}(n,t),P={prehash:!1,lowS:"boolean"==typeof t.lowS&&t.lowS,format:void 0,extraEntropy:!1},z="compact";function V(re){return re>u>>ln}function K(re,ie){if(!s.isValidNot0(ie))throw new Error(`invalid signature ${re}: out of range 1..Point.Fn.ORDER`);return ie}class ne{constructor(ie,Re,Pe){this.r=K("r",ie),this.s=K("s",Re),null!=Pe&&(this.recovery=Pe),Object.freeze(this)}static fromBytes(ie,Re=z){let Pe;if(function oe(re,ie){ro(ie);const Re=B.signature;pn(re,"compact"===ie?Re:"recovered"===ie?Re+1:void 0,`${ie} signature`)}(ie,Re),"der"===Re){const{r:Ye,s:nt}=Xn.toSig(pn(ie));return new ne(Ye,nt)}"recovered"===Re&&(Pe=ie[0],Re="compact",ie=ie.subarray(1));const Ge=s.BYTES,Ke=ie.subarray(0,Ge),$e=ie.subarray(Ge,2*Ge);return new ne(s.fromBytes(Ke),s.fromBytes($e),Pe)}static fromHex(ie,Re){return this.fromBytes(Z(ie),Re)}addRecoveryBit(ie){return new ne(this.r,this.s,ie)}recoverPublicKey(ie){const Re=o.ORDER,{r:Pe,s:Ge,recovery:Ke}=this;if(null==Ke||![0,1,2,3].includes(Ke))throw new Error("recovery id invalid");if(u*Fn<Re&&Ke>1)throw new Error("recovery id is ambiguous for h>1 curve");const Ye=2===Ke||3===Ke?Pe+u:Pe;if(!o.isValid(Ye))throw new Error("recovery id 2 or 3 invalid");const nt=o.toBytes(Ye),Vt=n.fromBytes(O(Ia(!(1&Ke)),nt)),Tt=s.inv(Ye),_t=je(vt("msgHash",ie)),Wt=s.create(-_t*Tt),on=s.create(Ge*Tt),wn=n.BASE.multiplyUnsafe(Wt).add(Vt.multiplyUnsafe(on));if(wn.is0())throw new Error("point at infinify");return wn.assertValidity(),wn}hasHighS(){return V(this.s)}toBytes(ie=z){if(ro(ie),"der"===ie)return Z(Xn.hexFromSig(this));const Re=s.toBytes(this.r),Pe=s.toBytes(this.s);if("recovered"===ie){if(null==this.recovery)throw new Error("recovery bit must be present");return O(Uint8Array.of(this.recovery),Re,Pe)}return O(Re,Pe)}toHex(ie){return ze(this.toBytes(ie))}assertValidity(){}static fromCompact(ie){return ne.fromBytes(vt("sig",ie),"compact")}static fromDER(ie){return ne.fromBytes(vt("sig",ie),"der")}normalizeS(){return this.hasHighS()?new ne(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ze(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ze(this.toBytes("compact"))}}const Te=t.bits2int||function(ie){if(ie.length>8192)throw new Error("input is too large");const Re=Qn(ie),Pe=8*ie.length-l;return Pe>0?Re>>BigInt(Pe):Re},je=t.bits2int_modN||function(ie){return s.create(Te(ie))},ot=Dr(l);function ht(re){return sr("num < 2^"+l,re,Tn,ot),s.toBytes(re)}function tt(re,ie){return pn(re,void 0,"message"),ie?pn(e(re),void 0,"prehashed message"):re}return Object.freeze({keygen:b,getPublicKey:x,getSharedSecret:M,utils:N,lengths:B,Point:n,sign:function He(re,ie,Re={}){re=vt("message",re);const{seed:Pe,k2sig:Ge}=function _e(re,ie,Re){if(["recovered","canonical"].some(Wt=>Wt in Re))throw new Error("sign() legacy options not supported");const{lowS:Pe,prehash:Ge,extraEntropy:Ke}=io(Re,P);re=tt(re,Ge);const $e=je(re),Ye=hr(s,ie),nt=[ht(Ye),ht($e)];if(null!=Ke&&!1!==Ke){const Wt=!0===Ke?r(B.secretKey):Ke;nt.push(vt("extraEntropy",Wt))}const Vt=O(...nt),Tt=$e;return{seed:Vt,k2sig:function _t(Wt){const on=Te(Wt);if(!s.isValidNot0(on))return;const wn=s.inv(on),Gt=n.BASE.multiply(on).toAffine(),dn=s.create(Gt.x);if(dn===Tn)return;const Si=s.create(wn*s.create(Tt+dn*Ye));if(Si===Tn)return;let Ec=(Gt.x===dn?0:2)|Number(Gt.y&ln),Rc=Si;return Pe&&V(Si)&&(Rc=s.neg(Si),Ec^=1),new ne(dn,Rc,Ec)}}}(re,ie,Re);return function Sc(n,e,t){if("number"!=typeof n||n<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof t)throw new Error("hmacFn must be a function");const r=B=>new Uint8Array(B),i=B=>Uint8Array.of(B);let o=r(n),s=r(n),u=0;const l=()=>{o.fill(1),s.fill(0),u=0},b=(...B)=>t(s,o,...B),x=(B=r(0))=>{s=b(i(0),B),o=b(),0!==B.length&&(s=b(i(1),B),o=b())},M=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let B=0;const P=[];for(;B<e;){o=b();const z=o.slice();P.push(z),B+=o.length}return O(...P)};return(B,P)=>{let z;for(l(),x(B);!(z=P(M()));)x();return l(),z}}(e.outputLen,s.BYTES,i)(Pe,Ge)},verify:function Ve(re,ie,Re,Pe={}){const{lowS:Ge,prehash:Ke,format:$e}=io(Pe,P);if(Re=vt("publicKey",Re),ie=tt(vt("message",ie),Ke),"strict"in Pe)throw new Error("options.strict was renamed to lowS");const Ye=void 0===$e?function Je(re){let ie;const Re="string"==typeof re||te(re),Pe=!Re&&null!==re&&"object"==typeof re&&"bigint"==typeof re.r&&"bigint"==typeof re.s;if(!Re&&!Pe)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(Pe)ie=new ne(re.r,re.s);else if(Re){try{ie=ne.fromBytes(vt("sig",re),"der")}catch(Ge){if(!(Ge instanceof Xn.Err))throw Ge}if(!ie)try{ie=ne.fromBytes(vt("sig",re),"compact")}catch{return!1}}return ie||!1}(re):ne.fromBytes(vt("sig",re),$e);if(!1===Ye)return!1;try{const nt=n.fromBytes(Re);if(Ge&&Ye.hasHighS())return!1;const{r:Vt,s:Tt}=Ye,_t=je(ie),Wt=s.inv(Tt),on=s.create(_t*Wt),wn=s.create(Vt*Wt),Gt=n.BASE.multiplyUnsafe(on).add(nt.multiplyUnsafe(wn));return!Gt.is0()&&s.create(Gt.x)===Vt}catch{return!1}},recoverPublicKey:function le(re,ie,Re={}){const{prehash:Pe}=io(Re,P);return ie=tt(ie,Pe),ne.fromBytes(re,"recovered").recoverPublicKey(ie).toBytes()},Signature:ne,hash:e})}function m0(n){const{CURVE:e,curveOpts:t,hash:r,ecdsaOpts:i}=function h0(n){const{CURVE:e,curveOpts:t}=function xa(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0;return{CURVE:e,curveOpts:{Fp:t,Fn:qn(e.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes}}}(n);return{CURVE:e,curveOpts:t,hash:n.hash,ecdsaOpts:{hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN}}}(n);return function _0(n,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},n,Ci(t.Fn.ORDER,t.Fn.BITS))})}(n,d0(function va(n,e={}){const t=ss("weierstrass",n,e),{Fp:r,Fn:i}=t;let o=t.CURVE;const{h:s,n:u}=o;Fr(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=e;if(l&&(!r.is0(o.a)||"bigint"!=typeof l.beta||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const b=Oa(r,i);function x(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}const B=e.toBytes||function M(Ve,le,re){const{x:ie,y:Re}=le.toAffine(),Pe=r.toBytes(ie);return On(re,"isCompressed"),re?(x(),O(Ia(!r.isOdd(Re)),Pe)):O(Uint8Array.of(4),Pe,r.toBytes(Re))},P=e.fromBytes||function N(Ve){pn(Ve,void 0,"Point");const{publicKey:le,publicKeyUncompressed:re}=b,ie=Ve.length,Re=Ve[0],Pe=Ve.subarray(1);if(ie!==le||2!==Re&&3!==Re){if(ie===re&&4===Re){const Ge=r.BYTES,Ke=r.fromBytes(Pe.subarray(0,Ge)),$e=r.fromBytes(Pe.subarray(Ge,2*Ge));if(!V(Ke,$e))throw new Error("bad point: is not on curve");return{x:Ke,y:$e}}throw new Error(`bad point: got length ${ie}, expected compressed=${le} or uncompressed=${re}`)}{const Ge=r.fromBytes(Pe);if(!r.isValid(Ge))throw new Error("bad point: is not on curve, wrong x");const Ke=z(Ge);let $e;try{$e=r.sqrt(Ke)}catch(Vt){const Tt=Vt instanceof Error?": "+Vt.message:"";throw new Error("bad point: is not on curve, sqrt error"+Tt)}return x(),!(1&~Re)!==r.isOdd($e)&&($e=r.neg($e)),{x:Ge,y:$e}}};function z(Ve){const le=r.sqr(Ve),re=r.mul(le,Ve);return r.add(r.add(re,r.mul(Ve,o.a)),o.b)}function V(Ve,le){const re=r.sqr(le),ie=z(Ve);return r.eql(re,ie)}if(!V(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const K=r.mul(r.pow(o.a,Or),oo),oe=r.mul(r.sqr(o.b),BigInt(27));if(r.is0(r.add(K,oe)))throw new Error("bad curve params: a or b");function ne(Ve,le,re=!1){if(!r.isValid(le)||re&&r.is0(le))throw new Error(`bad point coordinate ${Ve}`);return le}function Te(Ve){if(!(Ve instanceof _e))throw new Error("ProjectivePoint expected")}function je(Ve){if(!l||!l.basises)throw new Error("no endo");return function c0(n,e,t){const[[r,i],[o,s]]=e,u=Aa(s*n,t),l=Aa(-i*n,t);let b=n-u*r-l*o,x=-u*i-l*s;const M=b<Tn,N=x<Tn;M&&(b=-b),N&&(x=-x);const B=Dr(Math.ceil(Rr(t)/2))+ln;if(b<Tn||b>=B||x<Tn||x>=B)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:M,k1:b,k2neg:N,k2:x}}(Ve,l.basises,i.ORDER)}const ot=ri((Ve,le)=>{const{X:re,Y:ie,Z:Re}=Ve;if(r.eql(Re,r.ONE))return{x:re,y:ie};const Pe=Ve.is0();null==le&&(le=Pe?r.ONE:r.inv(Re));const Ge=r.mul(re,le),Ke=r.mul(ie,le),$e=r.mul(Re,le);if(Pe)return{x:r.ZERO,y:r.ZERO};if(!r.eql($e,r.ONE))throw new Error("invZ was invalid");return{x:Ge,y:Ke}}),ht=ri(Ve=>{if(Ve.is0()){if(e.allowInfinityPoint&&!r.is0(Ve.Y))return;throw new Error("bad point: ZERO")}const{x:le,y:re}=Ve.toAffine();if(!r.isValid(le)||!r.isValid(re))throw new Error("bad point: x or y not field elements");if(!V(le,re))throw new Error("bad point: equation left != right");if(!Ve.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function tt(Ve,le,re,ie,Re){return re=new _e(r.mul(re.X,Ve),re.Y,re.Z),le=ii(ie,le),re=ii(Re,re),le.add(re)}class _e{constructor(le,re,ie){this.X=ne("x",le),this.Y=ne("y",re,!0),this.Z=ne("z",ie),Object.freeze(this)}static CURVE(){return o}static fromAffine(le){const{x:re,y:ie}=le||{};if(!le||!r.isValid(re)||!r.isValid(ie))throw new Error("invalid affine point");if(le instanceof _e)throw new Error("projective point not allowed");return r.is0(re)&&r.is0(ie)?_e.ZERO:new _e(re,ie,r.ONE)}static fromBytes(le){const re=_e.fromAffine(P(pn(le,void 0,"point")));return re.assertValidity(),re}static fromHex(le){return _e.fromBytes(vt("pointHex",le))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(le=8,re=!0){return Je.createCache(this,le),re||this.multiply(Or),this}assertValidity(){ht(this)}hasEvenY(){const{y:le}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(le)}equals(le){Te(le);const{X:re,Y:ie,Z:Re}=this,{X:Pe,Y:Ge,Z:Ke}=le,$e=r.eql(r.mul(re,Ke),r.mul(Pe,Re)),Ye=r.eql(r.mul(ie,Ke),r.mul(Ge,Re));return $e&&Ye}negate(){return new _e(this.X,r.neg(this.Y),this.Z)}double(){const{a:le,b:re}=o,ie=r.mul(re,Or),{X:Re,Y:Pe,Z:Ge}=this;let Ke=r.ZERO,$e=r.ZERO,Ye=r.ZERO,nt=r.mul(Re,Re),Vt=r.mul(Pe,Pe),Tt=r.mul(Ge,Ge),_t=r.mul(Re,Pe);return _t=r.add(_t,_t),Ye=r.mul(Re,Ge),Ye=r.add(Ye,Ye),Ke=r.mul(le,Ye),$e=r.mul(ie,Tt),$e=r.add(Ke,$e),Ke=r.sub(Vt,$e),$e=r.add(Vt,$e),$e=r.mul(Ke,$e),Ke=r.mul(_t,Ke),Ye=r.mul(ie,Ye),Tt=r.mul(le,Tt),_t=r.sub(nt,Tt),_t=r.mul(le,_t),_t=r.add(_t,Ye),Ye=r.add(nt,nt),nt=r.add(Ye,nt),nt=r.add(nt,Tt),nt=r.mul(nt,_t),$e=r.add($e,nt),Tt=r.mul(Pe,Ge),Tt=r.add(Tt,Tt),nt=r.mul(Tt,_t),Ke=r.sub(Ke,nt),Ye=r.mul(Tt,Vt),Ye=r.add(Ye,Ye),Ye=r.add(Ye,Ye),new _e(Ke,$e,Ye)}add(le){Te(le);const{X:re,Y:ie,Z:Re}=this,{X:Pe,Y:Ge,Z:Ke}=le;let $e=r.ZERO,Ye=r.ZERO,nt=r.ZERO;const Vt=o.a,Tt=r.mul(o.b,Or);let _t=r.mul(re,Pe),Wt=r.mul(ie,Ge),on=r.mul(Re,Ke),wn=r.add(re,ie),Gt=r.add(Pe,Ge);wn=r.mul(wn,Gt),Gt=r.add(_t,Wt),wn=r.sub(wn,Gt),Gt=r.add(re,Re);let dn=r.add(Pe,Ke);return Gt=r.mul(Gt,dn),dn=r.add(_t,on),Gt=r.sub(Gt,dn),dn=r.add(ie,Re),$e=r.add(Ge,Ke),dn=r.mul(dn,$e),$e=r.add(Wt,on),dn=r.sub(dn,$e),nt=r.mul(Vt,Gt),$e=r.mul(Tt,on),nt=r.add($e,nt),$e=r.sub(Wt,nt),nt=r.add(Wt,nt),Ye=r.mul($e,nt),Wt=r.add(_t,_t),Wt=r.add(Wt,_t),on=r.mul(Vt,on),Gt=r.mul(Tt,Gt),Wt=r.add(Wt,on),on=r.sub(_t,on),on=r.mul(Vt,on),Gt=r.add(Gt,on),_t=r.mul(Wt,Gt),Ye=r.add(Ye,_t),_t=r.mul(dn,Gt),$e=r.mul(wn,$e),$e=r.sub($e,_t),_t=r.mul(wn,Wt),nt=r.mul(dn,nt),nt=r.add(nt,_t),new _e($e,Ye,nt)}subtract(le){return this.add(le.negate())}is0(){return this.equals(_e.ZERO)}multiply(le){const{endo:re}=e;if(!i.isValidNot0(le))throw new Error("invalid scalar: out of range");let ie,Re;const Pe=Ge=>Je.cached(this,Ge,Ke=>ur(_e,Ke));if(re){const{k1neg:Ge,k1:Ke,k2neg:$e,k2:Ye}=je(le),{p:nt,f:Vt}=Pe(Ke),{p:Tt,f:_t}=Pe(Ye);Re=Vt.add(_t),ie=tt(re.beta,nt,Tt,Ge,$e)}else{const{p:Ge,f:Ke}=Pe(le);ie=Ge,Re=Ke}return ur(_e,[ie,Re])[0]}multiplyUnsafe(le){const{endo:re}=e,ie=this;if(!i.isValid(le))throw new Error("invalid scalar: out of range");if(le===Tn||ie.is0())return _e.ZERO;if(le===ln)return ie;if(Je.hasCache(this))return this.multiply(le);if(re){const{k1neg:Re,k1:Pe,k2neg:Ge,k2:Ke}=je(le),{p1:$e,p2:Ye}=function Bc(n,e,t,r){let i=e,o=n.ZERO,s=n.ZERO;for(;t>Sr||r>Sr;)t&cr&&(o=o.add(i)),r&cr&&(s=s.add(i)),i=i.double(),t>>=cr,r>>=cr;return{p1:o,p2:s}}(_e,ie,Pe,Ke);return tt(re.beta,$e,Ye,Re,Ge)}return Je.unsafe(ie,le)}multiplyAndAddUnsafe(le,re,ie){const Re=this.multiplyUnsafe(re).add(le.multiplyUnsafe(ie));return Re.is0()?void 0:Re}toAffine(le){return ot(this,le)}isTorsionFree(){const{isTorsionFree:le}=e;return s===ln||(le?le(_e,this):Je.unsafe(this,u).is0())}clearCofactor(){const{clearCofactor:le}=e;return s===ln?this:le?le(_e,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(le=!0){return On(le,"isCompressed"),this.assertValidity(),B(_e,this,le)}toHex(le=!0){return ze(this.toBytes(le))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(le=!0){return this.toBytes(le)}_setWindowSize(le){this.precompute(le)}static normalizeZ(le){return ur(_e,le)}static msm(le,re){return Ui(_e,i,le,re)}static fromPrivateKey(le){return _e.BASE.multiply(hr(i,le))}}_e.BASE=new _e(o.Gx,o.Gy,r.ONE),_e.ZERO=new _e(r.ZERO,r.ONE,r.ZERO),_e.Fp=r,_e.Fn=i;const He=i.BITS,Je=new is(_e,e.endo?Math.ceil(He/2):He);return _e.BASE.precompute(8),_e}(e,t),r,i))}const Vr={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},b0={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},so=BigInt(2),li=qn(Vr.p,{sqrt:function E0(n){const e=Vr.p,t=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),u=BigInt(44),l=BigInt(88),b=n*n*n%e,x=b*b*n%e,M=Ht(x,t,e)*x%e,N=Ht(M,t,e)*x%e,B=Ht(N,so,e)*b%e,P=Ht(B,i,e)*B%e,z=Ht(P,o,e)*P%e,V=Ht(z,u,e)*z%e,K=Ht(V,l,e)*V%e,oe=Ht(K,u,e)*z%e,ne=Ht(oe,t,e)*x%e,Te=Ht(ne,s,e)*P%e,je=Ht(Te,r,e)*b%e,ot=Ht(je,so,e);if(!li.eql(li.sqr(ot),n))throw new Error("Cannot find square root");return ot}}),ao=function y0(n,e){const t=r=>m0({...n,hash:r});return{...t(e),create:t}}({...Vr,Fp:li,lowS:!0,endo:b0},Ut),A0=_n.utils.randomPrivateKey,Ba=()=>{const n=_n.utils.randomPrivateKey(),e=fi(n),t=new Uint8Array(64);return t.set(n),t.set(e,32),{publicKey:e,secretKey:t}},fi=_n.getPublicKey;function La(n){try{return _n.ExtendedPoint.fromHex(n),!0}catch{return!1}}const fo=(n,e)=>_n.sign(n,e.slice(0,32)),v0=_n.verify,rt=n=>ce.Buffer.isBuffer(n)?n:n instanceof Uint8Array?ce.Buffer.from(n.buffer,n.byteOffset,n.byteLength):ce.Buffer.from(n);class ho{constructor(e){Object.assign(this,e)}encode(){return ce.Buffer.from((0,Gi.serialize)(qr,this))}static decode(e){return(0,Gi.deserialize)(qr,this,e)}static decodeUnchecked(e){return(0,Gi.deserializeUnchecked)(qr,this,e)}}class I0 extends ho{constructor(e){if(super(e),this.enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const qr=new Map,Pa=32,zn=32;let Ua=1;class Ae extends ho{constructor(e){if(super({}),this._bn=void 0,function O0(n){return void 0!==n._bn}(e))this._bn=e._bn;else{if("string"==typeof e){const t=un().decode(e);if(t.length!=zn)throw new Error("Invalid public key input");this._bn=new(ms())(t)}else this._bn=new(ms())(e);if(this._bn.byteLength()>zn)throw new Error("Invalid public key input")}}static unique(){const e=new Ae(Ua);return Ua+=1,new Ae(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return un().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ce.Buffer);if(e.length===zn)return e;const t=ce.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static createWithSeed(e,t,r){return(0,w.A)(function*(){const i=ce.Buffer.concat([e.toBuffer(),ce.Buffer.from(t),r.toBuffer()]),o=ys(i);return new Ae(o)})()}static createProgramAddressSync(e,t){let r=ce.Buffer.alloc(0);e.forEach(function(o){if(o.length>Pa)throw new TypeError("Max seed length exceeded");r=ce.Buffer.concat([r,rt(o)])}),r=ce.Buffer.concat([r,t.toBuffer(),ce.Buffer.from("ProgramDerivedAddress")]);const i=ys(r);if(La(i))throw new Error("Invalid seeds, address must fall off the curve");return new Ae(i)}static createProgramAddress(e,t){var r=this;return(0,w.A)(function*(){return r.createProgramAddressSync(e,t)})()}static findProgramAddressSync(e,t){let i,r=255;for(;0!=r;){try{const o=e.concat(ce.Buffer.from([r]));i=this.createProgramAddressSync(o,t)}catch(o){if(o instanceof TypeError)throw o;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static findProgramAddress(e,t){var r=this;return(0,w.A)(function*(){return r.findProgramAddressSync(e,t)})()}static isOnCurve(e){return La(new Ae(e).toBytes())}}Ae.default=new Ae("11111111111111111111111111111111"),qr.set(Ae,{kind:"struct",fields:[["_bn","u256"]]});class x0{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=rt(e);if(64!==e.length)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=rt(A0()),this._publicKey=rt(fi(this._secretKey))}get publicKey(){return new Ae(this._publicKey)}get secretKey(){return ce.Buffer.concat([this._secretKey,this._publicKey],64)}}const k0=new Ae("BPFLoader1111111111111111111111111111111111"),rr=1232,di=127,jr=64;class po extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(po.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class go extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(go.prototype,"name",{value:"TransactionExpiredTimeoutError"});class xr extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(xr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Yr{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((o,s)=>{r.set(o.toBase58(),s)});const i=o=>{const s=r.get(o.toBase58());if(void 0===s)throw new Error("Encountered an unknown instruction account key during compilation");return s};return e.map(o=>({programIdIndex:i(o.programId),accountKeyIndexes:o.keys.map(s=>i(s.pubkey)),data:o.data}))}}const ut=(n="publicKey")=>C.av(32,n),T0=(n="signature")=>C.av(64,n),pr=(n="string")=>{const e=C.w3([C.DH("length"),C.DH("lengthPadding"),C.av(C.cY(C.DH(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(o,s)=>t(o,s).chars.toString(),i.encode=(o,s,u)=>{const l={chars:ce.Buffer.from(o,"utf8")};return r(l,s,u)},i.alloc=o=>C.DH().span+C.DH().span+ce.Buffer.from(o,"utf8").length,i};function Da(n,e){const t=i=>{if(i.span>=0)return i.span;if("function"==typeof i.alloc)return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const o=e[i.property];if(Array.isArray(o))return o.length*t(i.elementLayout)}else if("fields"in i)return Da({layout:i},e[i.property]);return 0};let r=0;return n.layout.fields.forEach(i=>{r+=t(i)}),r}function yn(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(127&r)<<7*t,t+=1,!(128&r))break}return e}function Rn(n,e){let t=e;for(;;){let r=127&t;if(t>>=7,0==t){n.push(r);break}r|=128,n.push(r)}}function gt(n,e){if(!n)throw new Error(e||"Assertion failed")}class hi{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,i=s=>{const u=s.toBase58();let l=r.get(u);return void 0===l&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(u,l)),l},o=i(t);o.isSigner=!0,o.isWritable=!0;for(const s of e){i(s.programId).isInvoked=!0;for(const u of s.keys){const l=i(u.pubkey);l.isSigner||=u.isSigner,l.isWritable||=u.isWritable}}return new hi(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];gt(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),o=e.filter(([,l])=>!l.isSigner&&!l.isWritable),s={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:o.length};{gt(t.length>0,"Expected at least one writable signer key");const[l]=t[0];gt(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[s,[...t.map(([l])=>new Ae(l)),...r.map(([l])=>new Ae(l)),...i.map(([l])=>new Ae(l)),...o.map(([l])=>new Ae(l))]]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,s=>!s.isSigner&&!s.isInvoked&&s.isWritable),[i,o]=this.drainKeysFoundInLookupTable(e.state.addresses,s=>!s.isSigner&&!s.isInvoked&&!s.isWritable);if(0!==t.length||0!==i.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:r,readonly:o}]}drainKeysFoundInLookupTable(e,t){const r=new Array,i=new Array;for(const[o,s]of this.keyMetaMap.entries())if(t(s)){const u=new Ae(o),l=e.findIndex(b=>b.equals(u));l>=0&&(gt(l<256,"Max lookup table index exceeded"),r.push(l),i.push(u),this.keyMetaMap.delete(o))}return[r,i]}}const Fa="Reached end of buffer unexpectedly";function Kn(n){if(0===n.length)throw new Error(Fa);return n.shift()}function bn(n,...e){const[t]=e;if(2===e.length?t+(e[1]??0)>n.length:t>=n.length)throw new Error(Fa);return n.splice(...e)}class Nn{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Ae(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:un().decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Yr(this.staticAccountKeys)}static compile(e){const t=hi.compile(e.instructions,e.payerKey),[r,i]=t.getMessageComponents(),s=new Yr(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:un().encode(u.data)}));return new Nn({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:s})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;return e>=this.header.numRequiredSignatures?e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Rn(t,e);const r=this.instructions.map(M=>{const{accounts:N,programIdIndex:B}=M,P=Array.from(un().decode(M.data));let z=[];Rn(z,N.length);let V=[];return Rn(V,P.length),{programIdIndex:B,keyIndicesCount:ce.Buffer.from(z),keyIndices:N,dataLength:ce.Buffer.from(V),data:P}});let i=[];Rn(i,r.length);let o=ce.Buffer.alloc(rr);ce.Buffer.from(i).copy(o);let s=i.length;r.forEach(M=>{const B=C.w3([C.u8("programIdIndex"),C.av(M.keyIndicesCount.length,"keyIndicesCount"),C.O6(C.u8("keyIndex"),M.keyIndices.length,"keyIndices"),C.av(M.dataLength.length,"dataLength"),C.O6(C.u8("userdatum"),M.data.length,"data")]).encode(M,o,s);s+=B}),o=o.slice(0,s);const u=C.w3([C.av(1,"numRequiredSignatures"),C.av(1,"numReadonlySignedAccounts"),C.av(1,"numReadonlyUnsignedAccounts"),C.av(t.length,"keyCount"),C.O6(ut("key"),e,"keys"),ut("recentBlockhash")]),l={numRequiredSignatures:ce.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ce.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ce.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ce.Buffer.from(t),keys:this.accountKeys.map(M=>rt(M.toBytes())),recentBlockhash:un().decode(this.recentBlockhash)};let b=ce.Buffer.alloc(2048);const x=u.encode(l,b);return o.copy(b,x),b.slice(0,x+o.length)}static from(e){let t=[...e];const r=Kn(t);if(r!==(r&di))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Kn(t),o=Kn(t),s=yn(t);let u=[];for(let N=0;N<s;N++){const B=bn(t,0,zn);u.push(new Ae(ce.Buffer.from(B)))}const l=bn(t,0,zn),b=yn(t);let x=[];for(let N=0;N<b;N++){const B=Kn(t),z=bn(t,0,yn(t)),K=bn(t,0,yn(t)),oe=un().encode(ce.Buffer.from(K));x.push({programIdIndex:B,accounts:z,data:oe})}const M={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:un().encode(ce.Buffer.from(l)),accountKeys:u,instructions:x};return new Nn(M)}}class gr{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Yr(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;return e>=r?e-r<this.addressTableLookups.reduce((s,u)=>s+u.writableIndexes.length,0):e>=this.header.numRequiredSignatures?e-t<r-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(o=>o.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const o of r.writableIndexes){if(!(o<i.state.addresses.length))throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`);t.writable.push(i.state.addresses[o])}for(const o of r.readonlyIndexes){if(!(o<i.state.addresses.length))throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`);t.readonly.push(i.state.addresses[o])}}return t}static compile(e){const t=hi.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},o=e.addressLookupTableAccounts||[];for(const x of o){const M=t.extractTableLookup(x);if(void 0!==M){const[N,{writable:B,readonly:P}]=M;r.push(N),i.writable.push(...B),i.readonly.push(...P)}}const[s,u]=t.getMessageComponents(),b=new Yr(u,i).compileInstructions(e.instructions);return new gr({header:s,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:b,addressTableLookups:r})}serialize(){const e=Array();Rn(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();Rn(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),o=Array();Rn(o,this.addressTableLookups.length);const s=C.w3([C.u8("prefix"),C.w3([C.u8("numRequiredSignatures"),C.u8("numReadonlySignedAccounts"),C.u8("numReadonlyUnsignedAccounts")],"header"),C.av(e.length,"staticAccountKeysLength"),C.O6(ut(),this.staticAccountKeys.length,"staticAccountKeys"),ut("recentBlockhash"),C.av(r.length,"instructionsLength"),C.av(t.length,"serializedInstructions"),C.av(o.length,"addressTableLookupsLength"),C.av(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(rr),b=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(x=>x.toBytes()),recentBlockhash:un().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:i},u);return u.slice(0,b)}serializeInstructions(){let e=0;const t=new Uint8Array(rr);for(const r of this.compiledInstructions){const i=Array();Rn(i,r.accountKeyIndexes.length);const o=Array();Rn(o,r.data.length),e+=C.w3([C.u8("programIdIndex"),C.av(i.length,"encodedAccountKeyIndexesLength"),C.O6(C.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),C.av(o.length,"encodedDataLength"),C.av(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(rr);for(const r of this.addressTableLookups){const i=Array();Rn(i,r.writableIndexes.length);const o=Array();Rn(o,r.readonlyIndexes.length),e+=C.w3([ut("accountKey"),C.av(i.length,"encodedWritableIndexesLength"),C.O6(C.u8(),r.writableIndexes.length,"writableIndexes"),C.av(o.length,"encodedReadonlyIndexesLength"),C.O6(C.u8(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Kn(t),i=r&di;gt(r!==i,"Expected versioned message but received legacy message"),gt(0===i,`Expected versioned message with version 0 but found version ${i}`);const s={numRequiredSignatures:Kn(t),numReadonlySignedAccounts:Kn(t),numReadonlyUnsignedAccounts:Kn(t)},u=[],l=yn(t);for(let P=0;P<l;P++)u.push(new Ae(bn(t,0,zn)));const b=un().encode(bn(t,0,zn)),x=yn(t),M=[];for(let P=0;P<x;P++){const z=Kn(t),K=bn(t,0,yn(t)),oe=yn(t),ne=new Uint8Array(bn(t,0,oe));M.push({programIdIndex:z,accountKeyIndexes:K,data:ne})}const N=yn(t),B=[];for(let P=0;P<N;P++){const z=new Ae(bn(t,0,zn)),K=bn(t,0,yn(t)),ne=bn(t,0,yn(t));B.push({accountKey:z,writableIndexes:K,readonlyIndexes:ne})}return new gr({header:s,staticAccountKeys:u,recentBlockhash:b,compiledInstructions:M,addressTableLookups:B})}}const _o={deserializeMessageVersion(n){const e=n[0],t=e&di;return t===e?"legacy":t},deserialize:n=>{const e=_o.deserializeMessageVersion(n);if("legacy"===e)return Nn.from(n);if(0===e)return gr.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Zn=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const M0=ce.Buffer.alloc(jr).fill(0);class Ot{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ce.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class mt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):this.instructions.push("data"in t&&"programId"in t&&"keys"in t?t:new Ot(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let z=0;z<t.length;z++)if(void 0===t[z].programId)throw new Error(`Transaction instruction index ${z} has undefined program id`);const i=[],o=[];t.forEach(z=>{z.keys.forEach(K=>{o.push({...K})});const V=z.programId.toString();i.includes(V)||i.push(V)}),i.forEach(z=>{o.push({pubkey:new Ae(z),isSigner:!1,isWritable:!1})});const s=[];o.forEach(z=>{const V=z.pubkey.toString(),K=s.findIndex(oe=>oe.pubkey.toString()===V);K>-1?(s[K].isWritable=s[K].isWritable||z.isWritable,s[K].isSigner=s[K].isSigner||z.isSigner):s.push(z)}),s.sort(function(z,V){return z.isSigner!==V.isSigner?z.isSigner?-1:1:z.isWritable!==V.isWritable?z.isWritable?-1:1:z.pubkey.toBase58().localeCompare(V.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});const u=s.findIndex(z=>z.pubkey.equals(r));if(u>-1){const[z]=s.splice(u,1);z.isSigner=!0,z.isWritable=!0,s.unshift(z)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const z of this.signatures){const V=s.findIndex(K=>K.pubkey.equals(z.publicKey));if(!(V>-1))throw new Error(`unknown signer: ${z.publicKey.toString()}`);s[V].isSigner||(s[V].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let l=0,b=0,x=0;const M=[],N=[];s.forEach(({pubkey:z,isSigner:V,isWritable:K})=>{V?(M.push(z.toString()),l+=1,K||(b+=1)):(N.push(z.toString()),K||(x+=1))});const B=M.concat(N),P=t.map(z=>{const{data:V,programId:K}=z;return{programIdIndex:B.indexOf(K.toString()),accounts:z.keys.map(oe=>B.indexOf(oe.pubkey.toString())),data:un().encode(V)}});return P.forEach(z=>{gt(z.programIdIndex>=0),z.accounts.forEach(V=>gt(V>=0))}),new Nn({header:{numRequiredSignatures:l,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:x},accountKeys:B,recentBlockhash:e,instructions:P})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,o)=>t[o].equals(i.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}getEstimatedFee(e){var t=this;return(0,w.A)(function*(){return(yield e.getFeeForMessage(t.compileMessage())).value})()}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const i=r.toString();return!t.has(i)&&(t.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const o of e){const s=o.publicKey.toString();t.has(s)||(t.add(s),r.push(o))}this.signatures=r.map(o=>({signature:null,publicKey:o.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const o of e){const s=o.publicKey.toString();t.has(s)||(t.add(s),r.push(o))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(i=>{const o=fo(r,i.secretKey);this._addSignature(i.publicKey,rt(o))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){gt(64===t.length);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=ce.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:i,publicKey:o}of this.signatures)null===i?t&&(r.missing||=[]).push(o):v0(i,e,o.toBytes())||(r.invalid||=[]).push(o);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const o=this._getMessageSignednessErrors(i,t);if(o){let s="Signature verification failed.";throw o.invalid&&(s+=`\nInvalid signature for public key${1===o.invalid.length?"":"(s)"} [\`${o.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),o.missing&&(s+=`\nMissing signature for public key${1===o.missing.length?"":"(s)"} [\`${o.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(s)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,r=[];Rn(r,t.length);const o=ce.Buffer.alloc(r.length+64*t.length+e.length);return gt(t.length<256),ce.Buffer.from(r).copy(o,0),t.forEach(({signature:s},u)=>{null!==s&&(gt(64===s.length,"signature has invalid length"),ce.Buffer.from(s).copy(o,r.length+64*u))}),e.copy(o,r.length+64*t.length),gt(o.length<=rr,`Transaction too large: ${o.length} > ${rr}`),o}get keys(){return gt(1===this.instructions.length),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return gt(1===this.instructions.length),this.instructions[0].programId}get data(){return gt(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=yn(t);let i=[];for(let o=0;o<r;o++){const s=bn(t,0,jr);i.push(un().encode(ce.Buffer.from(s)))}return mt.populate(Nn.from(t),i)}static populate(e,t=[]){const r=new mt;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((i,o)=>{const s={signature:i==un().encode(M0)?null:un().decode(i),publicKey:e.accountKeys[o]};r.signatures.push(s)}),e.instructions.forEach(i=>{const o=i.accounts.map(s=>{const u=e.accountKeys[s];return{pubkey:u,isSigner:r.signatures.some(l=>l.publicKey.toString()===u.toString())||e.isAccountSigner(s),isWritable:e.isAccountWritable(s)}});r.instructions.push(new Ot({keys:o,programId:e.accountKeys[i.programIdIndex],data:un().decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class mo{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:r,compiledInstructions:i,recentBlockhash:o}=e,{numRequiredSignatures:s,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l}=r,b=s-u;gt(b>0,"Message header is invalid");const x=e.staticAccountKeys.length-s-l;gt(x>=0,"Message header is invalid");const M=e.getAccountKeys(t),N=M.get(0);if(void 0===N)throw new Error("Failed to decompile message because no account keys were found");const B=[];for(const P of i){const z=[];for(const K of P.accountKeyIndexes){const oe=M.get(K);if(void 0===oe)throw new Error(`Failed to find key for account key index ${K}`);let Te;Te=K<s?K<b:K<M.staticAccountKeys.length?K-s<x:K-M.staticAccountKeys.length<M.accountKeysFromLookups.writable.length,z.push({pubkey:oe,isSigner:K<r.numRequiredSignatures,isWritable:Te})}const V=M.get(P.programIdIndex);if(void 0===V)throw new Error(`Failed to find program id for program id index ${P.programIdIndex}`);B.push(new Ot({programId:V,data:rt(P.data),keys:z}))}return new mo({payerKey:N,instructions:B,recentBlockhash:o})}compileToLegacyMessage(){return Nn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return gr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class yo{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)gt(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const r=[];for(let i=0;i<e.header.numRequiredSignatures;i++)r.push(new Uint8Array(jr));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Rn(t,this.signatures.length);const r=C.w3([C.av(t.length,"encodedSignaturesLength"),C.O6(T0(),this.signatures.length,"signatures"),C.av(e.length,"serializedMessage")]),i=new Uint8Array(2048),o=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,o)}static deserialize(e){let t=[...e];const r=[],i=yn(t);for(let s=0;s<i;s++)r.push(new Uint8Array(bn(t,0,jr)));const o=_o.deserialize(new Uint8Array(t));return new yo(o,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const o=r.findIndex(s=>s.equals(i.publicKey));gt(o>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[o]=fo(t,i.secretKey)}}addSignature(e,t){gt(64===t.byteLength,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(e));gt(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const $n=new Ae("SysvarC1ock11111111111111111111111111111111"),P0=new Ae("SysvarEpochSchedu1e111111111111111111111111"),U0=new Ae("Sysvar1nstructions1111111111111111111111111"),pi=new Ae("SysvarRecentB1ockHashes11111111111111111111"),kr=new Ae("SysvarRent111111111111111111111111111111111"),D0=new Ae("SysvarRewards111111111111111111111111111111"),F0=new Ae("SysvarS1otHashes111111111111111111111111111"),z0=new Ae("SysvarS1otHistory11111111111111111111111111"),gi=new Ae("SysvarStakeHistory1111111111111111111111111");class Xr extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:i}){const o=i?`Logs: \n${JSON.stringify(i.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let u;switch(e){case"send":u=`Transaction ${t} resulted in an error. \n${r}. `+o+s;break;case"simulate":u=`Simulation failed. \nMessage: ${r}. \n`+o+s;break;default:u=`Unknown action '${(l=>l)(e)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}getLogs(e){var t=this;return(0,w.A)(function*(){return Array.isArray(t.transactionLogs)||(t.transactionLogs=new Promise((r,i)=>{e.getTransaction(t.signature).then(o=>{if(o&&o.meta&&o.meta.logMessages){const s=o.meta.logMessages;t.transactionLogs=s,r(s)}else i(new Error("Log messages not found"))}).catch(i)})),yield t.transactionLogs})()}}const K0={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Fe extends Error{constructor({code:e,message:t,data:r},i){super(null!=i?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function bo(n,e,t,r){return wo.apply(this,arguments)}function wo(){return wo=(0,w.A)(function*(n,e,t,r){const i=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},o=yield n.sendTransaction(e,t,i);let s;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)s=(yield n.confirmTransaction({abortSignal:r?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r&&r.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:u}=e.nonceInfo,l=u.keys[0].pubkey;s=(yield n.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:l,nonceValue:e.nonceInfo.nonce,signature:o},r&&r.commitment)).value}else null!=r?.abortSignal&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(yield n.confirmTransaction(o,r&&r.commitment)).value;if(s.err)throw null!=o?new Xr({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(s)})`}):new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}),wo.apply(this,arguments)}function _r(n){return new Promise(e=>setTimeout(e,n))}function dt(n,e){const t=n.layout.span>=0?n.layout.span:Da(n,e),r=ce.Buffer.alloc(t),i=Object.assign({instruction:n.index},e);return n.layout.encode(i,r),r}function wt(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${n.index}`);return t}const Ka=C.I0("lamportsPerSignature"),$a=C.w3([C.DH("version"),C.DH("state"),ut("authorizedPubkey"),ut("nonce"),C.w3([Ka],"feeCalculator")]),Eo=$a.span;class _i{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=$a.decode(rt(e),0);return new _i({authorizedPubkey:new Ae(t.authorizedPubkey),nonce:new Ae(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function Tr(n){const e=(0,C.av)(8,n),t=e.decode.bind(e),r=e.encode.bind(e),i=e,o=zh();return i.decode=(s,u)=>{const l=t(s,u);return o.decode(l)},i.encode=(s,u,l)=>{const b=o.encode(s);return r(b,u,l)},i}class $0{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=C.DH("instruction").decode(e.data);let i;for(const[o,s]of Object.entries(xt))if(s.index==r){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:r,programId:i}=wt(xt.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new Ae(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=wt(xt.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:r,programId:i}=wt(xt.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new Ae(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=wt(xt.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,space:i,programId:o}=wt(xt.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Ae(t),seed:r,space:i,programId:new Ae(o)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=wt(xt.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new Ae(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,programId:i}=wt(xt.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Ae(t),seed:r,programId:new Ae(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:r,lamports:i,space:o,programId:s}=wt(xt.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Ae(t),seed:r,lamports:i,space:o,programId:new Ae(s)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=wt(xt.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Ae(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),wt(xt.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=wt(xt.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=wt(xt.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Ae(t)}}static checkProgramId(e){if(!e.equals(an.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const xt=Object.freeze({Create:{index:0,layout:C.w3([C.DH("instruction"),C.Wg("lamports"),C.Wg("space"),ut("programId")])},Assign:{index:1,layout:C.w3([C.DH("instruction"),ut("programId")])},Transfer:{index:2,layout:C.w3([C.DH("instruction"),Tr("lamports")])},CreateWithSeed:{index:3,layout:C.w3([C.DH("instruction"),ut("base"),pr("seed"),C.Wg("lamports"),C.Wg("space"),ut("programId")])},AdvanceNonceAccount:{index:4,layout:C.w3([C.DH("instruction")])},WithdrawNonceAccount:{index:5,layout:C.w3([C.DH("instruction"),C.Wg("lamports")])},InitializeNonceAccount:{index:6,layout:C.w3([C.DH("instruction"),ut("authorized")])},AuthorizeNonceAccount:{index:7,layout:C.w3([C.DH("instruction"),ut("authorized")])},Allocate:{index:8,layout:C.w3([C.DH("instruction"),C.Wg("space")])},AllocateWithSeed:{index:9,layout:C.w3([C.DH("instruction"),ut("base"),pr("seed"),C.Wg("space"),ut("programId")])},AssignWithSeed:{index:10,layout:C.w3([C.DH("instruction"),ut("base"),pr("seed"),ut("programId")])},TransferWithSeed:{index:11,layout:C.w3([C.DH("instruction"),Tr("lamports"),pr("seed"),ut("programId")])},UpgradeNonceAccount:{index:12,layout:C.w3([C.DH("instruction")])}});class an{constructor(){}static createAccount(e){const r=dt(xt.Create,{lamports:e.lamports,space:e.space,programId:rt(e.programId.toBuffer())});return new Ot({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;return"basePubkey"in e?(t=dt(xt.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:rt(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=dt(xt.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]),new Ot({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;return"basePubkey"in e?(t=dt(xt.AssignWithSeed,{base:rt(e.basePubkey.toBuffer()),seed:e.seed,programId:rt(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=dt(xt.Assign,{programId:rt(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new Ot({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const r=dt(xt.CreateWithSeed,{base:rt(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:rt(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Ot({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const t=new mt;return t.add("basePubkey"in e&&"seed"in e?an.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Eo,programId:this.programId}):an.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Eo,programId:this.programId})),t.add(this.nonceInitialize({noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey})),t}static nonceInitialize(e){const r=dt(xt.InitializeNonceAccount,{authorized:rt(e.authorizedPubkey.toBuffer())});return new Ot({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:pi,isSigner:!1,isWritable:!1},{pubkey:kr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r})}static nonceAdvance(e){const r=dt(xt.AdvanceNonceAccount);return new Ot({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:pi,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceWithdraw(e){const r=dt(xt.WithdrawNonceAccount,{lamports:e.lamports});return new Ot({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:pi,isSigner:!1,isWritable:!1},{pubkey:kr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const r=dt(xt.AuthorizeNonceAccount,{authorized:rt(e.newAuthorizedPubkey.toBuffer())});return new Ot({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;return"basePubkey"in e?(t=dt(xt.AllocateWithSeed,{base:rt(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:rt(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=dt(xt.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new Ot({keys:r,programId:this.programId,data:t})}}an.programId=new Ae("11111111111111111111111111111111");const H0=rr-300;let Ro=(()=>{class n{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/n.chunkSize)+1+1)}static load(t,r,i,o,s){return(0,w.A)(function*(){{const N=yield t.getMinimumBalanceForRentExemption(s.length),B=yield t.getAccountInfo(i.publicKey,"confirmed");let P=null;if(null!==B){if(B.executable)return console.error("Program load failed, account is already executable"),!1;B.data.length!==s.length&&(P=P||new mt,P.add(an.allocate({accountPubkey:i.publicKey,space:s.length}))),B.owner.equals(o)||(P=P||new mt,P.add(an.assign({accountPubkey:i.publicKey,programId:o}))),B.lamports<N&&(P=P||new mt,P.add(an.transfer({fromPubkey:r.publicKey,toPubkey:i.publicKey,lamports:N-B.lamports})))}else P=(new mt).add(an.createAccount({fromPubkey:r.publicKey,newAccountPubkey:i.publicKey,lamports:N>0?N:1,space:s.length,programId:o}));null!==P&&(yield bo(t,P,[r,i],{commitment:"confirmed"}))}const u=C.w3([C.DH("instruction"),C.DH("offset"),C.DH("bytesLength"),C.DH("bytesLengthPadding"),C.O6(C.u8("byte"),C.cY(C.DH(),-8),"bytes")]),l=n.chunkSize;let b=0,x=s,M=[];for(;x.length>0;){const N=x.slice(0,l),B=ce.Buffer.alloc(l+16);u.encode({instruction:0,offset:b,bytes:N,bytesLength:0,bytesLengthPadding:0},B);const P=(new mt).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0}],programId:o,data:B});M.push(bo(t,P,[r,i],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&(yield _r(250)),b+=l,x=x.slice(l)}yield Promise.all(M);{const N=C.w3([C.DH("instruction")]),B=ce.Buffer.alloc(N.span);N.encode({instruction:1},B);const P=(new mt).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:kr,isSigner:!1,isWritable:!1}],programId:o,data:B}),z="processed",V=yield t.sendTransaction(P,[r,i],{preflightCommitment:z}),{context:K,value:oe}=yield t.confirmTransaction({signature:V,lastValidBlockHeight:P.lastValidBlockHeight,blockhash:P.recentBlockhash},z);if(oe.err)throw new Error(`Transaction ${V} failed (${JSON.stringify(oe)})`);for(;;){try{if((yield t.getSlot({commitment:z}))>K.slot)break}catch{}yield new Promise(ne=>setTimeout(ne,Math.round(200)))}}return!0})()}}return n.chunkSize=H0,n})();const V0=new Ae("BPFLoader2111111111111111111111111111111111");class W0{static getMinNumSignatures(e){return Ro.getMinNumSignatures(e)}static load(e,t,r,i,o){return Ro.load(e,t,r,o,i)}}function G0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var So,Ha;function q0(){if(Ha)return So;Ha=1;var n=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var o in r)i.push(o);return i};function t(r,i){var o,s,u,l,b,x,M;if(!0===r)return"true";if(!1===r)return"false";switch(typeof r){case"object":if(null===r)return null;if(r.toJSON&&"function"==typeof r.toJSON)return t(r.toJSON(),i);if("[object Array]"===(M=n.call(r))){for(u="[",s=r.length-1,o=0;o<s;o++)u+=t(r[o],!0)+",";return s>-1&&(u+=t(r[o],!0)),u+"]"}if("[object Object]"===M){for(s=(l=e(r).sort()).length,u="",o=0;o<s;)void 0!==(x=t(r[b=l[o]],!1))&&(u&&(u+=","),u+=JSON.stringify(b)+":"+x),o++;return"{"+u+"}"}return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return So=function(r){var i=t(r,!1);if(void 0!==i)return""+i}}var Va=G0(q0());function Ao(n){let e=0;for(;n>1;)n/=2,e++;return e}class Wa{constructor(e,t,r,i,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=o}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Ao(function Y0(n){return 0===n?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,1+(n|=n>>32))}(e+32+1))-Ao(32)-1;return[t,e-(this.getSlotsInEpoch(t)-32)]}{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Ao(32)):this.slotsPerEpoch}}var X0=globalThis.fetch;class Z0 extends pa{constructor(e,t,r){super(o=>{const s=function ha(n,e){return new Zh(n,e)}(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return this.underlyingSocket="socket"in s?s.socket:s,s},e,t,r),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}class vo{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=function J0(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}(Q0,e),r=e.length-56;gt(r>=0,"lookup table is invalid"),gt(r%32==0,"lookup table is invalid");const i=r/32,{addresses:o}=C.w3([C.O6(ut(),i,"addresses")]).decode(e.slice(56));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new Ae(t.authority[0]):void 0,addresses:o.map(s=>new Ae(s))}}}const Q0={index:1,layout:C.w3([C.DH("typeIndex"),Tr("deactivationSlot"),C.I0("lastExtendedSlot"),C.u8("lastExtendedStartIndex"),C.u8(),C.O6(ut(),C.cY(C.u8(),-1),"authority")])},ep=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,Ft=dr(to(Ae),we(),n=>new Ae(n)),qa=no([we(),Dt("base64")]),Io=dr(to(ce.Buffer),qa,n=>ce.Buffer.from(n[0],"base64")),ja=3e4;function kt(n){let e,t;if("string"==typeof n)e=n;else if(n){const{commitment:r,...i}=n;e=r,t=i}return{commitment:e,config:t}}function Ya(n){return n.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Xa(n){return mn([pe({jsonrpc:Dt("2.0"),id:we(),result:n}),pe({jsonrpc:Dt("2.0"),id:we(),error:pe({code:fr(),message:we(),data:We(En("any",()=>!0))})})])}const rp=Xa(fr());function it(n){return dr(Xa(n),rp,e=>"error"in e?e:{...e,result:Ie(e.result,n)})}function en(n){return it(pe({context:pe({slot:H()}),value:n}))}function mi(n){return pe({context:pe({slot:H()}),value:n})}function Oo(n,e){return 0===n?new gr({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Ae(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:un().decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Nn(e)}const ip=pe({foundation:H(),foundationTerm:H(),initial:H(),taper:H(),terminal:H()}),op=it(xe(ke(pe({epoch:H(),effectiveSlot:H(),amount:H(),postBalance:H(),commission:We(ke(H()))})))),sp=xe(pe({slot:H(),prioritizationFee:H()})),ap=pe({total:H(),validator:H(),foundation:H(),epoch:H()}),cp=pe({epoch:H(),slotIndex:H(),slotsInEpoch:H(),absoluteSlot:H(),blockHeight:We(H()),transactionCount:We(H())}),up=pe({slotsPerEpoch:H(),leaderScheduleSlotOffset:H(),warmup:Dn(),firstNormalEpoch:H(),firstNormalSlot:H()}),lp=la(we(),xe(H())),mr=ke(mn([pe({}),we()])),fp=pe({err:mr}),dp=Dt("receivedSignature"),hp=pe({"solana-core":we(),"feature-set":We(H())}),pp=pe({program:we(),programId:Ft,parsed:fr()}),gp=pe({programId:Ft,accounts:xe(Ft),data:we()}),Za=en(pe({err:ke(mn([pe({}),we()])),logs:ke(xe(we())),accounts:We(ke(xe(ke(pe({executable:Dn(),owner:we(),lamports:H(),data:xe(we()),rentEpoch:We(H())}))))),unitsConsumed:We(H()),returnData:We(ke(pe({programId:we(),data:no([we(),Dt("base64")])}))),innerInstructions:We(ke(xe(pe({index:H(),instructions:xe(mn([pp,gp]))}))))})),_p=en(pe({byIdentity:la(we(),xe(H())),range:pe({firstSlot:H(),lastSlot:H()})})),wp=it(ip),Ep=it(ap),Rp=it(sp),Sp=it(cp),Ap=it(up),vp=it(lp),Ip=it(H()),Op=en(pe({total:H(),circulating:H(),nonCirculating:H(),nonCirculatingAccounts:xe(Ft)})),xo=pe({amount:we(),uiAmount:ke(H()),decimals:H(),uiAmountString:We(we())}),xp=en(xe(pe({address:Ft,amount:we(),uiAmount:ke(H()),decimals:H(),uiAmountString:We(we())}))),kp=en(xe(pe({pubkey:Ft,account:pe({executable:Dn(),owner:Ft,lamports:H(),data:Io,rentEpoch:H()})}))),ko=pe({program:we(),parsed:fr(),space:H()}),Tp=en(xe(pe({pubkey:Ft,account:pe({executable:Dn(),owner:Ft,lamports:H(),data:ko,rentEpoch:H()})}))),Np=en(xe(pe({lamports:H(),address:Ft}))),Jr=pe({executable:Dn(),owner:Ft,lamports:H(),data:Io,rentEpoch:H()}),Cp=pe({pubkey:Ft,account:Jr}),Bp=dr(mn([to(ce.Buffer),ko]),mn([qa,ko]),n=>Array.isArray(n)?Ie(n,Io):n),To=pe({executable:Dn(),owner:Ft,lamports:H(),data:Bp,rentEpoch:H()}),Lp=pe({pubkey:Ft,account:To}),Mp=pe({state:mn([Dt("active"),Dt("inactive"),Dt("activating"),Dt("deactivating")]),active:H(),inactive:H()}),Pp=it(xe(pe({signature:we(),slot:H(),err:mr,memo:ke(we()),blockTime:We(ke(H()))}))),Up=it(xe(pe({signature:we(),slot:H(),err:mr,memo:ke(we()),blockTime:We(ke(H()))}))),Dp=pe({subscription:H(),result:mi(Jr)}),Fp=pe({pubkey:Ft,account:Jr}),zp=pe({subscription:H(),result:mi(Fp)}),Kp=pe({parent:H(),slot:H(),root:H()}),$p=pe({subscription:H(),result:Kp}),Hp=mn([pe({type:mn([Dt("firstShredReceived"),Dt("completed"),Dt("optimisticConfirmation"),Dt("root")]),slot:H(),timestamp:H()}),pe({type:Dt("createdBank"),parent:H(),slot:H(),timestamp:H()}),pe({type:Dt("frozen"),slot:H(),timestamp:H(),stats:pe({numTransactionEntries:H(),numSuccessfulTransactions:H(),numFailedTransactions:H(),maxTransactionsPerEntry:H()})}),pe({type:Dt("dead"),slot:H(),timestamp:H(),err:we()})]),Vp=pe({subscription:H(),result:Hp}),Wp=pe({subscription:H(),result:mi(mn([fp,dp]))}),Gp=pe({subscription:H(),result:H()}),qp=pe({pubkey:we(),gossip:ke(we()),tpu:ke(we()),rpc:ke(we()),version:ke(we())}),Ja=pe({votePubkey:we(),nodePubkey:we(),activatedStake:H(),epochVoteAccount:Dn(),epochCredits:xe(no([H(),H(),H()])),commission:H(),lastVote:H(),rootSlot:ke(H())}),jp=it(pe({current:xe(Ja),delinquent:xe(Ja)})),Yp=mn([Dt("processed"),Dt("confirmed"),Dt("finalized")]),Xp=pe({slot:H(),confirmations:ke(H()),err:mr,confirmationStatus:We(Yp)}),Zp=en(xe(ke(Xp))),Jp=it(H()),Qa=pe({accountKey:Ft,writableIndexes:xe(H()),readonlyIndexes:xe(H())}),No=pe({signatures:xe(we()),message:pe({accountKeys:xe(we()),header:pe({numRequiredSignatures:H(),numReadonlySignedAccounts:H(),numReadonlyUnsignedAccounts:H()}),instructions:xe(pe({accounts:xe(H()),data:we(),programIdIndex:H()})),recentBlockhash:we(),addressTableLookups:We(xe(Qa))})}),ec=pe({pubkey:Ft,signer:Dn(),writable:Dn(),source:We(mn([Dt("transaction"),Dt("lookupTable")]))}),tc=pe({accountKeys:xe(ec),signatures:xe(we())}),nc=pe({parsed:fr(),program:we(),programId:Ft}),rc=pe({accounts:xe(Ft),data:we(),programId:Ft}),ic=dr(mn([rc,nc]),mn([pe({parsed:fr(),program:we(),programId:we()}),pe({accounts:xe(we()),data:we(),programId:we()})]),n=>Ie(n,"accounts"in n?rc:nc)),oc=pe({signatures:xe(we()),message:pe({accountKeys:xe(ec),instructions:xe(ic),recentBlockhash:we(),addressTableLookups:We(ke(xe(Qa)))})}),yi=pe({accountIndex:H(),mint:we(),owner:We(we()),programId:We(we()),uiTokenAmount:xo}),sc=pe({writable:xe(Ft),readonly:xe(Ft)}),bi=pe({err:mr,fee:H(),innerInstructions:We(ke(xe(pe({index:H(),instructions:xe(pe({accounts:xe(H()),data:we(),programIdIndex:H()}))})))),preBalances:xe(H()),postBalances:xe(H()),logMessages:We(ke(xe(we()))),preTokenBalances:We(ke(xe(yi))),postTokenBalances:We(ke(xe(yi))),loadedAddresses:We(sc),computeUnitsConsumed:We(H()),costUnits:We(H())}),Co=pe({err:mr,fee:H(),innerInstructions:We(ke(xe(pe({index:H(),instructions:xe(ic)})))),preBalances:xe(H()),postBalances:xe(H()),logMessages:We(ke(xe(we()))),preTokenBalances:We(ke(xe(yi))),postTokenBalances:We(ke(xe(yi))),loadedAddresses:We(sc),computeUnitsConsumed:We(H()),costUnits:We(H())}),Nr=mn([Dt(0),Dt("legacy")]),yr=pe({pubkey:we(),lamports:H(),postBalance:ke(H()),rewardType:ke(we()),commission:We(ke(H()))}),tg=it(ke(pe({blockhash:we(),previousBlockhash:we(),parentSlot:H(),transactions:xe(pe({transaction:No,meta:ke(bi),version:We(Nr)})),rewards:We(xe(yr)),blockTime:ke(H()),blockHeight:ke(H())}))),ng=it(ke(pe({blockhash:we(),previousBlockhash:we(),parentSlot:H(),rewards:We(xe(yr)),blockTime:ke(H()),blockHeight:ke(H())}))),rg=it(ke(pe({blockhash:we(),previousBlockhash:we(),parentSlot:H(),transactions:xe(pe({transaction:tc,meta:ke(bi),version:We(Nr)})),rewards:We(xe(yr)),blockTime:ke(H()),blockHeight:ke(H())}))),ig=it(ke(pe({blockhash:we(),previousBlockhash:we(),parentSlot:H(),transactions:xe(pe({transaction:oc,meta:ke(Co),version:We(Nr)})),rewards:We(xe(yr)),blockTime:ke(H()),blockHeight:ke(H())}))),og=it(ke(pe({blockhash:we(),previousBlockhash:we(),parentSlot:H(),transactions:xe(pe({transaction:tc,meta:ke(Co),version:We(Nr)})),rewards:We(xe(yr)),blockTime:ke(H()),blockHeight:ke(H())}))),sg=it(ke(pe({blockhash:we(),previousBlockhash:we(),parentSlot:H(),rewards:We(xe(yr)),blockTime:ke(H()),blockHeight:ke(H())}))),ag=it(ke(pe({blockhash:we(),previousBlockhash:we(),parentSlot:H(),transactions:xe(pe({transaction:No,meta:ke(bi)})),rewards:We(xe(yr)),blockTime:ke(H())}))),ac=it(ke(pe({blockhash:we(),previousBlockhash:we(),parentSlot:H(),signatures:xe(we()),blockTime:ke(H())}))),Bo=it(ke(pe({slot:H(),meta:ke(bi),blockTime:We(ke(H())),transaction:No,version:We(Nr)}))),wi=it(ke(pe({slot:H(),transaction:oc,meta:ke(Co),blockTime:We(ke(H())),version:We(Nr)}))),cg=en(pe({blockhash:we(),lastValidBlockHeight:H()})),ug=en(Dn()),fg=it(xe(pe({slot:H(),numTransactions:H(),numSlots:H(),samplePeriodSecs:H()}))),dg=en(ke(pe({feeCalculator:pe({lamportsPerSignature:H()})}))),hg=it(we()),pg=it(we()),gg=pe({err:mr,logs:xe(we()),signature:we()}),_g=pe({result:mi(gg),subscription:H()}),mg={"solana-client":"js/1.0.0-maintenance"};class yg{constructor(e,t){var r=this;let i,o,s,u,l,b;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const x={};return function(){var M=(0,w.A)(function*(N){const{commitment:B,config:P}=kt(N),z=r._buildArgs([],B,void 0,P),V=Va(z);return x[V]=x[V]??(0,w.A)(function*(){try{const oe=Ie(yield r._rpcRequest("getBlockHeight",z),it(H()));if("error"in oe)throw new Fe(oe.error,"failed to get block height information");return oe.result}finally{delete x[V]}})(),yield x[V]});return function(N){return M.apply(this,arguments)}}()})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,i=t.wsEndpoint,o=t.httpHeaders,s=t.fetch,u=t.fetchMiddleware,l=t.disableRetryOnRateLimit,b=t.httpAgent),this._rpcEndpoint=function np(n){if(!1===/^https?:/.test(n))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}(e),this._rpcWsEndpoint=i||function tp(n){const e=n.match(ep);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[t,r,i,o]=e,s=n.startsWith("https:")?"wss:":"ws:",u=null==i?null:parseInt(i.slice(1),10);return`${s}//${r}${null==u?"":`:${u+1}`}${o}`}(e),this._rpcClient=function mp(n,e,t,r,i,o){const s=t||X0;let l;return null!=o&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),r&&(l=function(){var x=(0,w.A)(function*(M,N){const B=yield new Promise((P,z)=>{try{r(M,N,(V,K)=>P([V,K]))}catch(V){z(V)}});return yield s(...B)});return function(N,B){return x.apply(this,arguments)}}()),new(Xh())(function(){var x=(0,w.A)(function*(M,N){const B={method:"POST",body:M,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},e||{},mg)};try{let z,P=5,V=500;for(;z=l?yield l(n,B):yield s(n,B),429===z.status&&!0!==i&&(P-=1,0!==P);)console.error(`Server responded with ${z.status} ${z.statusText}.  Retrying after ${V}ms delay...`),yield _r(V),V*=2;const K=yield z.text();z.ok?N(null,K):N(new Error(`${z.status} ${z.statusText}: ${K}`))}catch(P){P instanceof Error&&N(P)}});return function(M,N){return x.apply(this,arguments)}}(),{})}(e,o,s,u,l,b),this._rpcRequest=function yp(n){return(e,t)=>new Promise((r,i)=>{n.request(e,t,(o,s)=>{o?i(o):r(s)})})}(this._rpcClient),this._rpcBatchRequest=function bp(n){return e=>new Promise((t,r)=>{0===e.length&&t([]);const i=e.map(o=>n.request(o.methodName,o.args));n.request(i,(o,s)=>{o?r(o):t(s)})})}(this._rpcClient),this._rpcWebSocket=new Z0(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}getBalanceAndContext(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=r._buildArgs([e.toBase58()],i,void 0,o),l=Ie(yield r._rpcRequest("getBalance",s),en(H()));if("error"in l)throw new Fe(l.error,`failed to get balance for ${e.toBase58()}`);return l.result})()}getBalance(e,t){var r=this;return(0,w.A)(function*(){return yield r.getBalanceAndContext(e,t).then(i=>i.value).catch(i=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+i)})})()}getBlockTime(e){var t=this;return(0,w.A)(function*(){const i=Ie(yield t._rpcRequest("getBlockTime",[e]),it(ke(H())));if("error"in i)throw new Fe(i.error,`failed to get block time for slot ${e}`);return i.result})()}getMinimumLedgerSlot(){var e=this;return(0,w.A)(function*(){const r=Ie(yield e._rpcRequest("minimumLedgerSlot",[]),it(H()));if("error"in r)throw new Fe(r.error,"failed to get minimum ledger slot");return r.result})()}getFirstAvailableBlock(){var e=this;return(0,w.A)(function*(){const r=Ie(yield e._rpcRequest("getFirstAvailableBlock",[]),Ip);if("error"in r)throw new Fe(r.error,"failed to get first available block");return r.result})()}getSupply(e){var t=this;return(0,w.A)(function*(){let r={};r="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||t.commitment}:{commitment:t.commitment};const o=Ie(yield t._rpcRequest("getSupply",[r]),Op);if("error"in o)throw new Fe(o.error,"failed to get supply");return o.result})()}getTokenSupply(e,t){var r=this;return(0,w.A)(function*(){const i=r._buildArgs([e.toBase58()],t),s=Ie(yield r._rpcRequest("getTokenSupply",i),en(xo));if("error"in s)throw new Fe(s.error,"failed to get token supply");return s.result})()}getTokenAccountBalance(e,t){var r=this;return(0,w.A)(function*(){const i=r._buildArgs([e.toBase58()],t),s=Ie(yield r._rpcRequest("getTokenAccountBalance",i),en(xo));if("error"in s)throw new Fe(s.error,"failed to get token account balance");return s.result})()}getTokenAccountsByOwner(e,t,r){var i=this;return(0,w.A)(function*(){const{commitment:o,config:s}=kt(r);let u=[e.toBase58()];u.push("mint"in t?{mint:t.mint.toBase58()}:{programId:t.programId.toBase58()});const l=i._buildArgs(u,o,"base64",s),x=Ie(yield i._rpcRequest("getTokenAccountsByOwner",l),kp);if("error"in x)throw new Fe(x.error,`failed to get token accounts owned by account ${e.toBase58()}`);return x.result})()}getParsedTokenAccountsByOwner(e,t,r){var i=this;return(0,w.A)(function*(){let o=[e.toBase58()];o.push("mint"in t?{mint:t.mint.toBase58()}:{programId:t.programId.toBase58()});const s=i._buildArgs(o,r,"jsonParsed"),l=Ie(yield i._rpcRequest("getTokenAccountsByOwner",s),Tp);if("error"in l)throw new Fe(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result})()}getLargestAccounts(e){var t=this;return(0,w.A)(function*(){const r={...e,commitment:e&&e.commitment||t.commitment},i=r.filter||r.commitment?[r]:[],s=Ie(yield t._rpcRequest("getLargestAccounts",i),Np);if("error"in s)throw new Fe(s.error,"failed to get largest accounts");return s.result})()}getTokenLargestAccounts(e,t){var r=this;return(0,w.A)(function*(){const i=r._buildArgs([e.toBase58()],t),s=Ie(yield r._rpcRequest("getTokenLargestAccounts",i),xp);if("error"in s)throw new Fe(s.error,"failed to get token largest accounts");return s.result})()}getAccountInfoAndContext(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=r._buildArgs([e.toBase58()],i,"base64",o),l=Ie(yield r._rpcRequest("getAccountInfo",s),en(ke(Jr)));if("error"in l)throw new Fe(l.error,`failed to get info about account ${e.toBase58()}`);return l.result})()}getParsedAccountInfo(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=r._buildArgs([e.toBase58()],i,"jsonParsed",o),l=Ie(yield r._rpcRequest("getAccountInfo",s),en(ke(To)));if("error"in l)throw new Fe(l.error,`failed to get info about account ${e.toBase58()}`);return l.result})()}getAccountInfo(e,t){var r=this;return(0,w.A)(function*(){try{return(yield r.getAccountInfoAndContext(e,t)).value}catch(i){throw new Error("failed to get info about account "+e.toBase58()+": "+i)}})()}getMultipleParsedAccounts(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=e.map(x=>x.toBase58()),u=r._buildArgs([s],i,"jsonParsed",o),b=Ie(yield r._rpcRequest("getMultipleAccounts",u),en(xe(ke(To))));if("error"in b)throw new Fe(b.error,`failed to get info for accounts ${s}`);return b.result})()}getMultipleAccountsInfoAndContext(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=e.map(x=>x.toBase58()),u=r._buildArgs([s],i,"base64",o),b=Ie(yield r._rpcRequest("getMultipleAccounts",u),en(xe(ke(Jr))));if("error"in b)throw new Fe(b.error,`failed to get info for accounts ${s}`);return b.result})()}getMultipleAccountsInfo(e,t){var r=this;return(0,w.A)(function*(){return(yield r.getMultipleAccountsInfoAndContext(e,t)).value})()}getStakeActivation(e,t,r){var i=this;return(0,w.A)(function*(){const{commitment:o,config:s}=kt(t),u=i._buildArgs([e.toBase58()],o,void 0,{...s,epoch:r??s?.epoch}),b=Ie(yield i._rpcRequest("getStakeActivation",u),it(Mp));if("error"in b)throw new Fe(b.error,`failed to get Stake Activation ${e.toBase58()}`);return b.result})()}getProgramAccounts(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),{encoding:s,...u}=o||{},l=r._buildArgs([e.toBase58()],i,s||"base64",{...u,...u.filters?{filters:Ya(u.filters)}:null}),b=yield r._rpcRequest("getProgramAccounts",l),x=xe(Cp),M=Ie(b,!0===u.withContext?en(x):it(x));if("error"in M)throw new Fe(M.error,`failed to get accounts owned by program ${e.toBase58()}`);return M.result})()}getParsedProgramAccounts(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=r._buildArgs([e.toBase58()],i,"jsonParsed",o),l=Ie(yield r._rpcRequest("getProgramAccounts",s),it(xe(Lp)));if("error"in l)throw new Fe(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result})()}confirmTransaction(e,t){var r=this;return(0,w.A)(function*(){let i,o;if("string"==typeof e)i=e;else{const s=e;if(s.abortSignal?.aborted)return Promise.reject(s.abortSignal.reason);i=s.signature}try{o=un().decode(i)}catch{throw new Error("signature must be base58 encoded: "+i)}return gt(64===o.length,"signature has invalid length"),"string"==typeof e?yield r.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||r.commitment,signature:i}):"lastValidBlockHeight"in e?yield r.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||r.commitment,strategy:e}):yield r.confirmTransactionUsingDurableNonceStrategy({commitment:t||r.commitment,strategy:e})})()}getCancellationPromise(e){return new Promise((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){var r=this;let i,o,s=!1;return{abortConfirmation:()=>{o&&(o(),o=void 0),null!=i&&(this.removeSignatureListener(i),i=void 0)},confirmationPromise:new Promise((b,x)=>{try{i=this.onSignature(t,(N,B)=>{i=void 0,b({__type:Zn.PROCESSED,response:{context:B,value:N}})},e);const M=new Promise(N=>{null==i?N():o=this._onSubscriptionStateChange(i,B=>{"subscribed"===B&&N()})});(0,w.A)(function*(){if(yield M,s)return;const N=yield r.getSignatureStatus(t);if(s||null==N)return;const{context:B,value:P}=N;if(null!=P)if(P?.err)x(P.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===P.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===P.confirmationStatus||"confirmed"===P.confirmationStatus)return}s=!0,b({__type:Zn.PROCESSED,response:{context:B,value:P}})}})()}catch(M){x(M)}})}}confirmTransactionUsingBlockHeightExceedanceStrategy(e){var t=this;return(0,w.A)(function*({commitment:r,strategy:{abortSignal:i,lastValidBlockHeight:o,signature:s}}){let u=!1;const l=new Promise(B=>{const P=function(){var z=(0,w.A)(function*(){try{return yield t.getBlockHeight(r)}catch{return-1}});return function(){return z.apply(this,arguments)}}();(0,w.A)(function*(){let z=yield P();if(!u){for(;z<=o;)if(yield _r(1e3),u||(z=yield P(),u))return;B({__type:Zn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:b,confirmationPromise:x}=t.getTransactionConfirmationPromise({commitment:r,signature:s}),M=t.getCancellationPromise(i);let N;try{const B=yield Promise.race([M,x,l]);if(B.__type!==Zn.PROCESSED)throw new po(s);N=B.response}finally{u=!0,b()}return N}).apply(this,arguments)}confirmTransactionUsingDurableNonceStrategy(e){var t=this;return(0,w.A)(function*({commitment:r,strategy:{abortSignal:i,minContextSlot:o,nonceAccountPubkey:s,nonceValue:u,signature:l}}){let b=!1;const x=new Promise(z=>{let V=u,K=null;const oe=function(){var ne=(0,w.A)(function*(){try{const{context:Te,value:je}=yield t.getNonceAndContext(s,{commitment:r,minContextSlot:o});return K=Te.slot,je?.nonce}catch{return V}});return function(){return ne.apply(this,arguments)}}();(0,w.A)(function*(){if(V=yield oe(),!b)for(;;){if(u!==V)return void z({__type:Zn.NONCE_INVALID,slotInWhichNonceDidAdvance:K});if(yield _r(2e3),b||(V=yield oe(),b))return}})()}),{abortConfirmation:M,confirmationPromise:N}=t.getTransactionConfirmationPromise({commitment:r,signature:l}),B=t.getCancellationPromise(i);let P;try{const z=yield Promise.race([B,N,x]);if(z.__type===Zn.PROCESSED)P=z.response;else{let V;for(;;){const K=yield t.getSignatureStatus(l);if(null==K)break;if(!(K.context.slot<(z.slotInWhichNonceDidAdvance??o))){V=K;break}yield _r(400)}if(!V?.value)throw new xr(l);{const K=r||"finalized",{confirmationStatus:oe}=V.value;switch(K){case"processed":case"recent":if("processed"!==oe&&"confirmed"!==oe&&"finalized"!==oe)throw new xr(l);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==oe&&"finalized"!==oe)throw new xr(l);break;case"finalized":case"max":case"root":if("finalized"!==oe)throw new xr(l)}P={context:V.context,value:{err:V.value.err}}}}}finally{b=!0,M()}return P}).apply(this,arguments)}confirmTransactionUsingLegacyTimeoutStrategy(e){var t=this;return(0,w.A)(function*({commitment:r,signature:i}){let o;const s=new Promise(x=>{let M=t._confirmTransactionInitialTimeout||6e4;switch(r){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":M=t._confirmTransactionInitialTimeout||3e4}o=setTimeout(()=>x({__type:Zn.TIMED_OUT,timeoutMs:M}),M)}),{abortConfirmation:u,confirmationPromise:l}=t.getTransactionConfirmationPromise({commitment:r,signature:i});let b;try{const x=yield Promise.race([l,s]);if(x.__type!==Zn.PROCESSED)throw new go(i,x.timeoutMs/1e3);b=x.response}finally{clearTimeout(o),u()}return b}).apply(this,arguments)}getClusterNodes(){var e=this;return(0,w.A)(function*(){const r=Ie(yield e._rpcRequest("getClusterNodes",[]),it(xe(qp)));if("error"in r)throw new Fe(r.error,"failed to get cluster nodes");return r.result})()}getVoteAccounts(e){var t=this;return(0,w.A)(function*(){const r=t._buildArgs([],e),o=Ie(yield t._rpcRequest("getVoteAccounts",r),jp);if("error"in o)throw new Fe(o.error,"failed to get vote accounts");return o.result})()}getSlot(e){var t=this;return(0,w.A)(function*(){const{commitment:r,config:i}=kt(e),o=t._buildArgs([],r,void 0,i),u=Ie(yield t._rpcRequest("getSlot",o),it(H()));if("error"in u)throw new Fe(u.error,"failed to get slot");return u.result})()}getSlotLeader(e){var t=this;return(0,w.A)(function*(){const{commitment:r,config:i}=kt(e),o=t._buildArgs([],r,void 0,i),u=Ie(yield t._rpcRequest("getSlotLeader",o),it(we()));if("error"in u)throw new Fe(u.error,"failed to get slot leader");return u.result})()}getSlotLeaders(e,t){var r=this;return(0,w.A)(function*(){const i=[e,t],s=Ie(yield r._rpcRequest("getSlotLeaders",i),it(xe(Ft)));if("error"in s)throw new Fe(s.error,"failed to get slot leaders");return s.result})()}getSignatureStatus(e,t){var r=this;return(0,w.A)(function*(){const{context:i,value:o}=yield r.getSignatureStatuses([e],t);return gt(1===o.length),{context:i,value:o[0]}})()}getSignatureStatuses(e,t){var r=this;return(0,w.A)(function*(){const i=[e];t&&i.push(t);const s=Ie(yield r._rpcRequest("getSignatureStatuses",i),Zp);if("error"in s)throw new Fe(s.error,"failed to get signature status");return s.result})()}getTransactionCount(e){var t=this;return(0,w.A)(function*(){const{commitment:r,config:i}=kt(e),o=t._buildArgs([],r,void 0,i),u=Ie(yield t._rpcRequest("getTransactionCount",o),it(H()));if("error"in u)throw new Fe(u.error,"failed to get transaction count");return u.result})()}getTotalSupply(e){var t=this;return(0,w.A)(function*(){return(yield t.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total})()}getInflationGovernor(e){var t=this;return(0,w.A)(function*(){const r=t._buildArgs([],e),o=Ie(yield t._rpcRequest("getInflationGovernor",r),wp);if("error"in o)throw new Fe(o.error,"failed to get inflation");return o.result})()}getInflationReward(e,t,r){var i=this;return(0,w.A)(function*(){const{commitment:o,config:s}=kt(r),u=i._buildArgs([e.map(x=>x.toBase58())],o,void 0,{...s,epoch:t??s?.epoch}),b=Ie(yield i._rpcRequest("getInflationReward",u),op);if("error"in b)throw new Fe(b.error,"failed to get inflation reward");return b.result})()}getInflationRate(){var e=this;return(0,w.A)(function*(){const r=Ie(yield e._rpcRequest("getInflationRate",[]),Ep);if("error"in r)throw new Fe(r.error,"failed to get inflation rate");return r.result})()}getEpochInfo(e){var t=this;return(0,w.A)(function*(){const{commitment:r,config:i}=kt(e),o=t._buildArgs([],r,void 0,i),u=Ie(yield t._rpcRequest("getEpochInfo",o),Sp);if("error"in u)throw new Fe(u.error,"failed to get epoch info");return u.result})()}getEpochSchedule(){var e=this;return(0,w.A)(function*(){const r=Ie(yield e._rpcRequest("getEpochSchedule",[]),Ap);if("error"in r)throw new Fe(r.error,"failed to get epoch schedule");const i=r.result;return new Wa(i.slotsPerEpoch,i.leaderScheduleSlotOffset,i.warmup,i.firstNormalEpoch,i.firstNormalSlot)})()}getLeaderSchedule(){var e=this;return(0,w.A)(function*(){const r=Ie(yield e._rpcRequest("getLeaderSchedule",[]),vp);if("error"in r)throw new Fe(r.error,"failed to get leader schedule");return r.result})()}getMinimumBalanceForRentExemption(e,t){var r=this;return(0,w.A)(function*(){const i=r._buildArgs([e],t),s=Ie(yield r._rpcRequest("getMinimumBalanceForRentExemption",i),Jp);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result})()}getRecentBlockhashAndContext(e){var t=this;return(0,w.A)(function*(){const{context:r,value:{blockhash:i}}=yield t.getLatestBlockhashAndContext(e);return{context:r,value:{blockhash:i,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}})()}getRecentPerformanceSamples(e){var t=this;return(0,w.A)(function*(){const i=Ie(yield t._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),fg);if("error"in i)throw new Fe(i.error,"failed to get recent performance samples");return i.result})()}getFeeCalculatorForBlockhash(e,t){var r=this;return(0,w.A)(function*(){const i=r._buildArgs([e],t),s=Ie(yield r._rpcRequest("getFeeCalculatorForBlockhash",i),dg);if("error"in s)throw new Fe(s.error,"failed to get fee calculator");const{context:u,value:l}=s.result;return{context:u,value:null!==l?l.feeCalculator:null}})()}getFeeForMessage(e,t){var r=this;return(0,w.A)(function*(){const i=rt(e.serialize()).toString("base64"),o=r._buildArgs([i],t),u=Ie(yield r._rpcRequest("getFeeForMessage",o),en(ke(H())));if("error"in u)throw new Fe(u.error,"failed to get fee for message");if(null===u.result)throw new Error("invalid blockhash");return u.result})()}getRecentPrioritizationFees(e){var t=this;return(0,w.A)(function*(){const r=e?.lockedWritableAccounts?.map(u=>u.toBase58()),i=r?.length?[r]:[],s=Ie(yield t._rpcRequest("getRecentPrioritizationFees",i),Rp);if("error"in s)throw new Fe(s.error,"failed to get recent prioritization fees");return s.result})()}getRecentBlockhash(e){var t=this;return(0,w.A)(function*(){try{return(yield t.getRecentBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}})()}getLatestBlockhash(e){var t=this;return(0,w.A)(function*(){try{return(yield t.getLatestBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}})()}getLatestBlockhashAndContext(e){var t=this;return(0,w.A)(function*(){const{commitment:r,config:i}=kt(e),o=t._buildArgs([],r,void 0,i),u=Ie(yield t._rpcRequest("getLatestBlockhash",o),cg);if("error"in u)throw new Fe(u.error,"failed to get latest blockhash");return u.result})()}isBlockhashValid(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=r._buildArgs([e],i,void 0,o),l=Ie(yield r._rpcRequest("isBlockhashValid",s),ug);if("error"in l)throw new Fe(l.error,"failed to determine if the blockhash `"+e+"`is valid");return l.result})()}getVersion(){var e=this;return(0,w.A)(function*(){const r=Ie(yield e._rpcRequest("getVersion",[]),it(hp));if("error"in r)throw new Fe(r.error,"failed to get version");return r.result})()}getGenesisHash(){var e=this;return(0,w.A)(function*(){const r=Ie(yield e._rpcRequest("getGenesisHash",[]),it(we()));if("error"in r)throw new Fe(r.error,"failed to get genesis hash");return r.result})()}getBlock(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=r._buildArgsAtLeastConfirmed([e],i,void 0,o),u=yield r._rpcRequest("getBlock",s);try{switch(o?.transactionDetails){case"accounts":{const l=Ie(u,rg);if("error"in l)throw l.error;return l.result}case"none":{const l=Ie(u,ng);if("error"in l)throw l.error;return l.result}default:{const l=Ie(u,tg);if("error"in l)throw l.error;const{result:b}=l;return b?{...b,transactions:b.transactions.map(({transaction:x,meta:M,version:N})=>({meta:M,transaction:{...x,message:Oo(N,x.message)},version:N}))}:null}}}catch(l){throw new Fe(l,"failed to get confirmed block")}})()}getParsedBlock(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=r._buildArgsAtLeastConfirmed([e],i,"jsonParsed",o),u=yield r._rpcRequest("getBlock",s);try{switch(o?.transactionDetails){case"accounts":{const l=Ie(u,og);if("error"in l)throw l.error;return l.result}case"none":{const l=Ie(u,sg);if("error"in l)throw l.error;return l.result}default:{const l=Ie(u,ig);if("error"in l)throw l.error;return l.result}}}catch(l){throw new Fe(l,"failed to get block")}})()}getBlockProduction(e){var t=this;return(0,w.A)(function*(){let r,i;if("string"==typeof e)i=e;else if(e){const{commitment:l,...b}=e;i=l,r=b}const o=t._buildArgs([],i,"base64",r),u=Ie(yield t._rpcRequest("getBlockProduction",o),_p);if("error"in u)throw new Fe(u.error,"failed to get block production information");return u.result})()}getTransaction(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=r._buildArgsAtLeastConfirmed([e],i,void 0,o),l=Ie(yield r._rpcRequest("getTransaction",s),Bo);if("error"in l)throw new Fe(l.error,"failed to get transaction");const b=l.result;return b&&{...b,transaction:{...b.transaction,message:Oo(b.version,b.transaction.message)}}})()}getParsedTransaction(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=r._buildArgsAtLeastConfirmed([e],i,"jsonParsed",o),l=Ie(yield r._rpcRequest("getTransaction",s),wi);if("error"in l)throw new Fe(l.error,"failed to get transaction");return l.result})()}getParsedTransactions(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=e.map(b=>({methodName:"getTransaction",args:r._buildArgsAtLeastConfirmed([b],i,"jsonParsed",o)}));return(yield r._rpcBatchRequest(s)).map(b=>{const x=Ie(b,wi);if("error"in x)throw new Fe(x.error,"failed to get transactions");return x.result})})()}getTransactions(e,t){var r=this;return(0,w.A)(function*(){const{commitment:i,config:o}=kt(t),s=e.map(b=>({methodName:"getTransaction",args:r._buildArgsAtLeastConfirmed([b],i,void 0,o)}));return(yield r._rpcBatchRequest(s)).map(b=>{const x=Ie(b,Bo);if("error"in x)throw new Fe(x.error,"failed to get transactions");const M=x.result;return M&&{...M,transaction:{...M.transaction,message:Oo(M.version,M.transaction.message)}}})})()}getConfirmedBlock(e,t){var r=this;return(0,w.A)(function*(){const i=r._buildArgsAtLeastConfirmed([e],t),s=Ie(yield r._rpcRequest("getBlock",i),ag);if("error"in s)throw new Fe(s.error,"failed to get confirmed block");const u=s.result;if(!u)throw new Error("Confirmed block "+e+" not found");const l={...u,transactions:u.transactions.map(({transaction:b,meta:x})=>{const M=new Nn(b.message);return{meta:x,transaction:{...b,message:M}}})};return{...l,transactions:l.transactions.map(({transaction:b,meta:x})=>({meta:x,transaction:mt.populate(b.message,b.signatures)}))}})()}getBlocks(e,t,r){var i=this;return(0,w.A)(function*(){const o=i._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),u=Ie(yield i._rpcRequest("getBlocks",o),it(xe(H())));if("error"in u)throw new Fe(u.error,"failed to get blocks");return u.result})()}getBlockSignatures(e,t){var r=this;return(0,w.A)(function*(){const i=r._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=Ie(yield r._rpcRequest("getBlock",i),ac);if("error"in s)throw new Fe(s.error,"failed to get block");const u=s.result;if(!u)throw new Error("Block "+e+" not found");return u})()}getConfirmedBlockSignatures(e,t){var r=this;return(0,w.A)(function*(){const i=r._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=Ie(yield r._rpcRequest("getBlock",i),ac);if("error"in s)throw new Fe(s.error,"failed to get confirmed block");const u=s.result;if(!u)throw new Error("Confirmed block "+e+" not found");return u})()}getConfirmedTransaction(e,t){var r=this;return(0,w.A)(function*(){const i=r._buildArgsAtLeastConfirmed([e],t),s=Ie(yield r._rpcRequest("getTransaction",i),Bo);if("error"in s)throw new Fe(s.error,"failed to get transaction");const u=s.result;if(!u)return u;const l=new Nn(u.transaction.message),b=u.transaction.signatures;return{...u,transaction:mt.populate(l,b)}})()}getParsedConfirmedTransaction(e,t){var r=this;return(0,w.A)(function*(){const i=r._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=Ie(yield r._rpcRequest("getTransaction",i),wi);if("error"in s)throw new Fe(s.error,"failed to get confirmed transaction");return s.result})()}getParsedConfirmedTransactions(e,t){var r=this;return(0,w.A)(function*(){const i=e.map(u=>({methodName:"getTransaction",args:r._buildArgsAtLeastConfirmed([u],t,"jsonParsed")}));return(yield r._rpcBatchRequest(i)).map(u=>{const l=Ie(u,wi);if("error"in l)throw new Fe(l.error,"failed to get confirmed transactions");return l.result})})()}getConfirmedSignaturesForAddress(e,t,r){var i=this;return(0,w.A)(function*(){let o={},s=yield i.getFirstAvailableBlock();for(;!("until"in o||(t--,t<=0||t<s));)try{const b=yield i.getConfirmedBlockSignatures(t,"finalized");b.signatures.length>0&&(o.until=b.signatures[b.signatures.length-1].toString())}catch(b){if(b instanceof Error&&b.message.includes("skipped"))continue;throw b}let u=yield i.getSlot("finalized");for(;!("before"in o||(r++,r>u));)try{const b=yield i.getConfirmedBlockSignatures(r);b.signatures.length>0&&(o.before=b.signatures[b.signatures.length-1].toString())}catch(b){if(b instanceof Error&&b.message.includes("skipped"))continue;throw b}return(yield i.getConfirmedSignaturesForAddress2(e,o)).map(b=>b.signature)})()}getConfirmedSignaturesForAddress2(e,t,r){var i=this;return(0,w.A)(function*(){const o=i._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),u=Ie(yield i._rpcRequest("getConfirmedSignaturesForAddress2",o),Pp);if("error"in u)throw new Fe(u.error,"failed to get confirmed signatures for address");return u.result})()}getSignaturesForAddress(e,t,r){var i=this;return(0,w.A)(function*(){const o=i._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),u=Ie(yield i._rpcRequest("getSignaturesForAddress",o),Up);if("error"in u)throw new Fe(u.error,"failed to get signatures for address");return u.result})()}getAddressLookupTable(e,t){var r=this;return(0,w.A)(function*(){const{context:i,value:o}=yield r.getAccountInfoAndContext(e,t);let s=null;return null!==o&&(s=new vo({key:e,state:vo.deserialize(o.data)})),{context:i,value:s}})()}getNonceAndContext(e,t){var r=this;return(0,w.A)(function*(){const{context:i,value:o}=yield r.getAccountInfoAndContext(e,t);let s=null;return null!==o&&(s=_i.fromAccountData(o.data)),{context:i,value:s}})()}getNonce(e,t){var r=this;return(0,w.A)(function*(){return yield r.getNonceAndContext(e,t).then(i=>i.value).catch(i=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+i)})})()}requestAirdrop(e,t){var r=this;return(0,w.A)(function*(){const o=Ie(yield r._rpcRequest("requestAirdrop",[e.toBase58(),t]),hg);if("error"in o)throw new Fe(o.error,`airdrop to ${e.toBase58()} failed`);return o.result})()}_blockhashWithExpiryBlockHeight(e){var t=this;return(0,w.A)(function*(){if(!e){for(;t._pollingBlockhash;)yield _r(100);const i=Date.now()-t._blockhashInfo.lastFetch>=ja;if(null!==t._blockhashInfo.latestBlockhash&&!i)return t._blockhashInfo.latestBlockhash}return yield t._pollNewBlockhash()})()}_pollNewBlockhash(){var e=this;return(0,w.A)(function*(){e._pollingBlockhash=!0;try{const t=Date.now(),r=e._blockhashInfo.latestBlockhash,i=r?r.blockhash:null;for(let o=0;o<50;o++){const s=yield e.getLatestBlockhash("finalized");if(i!==s.blockhash)return e._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;yield _r(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{e._pollingBlockhash=!1}})()}getStakeMinimumDelegation(e){var t=this;return(0,w.A)(function*(){const{commitment:r,config:i}=kt(e),o=t._buildArgs([],r,"base64",i),u=Ie(yield t._rpcRequest("getStakeMinimumDelegation",o),en(H()));if("error"in u)throw new Fe(u.error,"failed to get stake minimum delegation");return u.result})()}simulateTransaction(e,t,r){var i=this;return(0,w.A)(function*(){if("message"in e){const V=e.serialize(),K=ce.Buffer.from(V).toString("base64");if(Array.isArray(t)||void 0!==r)throw new Error("Invalid arguments");const oe=t||{};oe.encoding="base64","commitment"in oe||(oe.commitment=i.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(oe.innerInstructions=t.innerInstructions);const ne=[K,oe],je=Ie(yield i._rpcRequest("simulateTransaction",ne),Za);if("error"in je)throw new Error("failed to simulate transaction: "+je.error.message);return je.result}let o;if(e instanceof mt){let z=e;o=new mt,o.feePayer=z.feePayer,o.instructions=e.instructions,o.nonceInfo=z.nonceInfo,o.signatures=z.signatures}else o=mt.populate(e),o._message=o._json=void 0;if(void 0!==t&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(o.nonceInfo&&s)o.sign(...s);else{let z=i._disableBlockhashCaching;for(;;){const V=yield i._blockhashWithExpiryBlockHeight(z);if(o.lastValidBlockHeight=V.lastValidBlockHeight,o.recentBlockhash=V.blockhash,!s)break;if(o.sign(...s),!o.signature)throw new Error("!signature");const K=o.signature.toString("base64");if(!i._blockhashInfo.simulatedSignatures.includes(K)&&!i._blockhashInfo.transactionSignatures.includes(K)){i._blockhashInfo.simulatedSignatures.push(K);break}z=!0}}const u=o._compile(),l=u.serialize(),x=o._serialize(l).toString("base64"),M={encoding:"base64",commitment:i.commitment};if(r){const z=(Array.isArray(r)?r:u.nonProgramIds()).map(V=>V.toBase58());M.accounts={encoding:"base64",addresses:z}}s&&(M.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(M.innerInstructions=t.innerInstructions);const N=[x,M],P=Ie(yield i._rpcRequest("simulateTransaction",N),Za);if("error"in P){let z;if("data"in P.error&&(z=P.error.data.logs,z&&Array.isArray(z))){const V="\n    ",K=V+z.join(V);console.error(P.error.message,K)}throw new Xr({action:"simulate",signature:"",transactionMessage:P.error.message,logs:z})}return P.result})()}sendTransaction(e,t,r){var i=this;return(0,w.A)(function*(){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const u=e.serialize();return yield i.sendRawTransaction(u,t)}if(void 0===t||!Array.isArray(t))throw new Error("Invalid arguments");const o=t;if(e.nonceInfo)e.sign(...o);else{let u=i._disableBlockhashCaching;for(;;){const l=yield i._blockhashWithExpiryBlockHeight(u);if(e.lastValidBlockHeight=l.lastValidBlockHeight,e.recentBlockhash=l.blockhash,e.sign(...o),!e.signature)throw new Error("!signature");const b=e.signature.toString("base64");if(!i._blockhashInfo.transactionSignatures.includes(b)){i._blockhashInfo.transactionSignatures.push(b);break}u=!0}}const s=e.serialize();return yield i.sendRawTransaction(s,r)})()}sendRawTransaction(e,t){var r=this;return(0,w.A)(function*(){const i=rt(e).toString("base64");return yield r.sendEncodedTransaction(i,t)})()}sendEncodedTransaction(e,t){var r=this;return(0,w.A)(function*(){const i={encoding:"base64"},o=t&&t.skipPreflight,s=!0===o?"processed":t&&t.preflightCommitment||r.commitment;t&&null!=t.maxRetries&&(i.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(i.minContextSlot=t.minContextSlot),o&&(i.skipPreflight=o),s&&(i.preflightCommitment=s);const u=[e,i],b=Ie(yield r._rpcRequest("sendTransaction",u),pg);if("error"in b){let x;throw"data"in b.error&&(x=b.error.data.logs),new Xr({action:o?"send":"simulate",signature:"",transactionMessage:b.error.message,logs:x})}return b.result})()}_wsOnOpen(){var e=this;this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(0,w.A)(function*(){try{yield e._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})):this._updateSubscriptions()}_setSubscription(e,t){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const r=this._subscriptionHashByClientSubscriptionId[e];if(null==r)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return i.add(t),()=>{i.delete(t),0===i.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}_updateSubscriptions(){var e=this;return(0,w.A)(function*(){if(0===Object.keys(e._subscriptionsByHash).length)return void(e._rpcWebSocketConnected&&(e._rpcWebSocketConnected=!1,e._rpcWebSocketIdleTimeout=setTimeout(()=>{e._rpcWebSocketIdleTimeout=null;try{e._rpcWebSocket.close()}catch(i){i instanceof Error&&console.log(`Error when closing socket connection: ${i.message}`)}},500)));if(null!==e._rpcWebSocketIdleTimeout&&(clearTimeout(e._rpcWebSocketIdleTimeout),e._rpcWebSocketIdleTimeout=null,e._rpcWebSocketConnected=!0),!e._rpcWebSocketConnected)return void e._rpcWebSocket.connect();const t=e._rpcWebSocketGeneration,r=()=>t===e._rpcWebSocketGeneration;yield Promise.all(Object.keys(e._subscriptionsByHash).map(function(){var i=(0,w.A)(function*(o){const s=e._subscriptionsByHash[o];if(void 0!==s)switch(s.state){case"pending":case"unsubscribed":if(0===s.callbacks.size)return delete e._subscriptionsByHash[o],"unsubscribed"===s.state&&delete e._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],void(yield e._updateSubscriptions());yield(0,w.A)(function*(){const{args:u,method:l}=s;try{e._setSubscription(o,{...s,state:"subscribing"});const b=yield e._rpcWebSocket.call(l,u);e._setSubscription(o,{...s,serverSubscriptionId:b,state:"subscribed"}),e._subscriptionCallbacksByServerSubscriptionId[b]=s.callbacks,yield e._updateSubscriptions()}catch(b){if(console.error(`Received ${b instanceof Error?"":"JSON-RPC "}error calling \`${l}\``,{args:u,error:b}),!r())return;e._setSubscription(o,{...s,state:"pending"}),yield e._updateSubscriptions()}})();break;case"subscribed":0===s.callbacks.size&&(yield(0,w.A)(function*(){const{serverSubscriptionId:u,unsubscribeMethod:l}=s;if(e._subscriptionsAutoDisposedByRpc.has(u))e._subscriptionsAutoDisposedByRpc.delete(u);else{e._setSubscription(o,{...s,state:"unsubscribing"}),e._setSubscription(o,{...s,state:"unsubscribing"});try{yield e._rpcWebSocket.call(l,[u])}catch(b){if(b instanceof Error&&console.error(`${l} error:`,b.message),!r())return;return e._setSubscription(o,{...s,state:"subscribed"}),void(yield e._updateSubscriptions())}}e._setSubscription(o,{...s,state:"unsubscribed"}),yield e._updateSubscriptions()})())}});return function(o){return i.apply(this,arguments)}}()))})()}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach(i=>{try{i(...t)}catch(o){console.error(o)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=Ie(e,Dp);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){var r=this;const i=this._nextClientSubscriptionId++,o=Va([e.method,t]),s=this._subscriptionsByHash[o];return void 0===s?this._subscriptionsByHash[o]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[i]=o,this._subscriptionDisposeFunctionsByClientSubscriptionId[i]=(0,w.A)(function*(){delete r._subscriptionDisposeFunctionsByClientSubscriptionId[i],delete r._subscriptionHashByClientSubscriptionId[i];const u=r._subscriptionsByHash[o];gt(void 0!==u,`Could not find a \`Subscription\` when tearing down client subscription #${i}`),u.callbacks.delete(e.callback),yield r._updateSubscriptions()}),this._updateSubscriptions(),i}onAccountChange(e,t,r){const{commitment:i,config:o}=kt(r),s=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}removeAccountChangeListener(e){var t=this;return(0,w.A)(function*(){yield t._unsubscribeClientSubscription(e,"account change")})()}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=Ie(e,zp);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,i){const{commitment:o,config:s}=kt(r),u=this._buildArgs([e.toBase58()],o||this._commitment||"finalized","base64",s||(i?{filters:Ya(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}removeProgramAccountChangeListener(e){var t=this;return(0,w.A)(function*(){yield t._unsubscribeClientSubscription(e,"program account change")})()}onLogs(e,t,r){const i=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}removeOnLogsListener(e){var t=this;return(0,w.A)(function*(){yield t._unsubscribeClientSubscription(e,"logs")})()}_wsOnLogsNotification(e){const{result:t,subscription:r}=Ie(e,_g);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=Ie(e,$p);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}removeSlotChangeListener(e){var t=this;return(0,w.A)(function*(){yield t._unsubscribeClientSubscription(e,"slot change")})()}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=Ie(e,Vp);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}removeSlotUpdateListener(e){var t=this;return(0,w.A)(function*(){yield t._unsubscribeClientSubscription(e,"slot update")})()}_unsubscribeClientSubscription(e,t){var r=this;return(0,w.A)(function*(){const i=r._subscriptionDisposeFunctionsByClientSubscriptionId[e];i?yield i():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)})()}_buildArgs(e,t,r,i){const o=t||this._commitment;if(o||r||i){let s={};r&&(s.encoding=r),o&&(s.commitment=o),i&&(s=Object.assign(s,i)),e.push(s)}return e}_buildArgsAtLeastConfirmed(e,t,r,i){const o=t||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,i)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=Ie(e,Wp);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),o=this._makeSubscription({callback:(s,u)=>{if("status"===s.type){t(s.result,u);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}onSignatureWithOptions(e,t,r){const{commitment:i,...o}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([e],i,void 0,o),u=this._makeSubscription({callback:(l,b)=>{t(l,b);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return u}removeSignatureListener(e){var t=this;return(0,w.A)(function*(){yield t._unsubscribeClientSubscription(e,"signature result")})()}_wsOnRootNotification(e){const{result:t,subscription:r}=Ie(e,Gp);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}removeRootChangeListener(e){var t=this;return(0,w.A)(function*(){yield t._unsubscribeClientSubscription(e,"root change")})()}}class Cr{constructor(e){this._keypair=void 0,this._keypair=e??Ba()}static generate(){return new Cr(Ba())}static fromSecretKey(e,t){if(64!==e.byteLength)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),o=fi(i);for(let s=0;s<32;s++)if(r[s]!==o[s])throw new Error("provided secretKey is invalid")}return new Cr({publicKey:r,secretKey:e})}static fromSeed(e){const t=fi(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new Cr({publicKey:t,secretKey:r})}get publicKey(){return new Ae(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Jn=Object.freeze({CreateLookupTable:{index:0,layout:C.w3([C.DH("instruction"),Tr("recentSlot"),C.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:C.w3([C.DH("instruction")])},ExtendLookupTable:{index:2,layout:C.w3([C.DH("instruction"),Tr(),C.O6(ut(),C.cY(C.DH(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:C.w3([C.DH("instruction")])},CloseLookupTable:{index:4,layout:C.w3([C.DH("instruction")])}});class bg{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=C.DH("instruction").decode(e.data);let i;for(const[o,s]of Object.entries(Jn))if(s.index==r){i=o;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=wt(Jn.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=wt(Jn.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(r=>new Ae(r))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Lo.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Lo{constructor(){}static createLookupTable(e){const[t,r]=Ae.findProgramAddressSync([e.authority.toBuffer(),oa().encode(e.recentSlot)],this.programId),o=dt(Jn.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:r});return[new Ot({programId:this.programId,keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:an.programId,isSigner:!1,isWritable:!1}],data:o}),t]}static freezeLookupTable(e){const r=dt(Jn.FreezeLookupTable);return new Ot({programId:this.programId,keys:[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}],data:r})}static extendLookupTable(e){const r=dt(Jn.ExtendLookupTable,{addresses:e.addresses.map(o=>o.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:an.programId,isSigner:!1,isWritable:!1}),new Ot({programId:this.programId,keys:i,data:r})}static deactivateLookupTable(e){const r=dt(Jn.DeactivateLookupTable);return new Ot({programId:this.programId,keys:[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}],data:r})}static closeLookupTable(e){const r=dt(Jn.CloseLookupTable);return new Ot({programId:this.programId,keys:[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}],data:r})}}Lo.programId=new Ae("AddressLookupTab1e1111111111111111111111111");class wg{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=C.u8("instruction").decode(e.data);let i;for(const[o,s]of Object.entries(Hn))if(s.index==r){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:r}=wt(Hn.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=wt(Hn.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=wt(Hn.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=wt(Hn.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Mo.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Hn=Object.freeze({RequestUnits:{index:0,layout:C.w3([C.u8("instruction"),C.DH("units"),C.DH("additionalFee")])},RequestHeapFrame:{index:1,layout:C.w3([C.u8("instruction"),C.DH("bytes")])},SetComputeUnitLimit:{index:2,layout:C.w3([C.u8("instruction"),C.DH("units")])},SetComputeUnitPrice:{index:3,layout:C.w3([C.u8("instruction"),Tr("microLamports")])}});class Mo{constructor(){}static requestUnits(e){const r=dt(Hn.RequestUnits,e);return new Ot({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const r=dt(Hn.RequestHeapFrame,e);return new Ot({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const r=dt(Hn.SetComputeUnitLimit,e);return new Ot({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const r=dt(Hn.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new Ot({keys:[],programId:this.programId,data:r})}}Mo.programId=new Ae("ComputeBudget111111111111111111111111111111");const fc=C.w3([C.u8("numSignatures"),C.u8("padding"),C.NX("signatureOffset"),C.NX("signatureInstructionIndex"),C.NX("publicKeyOffset"),C.NX("publicKeyInstructionIndex"),C.NX("messageDataOffset"),C.NX("messageDataSize"),C.NX("messageInstructionIndex")]);class Ei{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:i,instructionIndex:o}=e;gt(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),gt(64===i.length,`Signature must be 64 bytes but received ${i.length} bytes`);const s=fc.span,u=s+t.length,l=u+i.length,x=ce.Buffer.alloc(l+r.length),M=o??65535;return fc.encode({numSignatures:1,padding:0,signatureOffset:u,signatureInstructionIndex:M,publicKeyOffset:s,publicKeyInstructionIndex:M,messageDataOffset:l,messageDataSize:r.length,messageInstructionIndex:M},x),x.fill(t,s),x.fill(i,u),x.fill(r,l),new Ot({keys:[],programId:Ei.programId,data:x})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:i}=e;gt(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{const o=Cr.fromSecretKey(t),s=o.publicKey.toBytes(),u=fo(r,o.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:u,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}}Ei.programId=new Ae("Ed25519SigVerify111111111111111111111111111");const Rg=ao.getPublicKey,Uo=C.w3([C.u8("numSignatures"),C.NX("signatureOffset"),C.u8("signatureInstructionIndex"),C.NX("ethAddressOffset"),C.u8("ethAddressInstructionIndex"),C.NX("messageDataOffset"),C.NX("messageDataSize"),C.u8("messageInstructionIndex"),C.av(20,"ethAddress"),C.av(64,"signature"),C.u8("recoveryId")]);class Br{constructor(){}static publicKeyToEthAddress(e){gt(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return ce.Buffer.from(Ea(rt(e))).slice(-20)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:i,recoveryId:o,instructionIndex:s}=e;return Br.createInstructionWithEthAddress({ethAddress:Br.publicKeyToEthAddress(t),message:r,signature:i,recoveryId:o,instructionIndex:s})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:i,recoveryId:o,instructionIndex:s=0}=e;let u;u="string"==typeof t?t.startsWith("0x")?ce.Buffer.from(t.substr(2),"hex"):ce.Buffer.from(t,"hex"):t,gt(20===u.length,`Address must be 20 bytes but received ${u.length} bytes`);const x=12+u.length,M=x+i.length+1,B=ce.Buffer.alloc(Uo.span+r.length);return Uo.encode({numSignatures:1,signatureOffset:x,signatureInstructionIndex:s,ethAddressOffset:12,ethAddressInstructionIndex:s,messageDataOffset:M,messageDataSize:r.length,messageInstructionIndex:s,signature:rt(i),ethAddress:rt(u),recoveryId:o},B),B.fill(rt(r),Uo.span),new Ot({keys:[],programId:Br.programId,data:B})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:i}=e;gt(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{const o=rt(t),s=Rg(o,!1).slice(1),u=ce.Buffer.from(Ea(rt(r))),[l,b]=((n,e)=>{const t=ao.sign(n,e);return[t.toCompactRawBytes(),t.recovery]})(u,o);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:l,recoveryId:b,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}}Br.programId=new Ae("KeccakSecp256k11111111111111111111111111111");const gc=new Ae("StakeConfig11111111111111111111111111111111");class _c{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Qr{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}Qr.default=new Qr(0,0,Ae.default);class Ag{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=C.DH("instruction").decode(e.data);let i;for(const[o,s]of Object.entries(cn))if(s.index==r){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:r}=wt(cn.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new _c(new Ae(t.staker),new Ae(t.withdrawer)),lockup:new Qr(r.unixTimestamp,r.epoch,new Ae(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),wt(cn.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:r}=wt(cn.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Ae(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:i,authorityOwner:o}=wt(cn.AuthorizeWithSeed,e.data),s={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new Ae(o),newAuthorizedPubkey:new Ae(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=wt(cn.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),wt(cn.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=wt(cn.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),wt(cn.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Ri.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const cn=Object.freeze({Initialize:{index:0,layout:C.w3([C.DH("instruction"),((n="authorized")=>C.w3([ut("staker"),ut("withdrawer")],n))(),((n="lockup")=>C.w3([C.Wg("unixTimestamp"),C.Wg("epoch"),ut("custodian")],n))()])},Authorize:{index:1,layout:C.w3([C.DH("instruction"),ut("newAuthorized"),C.DH("stakeAuthorizationType")])},Delegate:{index:2,layout:C.w3([C.DH("instruction")])},Split:{index:3,layout:C.w3([C.DH("instruction"),C.Wg("lamports")])},Withdraw:{index:4,layout:C.w3([C.DH("instruction"),C.Wg("lamports")])},Deactivate:{index:5,layout:C.w3([C.DH("instruction")])},Merge:{index:7,layout:C.w3([C.DH("instruction")])},AuthorizeWithSeed:{index:8,layout:C.w3([C.DH("instruction"),ut("newAuthorized"),C.DH("stakeAuthorizationType"),pr("authoritySeed"),ut("authorityOwner")])}}),vg=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Ri{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:i}=e,o=i||Qr.default,u=dt(cn.Initialize,{authorized:{staker:rt(r.staker.toBuffer()),withdrawer:rt(r.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:rt(o.custodian.toBuffer())}});return new Ot({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:kr,isSigner:!1,isWritable:!1}],programId:this.programId,data:u})}static createAccountWithSeed(e){const t=new mt;t.add(an.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:i,lockup:o}=e;return t.add(this.initialize({stakePubkey:r,authorized:i,lockup:o}))}static createAccount(e){const t=new mt;t.add(an.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:i,lockup:o}=e;return t.add(this.initialize({stakePubkey:r,authorized:i,lockup:o}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:i}=e,s=dt(cn.Delegate);return(new mt).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:gc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:i,stakeAuthorizationType:o,custodianPubkey:s}=e,l=dt(cn.Authorize,{newAuthorized:rt(i.toBuffer()),stakeAuthorizationType:o.index}),b=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&b.push({pubkey:s,isSigner:!0,isWritable:!1}),(new mt).add({keys:b,programId:this.programId,data:l})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:i,authorityOwner:o,newAuthorizedPubkey:s,stakeAuthorizationType:u,custodianPubkey:l}=e,x=dt(cn.AuthorizeWithSeed,{newAuthorized:rt(s.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:i,authorityOwner:rt(o.toBuffer())}),M=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:$n,isSigner:!1,isWritable:!1}];return l&&M.push({pubkey:l,isSigner:!0,isWritable:!1}),(new mt).add({keys:M,programId:this.programId,data:x})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:i,lamports:o}=e,u=dt(cn.Split,{lamports:o});return new Ot({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e,t){const r=new mt;return r.add(an.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:i,splitStakePubkey:o,basePubkey:s,seed:u,lamports:l}=e,b=new mt;return b.add(an.allocate({accountPubkey:o,basePubkey:s,seed:u,space:this.space,programId:this.programId})),t&&t>0&&b.add(an.transfer({fromPubkey:e.authorizedPubkey,toPubkey:o,lamports:t})),b.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:i,splitStakePubkey:o,lamports:l}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:i}=e,s=dt(cn.Merge);return(new mt).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:i,lamports:o,custodianPubkey:s}=e,l=dt(cn.Withdraw,{lamports:o}),b=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:gi,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&b.push({pubkey:s,isSigner:!0,isWritable:!1}),(new mt).add({keys:b,programId:this.programId,data:l})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,o=dt(cn.Deactivate);return(new mt).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}}Ri.programId=new Ae("Stake11111111111111111111111111111111111111"),Ri.space=200;class mc{constructor(e,t,r,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=i}}class Ig{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=C.DH("instruction").decode(e.data);let i;for(const[o,s]of Object.entries(Vn))if(s.index==r){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=wt(Vn.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new mc(new Ae(t.nodePubkey),new Ae(t.authorizedVoter),new Ae(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:r}=wt(Vn.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Ae(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:i,voteAuthorizationType:o}}=wt(Vn.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Ae(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new Ae(i),voteAuthorizationType:{index:o},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=wt(Vn.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Lr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Vn=Object.freeze({InitializeAccount:{index:0,layout:C.w3([C.DH("instruction"),((n="voteInit")=>C.w3([ut("nodePubkey"),ut("authorizedVoter"),ut("authorizedWithdrawer"),C.u8("commission")],n))()])},Authorize:{index:1,layout:C.w3([C.DH("instruction"),ut("newAuthorized"),C.DH("voteAuthorizationType")])},Withdraw:{index:3,layout:C.w3([C.DH("instruction"),C.Wg("lamports")])},UpdateValidatorIdentity:{index:4,layout:C.w3([C.DH("instruction")])},AuthorizeWithSeed:{index:10,layout:C.w3([C.DH("instruction"),((n="voteAuthorizeWithSeedArgs")=>C.w3([C.DH("voteAuthorizationType"),ut("currentAuthorityDerivedKeyOwnerPubkey"),pr("currentAuthorityDerivedKeySeed"),ut("newAuthorized")],n))()])}}),Og=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Lr{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:i}=e,s=dt(Vn.InitializeAccount,{voteInit:{nodePubkey:rt(i.nodePubkey.toBuffer()),authorizedVoter:rt(i.authorizedVoter.toBuffer()),authorizedWithdrawer:rt(i.authorizedWithdrawer.toBuffer()),commission:i.commission}});return new Ot({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:kr,isSigner:!1,isWritable:!1},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static createAccount(e){const t=new mt;return t.add(an.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:i,voteAuthorizationType:o}=e,u=dt(Vn.Authorize,{newAuthorized:rt(i.toBuffer()),voteAuthorizationType:o.index}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new mt).add({keys:l,programId:this.programId,data:u})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:o,voteAuthorizationType:s,votePubkey:u}=e,b=dt(Vn.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:rt(r.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:rt(o.toBuffer()),voteAuthorizationType:s.index}}),x=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:$n,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new mt).add({keys:x,programId:this.programId,data:b})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:i,toPubkey:o}=e,u=dt(Vn.Withdraw,{lamports:i}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new mt).add({keys:l,programId:this.programId,data:u})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Lr.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:i}=e,s=dt(Vn.UpdateValidatorIdentity),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new mt).add({keys:u,programId:this.programId,data:s})}}Lr.programId=new Ae("Vote111111111111111111111111111111111111111"),Lr.space=3762;const yc=new Ae("Va1idator1nfo111111111111111111111111111111"),xg=pe({name:we(),website:We(we()),details:We(we()),iconUrl:We(we()),keybaseUsername:We(we())});class Do{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(2!==yn(t))return null;const i=[];for(let o=0;o<2;o++){const s=new Ae(bn(t,0,zn)),u=1===Kn(t);i.push({publicKey:s,isSigner:u})}if(i[0].publicKey.equals(yc)&&i[1].isSigner){const o=pr().decode(ce.Buffer.from(t)),s=JSON.parse(o);return aa(s,xg),new Do(i[1].publicKey,s)}return null}}const kg=new Ae("Vote111111111111111111111111111111111111111"),Tg=C.w3([ut("nodePubkey"),ut("authorizedWithdrawer"),C.u8("commission"),C.I0(),C.O6(C.w3([C.I0("slot"),C.DH("confirmationCount")]),C.cY(C.DH(),-8),"votes"),C.u8("rootSlotValid"),C.I0("rootSlot"),C.I0(),C.O6(C.w3([C.I0("epoch"),ut("authorizedVoter")]),C.cY(C.DH(),-8),"authorizedVoters"),C.w3([C.O6(C.w3([ut("authorizedPubkey"),C.I0("epochOfLastAuthorizedSwitch"),C.I0("targetEpoch")]),32,"buf"),C.I0("idx"),C.u8("isEmpty")],"priorVoters"),C.I0(),C.O6(C.w3([C.I0("epoch"),C.I0("credits"),C.I0("prevCredits")]),C.cY(C.DH(),-8),"epochCredits"),C.w3([C.I0("slot"),C.I0("timestamp")],"lastTimestamp")]);class Fo{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const r=Tg.decode(rt(e),4);let i=r.rootSlot;return r.rootSlotValid||(i=null),new Fo({nodePubkey:new Ae(r.nodePubkey),authorizedWithdrawer:new Ae(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:i,authorizedVoters:r.authorizedVoters.map(Ng),priorVoters:Cg(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Ng({authorizedVoter:n,epoch:e}){return{epoch:e,authorizedVoter:new Ae(n)}}function bc({authorizedPubkey:n,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new Ae(n),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function Cg({buf:n,idx:e,isEmpty:t}){return t?[]:[...n.slice(e+1).map(bc),...n.slice(0,e).map(bc)]}const wc={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Bg(n,e){const t=!1===e?"http":"https";if(!n)return wc[t].devnet;const r=wc[t][n];if(!r)throw new Error(`Unknown ${t} cluster: ${n}`);return r}function Lg(n,e,t,r){return zo.apply(this,arguments)}function zo(){return zo=(0,w.A)(function*(n,e,t,r){let i,o;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,o=r):o=t;const s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},u=yield n.sendRawTransaction(e,s),l=o&&o.commitment,x=(yield n.confirmTransaction(i||u,l)).value;if(x.err)throw null!=u?new Xr({action:s?.skipPreflight?"send":"simulate",signature:u,transactionMessage:`Status: (${JSON.stringify(x)})`}):new Error(`Raw transaction ${u} failed (${JSON.stringify(x)})`);return u}),zo.apply(this,arguments)}const Mg=1e9},2020:(Rt,Ne)=>{Ne.read=function(ge,w,ce,q,te){var R,j,T=8*te-q-1,fe=(1<<T)-1,p=fe>>1,Ee=-7,Ce=ce?te-1:0,Oe=ce?-1:1,ae=ge[w+Ce];for(Ce+=Oe,R=ae&(1<<-Ee)-1,ae>>=-Ee,Ee+=T;Ee>0;R=256*R+ge[w+Ce],Ce+=Oe,Ee-=8);for(j=R&(1<<-Ee)-1,R>>=-Ee,Ee+=q;Ee>0;j=256*j+ge[w+Ce],Ce+=Oe,Ee-=8);if(0===R)R=1-p;else{if(R===fe)return j?NaN:1/0*(ae?-1:1);j+=Math.pow(2,q),R-=p}return(ae?-1:1)*j*Math.pow(2,R-q)},Ne.write=function(ge,w,ce,q,te,R){var j,T,fe,p=8*R-te-1,Ee=(1<<p)-1,Ce=Ee>>1,Oe=23===te?Math.pow(2,-24)-Math.pow(2,-77):0,ae=q?0:R-1,X=q?1:-1,De=w<0||0===w&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(T=isNaN(w)?1:0,j=Ee):(j=Math.floor(Math.log(w)/Math.LN2),w*(fe=Math.pow(2,-j))<1&&(j--,fe*=2),(w+=j+Ce>=1?Oe/fe:Oe*Math.pow(2,1-Ce))*fe>=2&&(j++,fe/=2),j+Ce>=Ee?(T=0,j=Ee):j+Ce>=1?(T=(w*fe-1)*Math.pow(2,te),j+=Ce):(T=w*Math.pow(2,Ce-1)*Math.pow(2,te),j=0));te>=8;ge[ce+ae]=255&T,ae+=X,T/=256,te-=8);for(j=j<<te|T,p+=te;p>0;ge[ce+ae]=255&j,ae+=X,j/=256,p-=8);ge[ce+ae-X]|=128*De}},2097:(Rt,Ne,ge)=>{"use strict";ge.d(Ne,{v4:()=>Oe});var w,ce=new Uint8Array(16);function q(){if(!w&&!(w=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return w(ce)}const te=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var T=[],fe=0;fe<256;++fe)T.push((fe+256).toString(16).substr(1));const Ee=function p(ae){var X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,De=(T[ae[X+0]]+T[ae[X+1]]+T[ae[X+2]]+T[ae[X+3]]+"-"+T[ae[X+4]]+T[ae[X+5]]+"-"+T[ae[X+6]]+T[ae[X+7]]+"-"+T[ae[X+8]]+T[ae[X+9]]+"-"+T[ae[X+10]]+T[ae[X+11]]+T[ae[X+12]]+T[ae[X+13]]+T[ae[X+14]]+T[ae[X+15]]).toLowerCase();if(!function R(ae){return"string"==typeof ae&&te.test(ae)}(De))throw TypeError("Stringified UUID is invalid");return De},Oe=function Ce(ae,X,De){var Q=(ae=ae||{}).random||(ae.rng||q)();if(Q[6]=15&Q[6]|64,Q[8]=63&Q[8]|128,X){De=De||0;for(var Y=0;Y<16;++Y)X[De+Y]=Q[Y];return X}return Ee(Q)}},2476:function(Rt,Ne,ge){"use strict";var w=this&&this.__createBinding||(Object.create?function(de,Z,ue,ye){void 0===ye&&(ye=ue),Object.defineProperty(de,ye,{enumerable:!0,get:function(){return Z[ue]}})}:function(de,Z,ue,ye){void 0===ye&&(ye=ue),de[ye]=Z[ue]}),ce=this&&this.__setModuleDefault||(Object.create?function(de,Z){Object.defineProperty(de,"default",{enumerable:!0,value:Z})}:function(de,Z){de.default=Z}),q=this&&this.__decorate||function(de,Z,ue,ye){var h,A=arguments.length,a=A<3?Z:null===ye?ye=Object.getOwnPropertyDescriptor(Z,ue):ye;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(de,Z,ue,ye);else for(var y=de.length-1;y>=0;y--)(h=de[y])&&(a=(A<3?h(a):A>3?h(Z,ue,a):h(Z,ue))||a);return A>3&&a&&Object.defineProperty(Z,ue,a),a},te=this&&this.__importStar||function(de){if(de&&de.__esModule)return de;var Z={};if(null!=de)for(var ue in de)"default"!==ue&&Object.hasOwnProperty.call(de,ue)&&w(Z,de,ue);return ce(Z,de),Z},R=this&&this.__importDefault||function(de){return de&&de.__esModule?de:{default:de}};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.deserializeUnchecked=Ne.deserialize=Ne.serialize=Ne.BinaryReader=Ne.BinaryWriter=Ne.BorshError=Ne.baseDecode=Ne.baseEncode=void 0;const j=R(ge(917)),T=R(ge(5538)),fe=te(ge(7422)),Ee=new("function"!=typeof TextDecoder?fe.TextDecoder:TextDecoder)("utf-8",{fatal:!0});Ne.baseEncode=function Ce(de){return"string"==typeof de&&(de=Buffer.from(de,"utf8")),T.default.encode(Buffer.from(de))},Ne.baseDecode=function Oe(de){return Buffer.from(T.default.decode(de))};class X extends Error{constructor(Z){super(Z),this.fieldPath=[],this.originalMessage=Z}addToFieldPath(Z){this.fieldPath.splice(0,0,Z),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ne.BorshError=X;class De{constructor(){this.buf=Buffer.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(1024)]))}writeU8(Z){this.maybeResize(),this.buf.writeUInt8(Z,this.length),this.length+=1}writeU16(Z){this.maybeResize(),this.buf.writeUInt16LE(Z,this.length),this.length+=2}writeU32(Z){this.maybeResize(),this.buf.writeUInt32LE(Z,this.length),this.length+=4}writeU64(Z){this.maybeResize(),this.writeBuffer(Buffer.from(new j.default(Z).toArray("le",8)))}writeU128(Z){this.maybeResize(),this.writeBuffer(Buffer.from(new j.default(Z).toArray("le",16)))}writeU256(Z){this.maybeResize(),this.writeBuffer(Buffer.from(new j.default(Z).toArray("le",32)))}writeU512(Z){this.maybeResize(),this.writeBuffer(Buffer.from(new j.default(Z).toArray("le",64)))}writeBuffer(Z){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),Z,Buffer.alloc(1024)]),this.length+=Z.length}writeString(Z){this.maybeResize();const ue=Buffer.from(Z,"utf8");this.writeU32(ue.length),this.writeBuffer(ue)}writeFixedArray(Z){this.writeBuffer(Buffer.from(Z))}writeArray(Z,ue){this.maybeResize(),this.writeU32(Z.length);for(const ye of Z)this.maybeResize(),ue(ye)}toArray(){return this.buf.subarray(0,this.length)}}function Q(de,Z,ue){const ye=ue.value;ue.value=function(...A){try{return ye.apply(this,A)}catch(a){if(a instanceof RangeError&&["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a.code)>=0)throw new X("Reached the end of buffer when deserializing");throw a}}}Ne.BinaryWriter=De;class Y{constructor(Z){this.buf=Z,this.offset=0}readU8(){const Z=this.buf.readUInt8(this.offset);return this.offset+=1,Z}readU16(){const Z=this.buf.readUInt16LE(this.offset);return this.offset+=2,Z}readU32(){const Z=this.buf.readUInt32LE(this.offset);return this.offset+=4,Z}readU64(){const Z=this.readBuffer(8);return new j.default(Z,"le")}readU128(){const Z=this.readBuffer(16);return new j.default(Z,"le")}readU256(){const Z=this.readBuffer(32);return new j.default(Z,"le")}readU512(){const Z=this.readBuffer(64);return new j.default(Z,"le")}readBuffer(Z){if(this.offset+Z>this.buf.length)throw new X(`Expected buffer length ${Z} isn't within bounds`);const ue=this.buf.slice(this.offset,this.offset+Z);return this.offset+=Z,ue}readString(){const Z=this.readU32(),ue=this.readBuffer(Z);try{return Ee.decode(ue)}catch(ye){throw new X(`Error decoding UTF-8 string: ${ye}`)}}readFixedArray(Z){return new Uint8Array(this.readBuffer(Z))}readArray(Z){const ue=this.readU32(),ye=Array();for(let A=0;A<ue;++A)ye.push(Z());return ye}}function ve(de){return de.charAt(0).toUpperCase()+de.slice(1)}function me(de,Z,ue,ye,A){try{if("string"==typeof ye)A[`write${ve(ye)}`](ue);else if(ye instanceof Array)if("number"==typeof ye[0]){if(ue.length!==ye[0])throw new X(`Expecting byte array of length ${ye[0]}, but got ${ue.length} bytes`);A.writeFixedArray(ue)}else if(2===ye.length&&"number"==typeof ye[1]){if(ue.length!==ye[1])throw new X(`Expecting byte array of length ${ye[1]}, but got ${ue.length} bytes`);for(let a=0;a<ye[1];a++)me(de,null,ue[a],ye[0],A)}else A.writeArray(ue,a=>{me(de,Z,a,ye[0],A)});else if(void 0!==ye.kind)switch(ye.kind){case"option":null==ue?A.writeU8(0):(A.writeU8(1),me(de,Z,ue,ye.type,A));break;case"map":A.writeU32(ue.size),ue.forEach((a,h)=>{me(de,Z,h,ye.key,A),me(de,Z,a,ye.value,A)});break;default:throw new X(`FieldType ${ye} unrecognized`)}else Se(de,ue,A)}catch(a){throw a instanceof X&&a.addToFieldPath(Z),a}}function Se(de,Z,ue){if("function"==typeof Z.borshSerialize)return void Z.borshSerialize(ue);const ye=de.get(Z.constructor);if(!ye)throw new X(`Class ${Z.constructor.name} is missing in schema`);if("struct"===ye.kind)ye.fields.map(([A,a])=>{me(de,A,Z[A],a,ue)});else{if("enum"!==ye.kind)throw new X(`Unexpected schema kind: ${ye.kind} for ${Z.constructor.name}`);{const A=Z[ye.field];for(let a=0;a<ye.values.length;++a){const[h,y]=ye.values[a];if(h===A){ue.writeU8(a),me(de,h,Z[h],y,ue);break}}}}}function Me(de,Z,ue,ye){try{if("string"==typeof ue)return ye[`read${ve(ue)}`]();if(ue instanceof Array){if("number"==typeof ue[0])return ye.readFixedArray(ue[0]);if("number"==typeof ue[1]){const A=[];for(let a=0;a<ue[1];a++)A.push(Me(de,null,ue[0],ye));return A}return ye.readArray(()=>Me(de,Z,ue[0],ye))}if("option"===ue.kind)return ye.readU8()?Me(de,Z,ue.type,ye):void 0;if("map"===ue.kind){let A=new Map;const a=ye.readU32();for(let h=0;h<a;h++){const y=Me(de,Z,ue.key,ye),S=Me(de,Z,ue.value,ye);A.set(y,S)}return A}return Ue(de,ue,ye)}catch(A){throw A instanceof X&&A.addToFieldPath(Z),A}}function Ue(de,Z,ue){if("function"==typeof Z.borshDeserialize)return Z.borshDeserialize(ue);const ye=de.get(Z);if(!ye)throw new X(`Class ${Z.name} is missing in schema`);if("struct"===ye.kind){const A={};for(const[a,h]of de.get(Z).fields)A[a]=Me(de,a,h,ue);return new Z(A)}if("enum"===ye.kind){const A=ue.readU8();if(A>=ye.values.length)throw new X(`Enum index: ${A} is out of range`);const[a,h]=ye.values[A],y=Me(de,a,h,ue);return new Z({[a]:y})}throw new X(`Unexpected schema kind: ${ye.kind} for ${Z.constructor.name}`)}q([Q],Y.prototype,"readU8",null),q([Q],Y.prototype,"readU16",null),q([Q],Y.prototype,"readU32",null),q([Q],Y.prototype,"readU64",null),q([Q],Y.prototype,"readU128",null),q([Q],Y.prototype,"readU256",null),q([Q],Y.prototype,"readU512",null),q([Q],Y.prototype,"readString",null),q([Q],Y.prototype,"readFixedArray",null),q([Q],Y.prototype,"readArray",null),Ne.BinaryReader=Y,Ne.serialize=function he(de,Z,ue=De){const ye=new ue;return Se(de,Z,ye),ye.toArray()},Ne.deserialize=function ze(de,Z,ue,ye=Y){const A=new ye(ue),a=Ue(de,Z,A);if(A.offset<ue.length)throw new X(`Unexpected ${ue.length-A.offset} bytes after deserialized data`);return a},Ne.deserializeUnchecked=function Qe(de,Z,ue,ye=Y){return Ue(de,Z,new ye(ue))}},3838:(Rt,Ne,ge)=>{"use strict";const w=ge(3981),ce=ge(2020),q="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Ne.Buffer=T,Ne.SlowBuffer=function ve(m){return+m!=m&&(m=0),T.alloc(+m)},Ne.INSPECT_MAX_BYTES=50;const te=2147483647;function j(m){if(m>te)throw new RangeError('The value "'+m+'" is invalid for option "size"');const c=new Uint8Array(m);return Object.setPrototypeOf(c,T.prototype),c}function T(m,c,f){if("number"==typeof m){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return Ce(m)}return fe(m,c,f)}function fe(m,c,f){if("string"==typeof m)return function Oe(m,c){if(("string"!=typeof c||""===c)&&(c="utf8"),!T.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const f=0|me(m,c);let v=j(f);const D=v.write(m,c);return D!==f&&(v=v.slice(0,D)),v}(m,c);if(ArrayBuffer.isView(m))return function X(m){if(ft(m,Uint8Array)){const c=new Uint8Array(m);return De(c.buffer,c.byteOffset,c.byteLength)}return ae(m)}(m);if(null==m)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(ft(m,ArrayBuffer)||m&&ft(m.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ft(m,SharedArrayBuffer)||m&&ft(m.buffer,SharedArrayBuffer)))return De(m,c,f);if("number"==typeof m)throw new TypeError('The "value" argument must not be of type number. Received type number');const v=m.valueOf&&m.valueOf();if(null!=v&&v!==m)return T.from(v,c,f);const D=function Q(m){if(T.isBuffer(m)){const c=0|Y(m.length),f=j(c);return 0===f.length||m.copy(f,0,0,c),f}return void 0!==m.length?"number"!=typeof m.length||Cn(m.length)?j(0):ae(m):"Buffer"===m.type&&Array.isArray(m.data)?ae(m.data):void 0}(m);if(D)return D;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof m[Symbol.toPrimitive])return T.from(m[Symbol.toPrimitive]("string"),c,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}function p(m){if("number"!=typeof m)throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function Ce(m){return p(m),j(m<0?0:0|Y(m))}function ae(m){const c=m.length<0?0:0|Y(m.length),f=j(c);for(let v=0;v<c;v+=1)f[v]=255&m[v];return f}function De(m,c,f){if(c<0||m.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<c+(f||0))throw new RangeError('"length" is outside of buffer bounds');let v;return v=void 0===c&&void 0===f?new Uint8Array(m):void 0===f?new Uint8Array(m,c):new Uint8Array(m,c,f),Object.setPrototypeOf(v,T.prototype),v}function Y(m){if(m>=te)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+te.toString(16)+" bytes");return 0|m}function me(m,c){if(T.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||ft(m,ArrayBuffer))return m.byteLength;if("string"!=typeof m)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const f=m.length,v=arguments.length>2&&!0===arguments[2];if(!v&&0===f)return 0;let D=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return hn(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*f;case"hex":return f>>>1;case"base64":return fn(m).length;default:if(D)return v?-1:hn(m).length;c=(""+c).toLowerCase(),D=!0}}function Se(m,c,f){let v=!1;if((void 0===c||c<0)&&(c=0),c>this.length||((void 0===f||f>this.length)&&(f=this.length),f<=0)||(f>>>=0)<=(c>>>=0))return"";for(m||(m="utf8");;)switch(m){case"hex":return O(this,c,f);case"utf8":case"utf-8":return A(this,c,f);case"ascii":return y(this,c,f);case"latin1":case"binary":return S(this,c,f);case"base64":return ye(this,c,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,c,f);default:if(v)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),v=!0}}function he(m,c,f){const v=m[c];m[c]=m[f],m[f]=v}function Me(m,c,f,v,D){if(0===m.length)return-1;if("string"==typeof f?(v=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),Cn(f=+f)&&(f=D?0:m.length-1),f<0&&(f=m.length+f),f>=m.length){if(D)return-1;f=m.length-1}else if(f<0){if(!D)return-1;f=0}if("string"==typeof c&&(c=T.from(c,v)),T.isBuffer(c))return 0===c.length?-1:Ue(m,c,f,v,D);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?D?Uint8Array.prototype.indexOf.call(m,c,f):Uint8Array.prototype.lastIndexOf.call(m,c,f):Ue(m,[c],f,v,D);throw new TypeError("val must be string, number or Buffer")}function Ue(m,c,f,v,D){let Xe,W=1,J=m.length,Be=c.length;if(void 0!==v&&("ucs2"===(v=String(v).toLowerCase())||"ucs-2"===v||"utf16le"===v||"utf-16le"===v)){if(m.length<2||c.length<2)return-1;W=2,J/=2,Be/=2,f/=2}function At(Ze,pt){return 1===W?Ze[pt]:Ze.readUInt16BE(pt*W)}if(D){let Ze=-1;for(Xe=f;Xe<J;Xe++)if(At(m,Xe)===At(c,-1===Ze?0:Xe-Ze)){if(-1===Ze&&(Ze=Xe),Xe-Ze+1===Be)return Ze*W}else-1!==Ze&&(Xe-=Xe-Ze),Ze=-1}else for(f+Be>J&&(f=J-Be),Xe=f;Xe>=0;Xe--){let Ze=!0;for(let pt=0;pt<Be;pt++)if(At(m,Xe+pt)!==At(c,pt)){Ze=!1;break}if(Ze)return Xe}return-1}function ze(m,c,f,v){f=Number(f)||0;const D=m.length-f;v?(v=Number(v))>D&&(v=D):v=D;const W=c.length;let J;for(v>W/2&&(v=W/2),J=0;J<v;++J){const Be=parseInt(c.substr(2*J,2),16);if(Cn(Be))return J;m[f+J]=Be}return J}function Qe(m,c,f,v){return It(hn(c,m.length-f),m,f,v)}function de(m,c,f,v){return It(function yt(m){const c=[];for(let f=0;f<m.length;++f)c.push(255&m.charCodeAt(f));return c}(c),m,f,v)}function Z(m,c,f,v){return It(fn(c),m,f,v)}function ue(m,c,f,v){return It(function St(m,c){let f,v,D;const W=[];for(let J=0;J<m.length&&!((c-=2)<0);++J)f=m.charCodeAt(J),v=f>>8,D=f%256,W.push(D),W.push(v);return W}(c,m.length-f),m,f,v)}function ye(m,c,f){return w.fromByteArray(0===c&&f===m.length?m:m.slice(c,f))}function A(m,c,f){f=Math.min(m.length,f);const v=[];let D=c;for(;D<f;){const W=m[D];let J=null,Be=W>239?4:W>223?3:W>191?2:1;if(D+Be<=f){let At,Xe,Ze,pt;switch(Be){case 1:W<128&&(J=W);break;case 2:At=m[D+1],128==(192&At)&&(pt=(31&W)<<6|63&At,pt>127&&(J=pt));break;case 3:At=m[D+1],Xe=m[D+2],128==(192&At)&&128==(192&Xe)&&(pt=(15&W)<<12|(63&At)<<6|63&Xe,pt>2047&&(pt<55296||pt>57343)&&(J=pt));break;case 4:At=m[D+1],Xe=m[D+2],Ze=m[D+3],128==(192&At)&&128==(192&Xe)&&128==(192&Ze)&&(pt=(15&W)<<18|(63&At)<<12|(63&Xe)<<6|63&Ze,pt>65535&&pt<1114112&&(J=pt))}}null===J?(J=65533,Be=1):J>65535&&(J-=65536,v.push(J>>>10&1023|55296),J=56320|1023&J),v.push(J),D+=Be}return function h(m){const c=m.length;if(c<=a)return String.fromCharCode.apply(String,m);let f="",v=0;for(;v<c;)f+=String.fromCharCode.apply(String,m.slice(v,v+=a));return f}(v)}Ne.kMaxLength=te,!(T.TYPED_ARRAY_SUPPORT=function R(){try{const m=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(m,c),42===m.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(T.prototype,"parent",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.buffer}}),Object.defineProperty(T.prototype,"offset",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.byteOffset}}),T.poolSize=8192,T.from=function(m,c,f){return fe(m,c,f)},Object.setPrototypeOf(T.prototype,Uint8Array.prototype),Object.setPrototypeOf(T,Uint8Array),T.alloc=function(m,c,f){return function Ee(m,c,f){return p(m),m<=0?j(m):void 0!==c?"string"==typeof f?j(m).fill(c,f):j(m).fill(c):j(m)}(m,c,f)},T.allocUnsafe=function(m){return Ce(m)},T.allocUnsafeSlow=function(m){return Ce(m)},T.isBuffer=function(c){return null!=c&&!0===c._isBuffer&&c!==T.prototype},T.compare=function(c,f){if(ft(c,Uint8Array)&&(c=T.from(c,c.offset,c.byteLength)),ft(f,Uint8Array)&&(f=T.from(f,f.offset,f.byteLength)),!T.isBuffer(c)||!T.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===f)return 0;let v=c.length,D=f.length;for(let W=0,J=Math.min(v,D);W<J;++W)if(c[W]!==f[W]){v=c[W],D=f[W];break}return v<D?-1:D<v?1:0},T.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(c,f){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(0===c.length)return T.alloc(0);let v;if(void 0===f)for(f=0,v=0;v<c.length;++v)f+=c[v].length;const D=T.allocUnsafe(f);let W=0;for(v=0;v<c.length;++v){let J=c[v];if(ft(J,Uint8Array))W+J.length>D.length?(T.isBuffer(J)||(J=T.from(J)),J.copy(D,W)):Uint8Array.prototype.set.call(D,J,W);else{if(!T.isBuffer(J))throw new TypeError('"list" argument must be an Array of Buffers');J.copy(D,W)}W+=J.length}return D},T.byteLength=me,T.prototype._isBuffer=!0,T.prototype.swap16=function(){const c=this.length;if(c%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<c;f+=2)he(this,f,f+1);return this},T.prototype.swap32=function(){const c=this.length;if(c%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<c;f+=4)he(this,f,f+3),he(this,f+1,f+2);return this},T.prototype.swap64=function(){const c=this.length;if(c%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<c;f+=8)he(this,f,f+7),he(this,f+1,f+6),he(this,f+2,f+5),he(this,f+3,f+4);return this},T.prototype.toLocaleString=T.prototype.toString=function(){const c=this.length;return 0===c?"":0===arguments.length?A(this,0,c):Se.apply(this,arguments)},T.prototype.equals=function(c){if(!T.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c||0===T.compare(this,c)},T.prototype.inspect=function(){let c="";const f=Ne.INSPECT_MAX_BYTES;return c=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(c+=" ... "),"<Buffer "+c+">"},q&&(T.prototype[q]=T.prototype.inspect),T.prototype.compare=function(c,f,v,D,W){if(ft(c,Uint8Array)&&(c=T.from(c,c.offset,c.byteLength)),!T.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(void 0===f&&(f=0),void 0===v&&(v=c?c.length:0),void 0===D&&(D=0),void 0===W&&(W=this.length),f<0||v>c.length||D<0||W>this.length)throw new RangeError("out of range index");if(D>=W&&f>=v)return 0;if(D>=W)return-1;if(f>=v)return 1;if(this===c)return 0;let J=(W>>>=0)-(D>>>=0),Be=(v>>>=0)-(f>>>=0);const At=Math.min(J,Be),Xe=this.slice(D,W),Ze=c.slice(f,v);for(let pt=0;pt<At;++pt)if(Xe[pt]!==Ze[pt]){J=Xe[pt],Be=Ze[pt];break}return J<Be?-1:Be<J?1:0},T.prototype.includes=function(c,f,v){return-1!==this.indexOf(c,f,v)},T.prototype.indexOf=function(c,f,v){return Me(this,c,f,v,!0)},T.prototype.lastIndexOf=function(c,f,v){return Me(this,c,f,v,!1)},T.prototype.write=function(c,f,v,D){if(void 0===f)D="utf8",v=this.length,f=0;else if(void 0===v&&"string"==typeof f)D=f,v=this.length,f=0;else{if(!isFinite(f))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");f>>>=0,isFinite(v)?(v>>>=0,void 0===D&&(D="utf8")):(D=v,v=void 0)}const W=this.length-f;if((void 0===v||v>W)&&(v=W),c.length>0&&(v<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");let J=!1;for(;;)switch(D){case"hex":return ze(this,c,f,v);case"utf8":case"utf-8":return Qe(this,c,f,v);case"ascii":case"latin1":case"binary":return de(this,c,f,v);case"base64":return Z(this,c,f,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,c,f,v);default:if(J)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),J=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const a=4096;function y(m,c,f){let v="";f=Math.min(m.length,f);for(let D=c;D<f;++D)v+=String.fromCharCode(127&m[D]);return v}function S(m,c,f){let v="";f=Math.min(m.length,f);for(let D=c;D<f;++D)v+=String.fromCharCode(m[D]);return v}function O(m,c,f){const v=m.length;(!c||c<0)&&(c=0),(!f||f<0||f>v)&&(f=v);let D="";for(let W=c;W<f;++W)D+=bt[m[W]];return D}function U(m,c,f){const v=m.slice(c,f);let D="";for(let W=0;W<v.length-1;W+=2)D+=String.fromCharCode(v[W]+256*v[W+1]);return D}function F(m,c,f){if(m%1!=0||m<0)throw new RangeError("offset is not uint");if(m+c>f)throw new RangeError("Trying to access beyond buffer length")}function I(m,c,f,v,D,W){if(!T.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>D||c<W)throw new RangeError('"value" argument is out of bounds');if(f+v>m.length)throw new RangeError("Index out of range")}function d(m,c,f,v,D){ee(c,v,D,m,f,7);let W=Number(c&BigInt(4294967295));m[f++]=W,W>>=8,m[f++]=W,W>>=8,m[f++]=W,W>>=8,m[f++]=W;let J=Number(c>>BigInt(32)&BigInt(4294967295));return m[f++]=J,J>>=8,m[f++]=J,J>>=8,m[f++]=J,J>>=8,m[f++]=J,f}function _(m,c,f,v,D){ee(c,v,D,m,f,7);let W=Number(c&BigInt(4294967295));m[f+7]=W,W>>=8,m[f+6]=W,W>>=8,m[f+5]=W,W>>=8,m[f+4]=W;let J=Number(c>>BigInt(32)&BigInt(4294967295));return m[f+3]=J,J>>=8,m[f+2]=J,J>>=8,m[f+1]=J,J>>=8,m[f]=J,f+8}function g(m,c,f,v,D,W){if(f+v>m.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function E(m,c,f,v,D){return c=+c,f>>>=0,D||g(m,0,f,4),ce.write(m,c,f,v,23,4),f+4}function k(m,c,f,v,D){return c=+c,f>>>=0,D||g(m,0,f,8),ce.write(m,c,f,v,52,8),f+8}T.prototype.slice=function(c,f){const v=this.length;(c=~~c)<0?(c+=v)<0&&(c=0):c>v&&(c=v),(f=void 0===f?v:~~f)<0?(f+=v)<0&&(f=0):f>v&&(f=v),f<c&&(f=c);const D=this.subarray(c,f);return Object.setPrototypeOf(D,T.prototype),D},T.prototype.readUintLE=T.prototype.readUIntLE=function(c,f,v){c>>>=0,f>>>=0,v||F(c,f,this.length);let D=this[c],W=1,J=0;for(;++J<f&&(W*=256);)D+=this[c+J]*W;return D},T.prototype.readUintBE=T.prototype.readUIntBE=function(c,f,v){c>>>=0,f>>>=0,v||F(c,f,this.length);let D=this[c+--f],W=1;for(;f>0&&(W*=256);)D+=this[c+--f]*W;return D},T.prototype.readUint8=T.prototype.readUInt8=function(c,f){return c>>>=0,f||F(c,1,this.length),this[c]},T.prototype.readUint16LE=T.prototype.readUInt16LE=function(c,f){return c>>>=0,f||F(c,2,this.length),this[c]|this[c+1]<<8},T.prototype.readUint16BE=T.prototype.readUInt16BE=function(c,f){return c>>>=0,f||F(c,2,this.length),this[c]<<8|this[c+1]},T.prototype.readUint32LE=T.prototype.readUInt32LE=function(c,f){return c>>>=0,f||F(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]},T.prototype.readUint32BE=T.prototype.readUInt32BE=function(c,f){return c>>>=0,f||F(c,4,this.length),16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])},T.prototype.readBigUInt64LE=st(function(c){be(c>>>=0,"offset");const f=this[c],v=this[c+7];(void 0===f||void 0===v)&&lt(c,this.length-8);const D=f+256*this[++c]+65536*this[++c]+this[++c]*2**24,W=this[++c]+256*this[++c]+65536*this[++c]+v*2**24;return BigInt(D)+(BigInt(W)<<BigInt(32))}),T.prototype.readBigUInt64BE=st(function(c){be(c>>>=0,"offset");const f=this[c],v=this[c+7];(void 0===f||void 0===v)&&lt(c,this.length-8);const D=f*2**24+65536*this[++c]+256*this[++c]+this[++c],W=this[++c]*2**24+65536*this[++c]+256*this[++c]+v;return(BigInt(D)<<BigInt(32))+BigInt(W)}),T.prototype.readIntLE=function(c,f,v){c>>>=0,f>>>=0,v||F(c,f,this.length);let D=this[c],W=1,J=0;for(;++J<f&&(W*=256);)D+=this[c+J]*W;return W*=128,D>=W&&(D-=Math.pow(2,8*f)),D},T.prototype.readIntBE=function(c,f,v){c>>>=0,f>>>=0,v||F(c,f,this.length);let D=f,W=1,J=this[c+--D];for(;D>0&&(W*=256);)J+=this[c+--D]*W;return W*=128,J>=W&&(J-=Math.pow(2,8*f)),J},T.prototype.readInt8=function(c,f){return c>>>=0,f||F(c,1,this.length),128&this[c]?-1*(255-this[c]+1):this[c]},T.prototype.readInt16LE=function(c,f){c>>>=0,f||F(c,2,this.length);const v=this[c]|this[c+1]<<8;return 32768&v?4294901760|v:v},T.prototype.readInt16BE=function(c,f){c>>>=0,f||F(c,2,this.length);const v=this[c+1]|this[c]<<8;return 32768&v?4294901760|v:v},T.prototype.readInt32LE=function(c,f){return c>>>=0,f||F(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},T.prototype.readInt32BE=function(c,f){return c>>>=0,f||F(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},T.prototype.readBigInt64LE=st(function(c){be(c>>>=0,"offset");const f=this[c],v=this[c+7];return(void 0===f||void 0===v)&&lt(c,this.length-8),(BigInt(this[c+4]+256*this[c+5]+65536*this[c+6]+(v<<24))<<BigInt(32))+BigInt(f+256*this[++c]+65536*this[++c]+this[++c]*2**24)}),T.prototype.readBigInt64BE=st(function(c){be(c>>>=0,"offset");const f=this[c],v=this[c+7];(void 0===f||void 0===v)&&lt(c,this.length-8);const D=(f<<24)+65536*this[++c]+256*this[++c]+this[++c];return(BigInt(D)<<BigInt(32))+BigInt(this[++c]*2**24+65536*this[++c]+256*this[++c]+v)}),T.prototype.readFloatLE=function(c,f){return c>>>=0,f||F(c,4,this.length),ce.read(this,c,!0,23,4)},T.prototype.readFloatBE=function(c,f){return c>>>=0,f||F(c,4,this.length),ce.read(this,c,!1,23,4)},T.prototype.readDoubleLE=function(c,f){return c>>>=0,f||F(c,8,this.length),ce.read(this,c,!0,52,8)},T.prototype.readDoubleBE=function(c,f){return c>>>=0,f||F(c,8,this.length),ce.read(this,c,!1,52,8)},T.prototype.writeUintLE=T.prototype.writeUIntLE=function(c,f,v,D){c=+c,f>>>=0,v>>>=0,D||I(this,c,f,v,Math.pow(2,8*v)-1,0);let W=1,J=0;for(this[f]=255&c;++J<v&&(W*=256);)this[f+J]=c/W&255;return f+v},T.prototype.writeUintBE=T.prototype.writeUIntBE=function(c,f,v,D){c=+c,f>>>=0,v>>>=0,D||I(this,c,f,v,Math.pow(2,8*v)-1,0);let W=v-1,J=1;for(this[f+W]=255&c;--W>=0&&(J*=256);)this[f+W]=c/J&255;return f+v},T.prototype.writeUint8=T.prototype.writeUInt8=function(c,f,v){return c=+c,f>>>=0,v||I(this,c,f,1,255,0),this[f]=255&c,f+1},T.prototype.writeUint16LE=T.prototype.writeUInt16LE=function(c,f,v){return c=+c,f>>>=0,v||I(this,c,f,2,65535,0),this[f]=255&c,this[f+1]=c>>>8,f+2},T.prototype.writeUint16BE=T.prototype.writeUInt16BE=function(c,f,v){return c=+c,f>>>=0,v||I(this,c,f,2,65535,0),this[f]=c>>>8,this[f+1]=255&c,f+2},T.prototype.writeUint32LE=T.prototype.writeUInt32LE=function(c,f,v){return c=+c,f>>>=0,v||I(this,c,f,4,4294967295,0),this[f+3]=c>>>24,this[f+2]=c>>>16,this[f+1]=c>>>8,this[f]=255&c,f+4},T.prototype.writeUint32BE=T.prototype.writeUInt32BE=function(c,f,v){return c=+c,f>>>=0,v||I(this,c,f,4,4294967295,0),this[f]=c>>>24,this[f+1]=c>>>16,this[f+2]=c>>>8,this[f+3]=255&c,f+4},T.prototype.writeBigUInt64LE=st(function(c,f=0){return d(this,c,f,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeBigUInt64BE=st(function(c,f=0){return _(this,c,f,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeIntLE=function(c,f,v,D){if(c=+c,f>>>=0,!D){const At=Math.pow(2,8*v-1);I(this,c,f,v,At-1,-At)}let W=0,J=1,Be=0;for(this[f]=255&c;++W<v&&(J*=256);)c<0&&0===Be&&0!==this[f+W-1]&&(Be=1),this[f+W]=(c/J|0)-Be&255;return f+v},T.prototype.writeIntBE=function(c,f,v,D){if(c=+c,f>>>=0,!D){const At=Math.pow(2,8*v-1);I(this,c,f,v,At-1,-At)}let W=v-1,J=1,Be=0;for(this[f+W]=255&c;--W>=0&&(J*=256);)c<0&&0===Be&&0!==this[f+W+1]&&(Be=1),this[f+W]=(c/J|0)-Be&255;return f+v},T.prototype.writeInt8=function(c,f,v){return c=+c,f>>>=0,v||I(this,c,f,1,127,-128),c<0&&(c=255+c+1),this[f]=255&c,f+1},T.prototype.writeInt16LE=function(c,f,v){return c=+c,f>>>=0,v||I(this,c,f,2,32767,-32768),this[f]=255&c,this[f+1]=c>>>8,f+2},T.prototype.writeInt16BE=function(c,f,v){return c=+c,f>>>=0,v||I(this,c,f,2,32767,-32768),this[f]=c>>>8,this[f+1]=255&c,f+2},T.prototype.writeInt32LE=function(c,f,v){return c=+c,f>>>=0,v||I(this,c,f,4,2147483647,-2147483648),this[f]=255&c,this[f+1]=c>>>8,this[f+2]=c>>>16,this[f+3]=c>>>24,f+4},T.prototype.writeInt32BE=function(c,f,v){return c=+c,f>>>=0,v||I(this,c,f,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[f]=c>>>24,this[f+1]=c>>>16,this[f+2]=c>>>8,this[f+3]=255&c,f+4},T.prototype.writeBigInt64LE=st(function(c,f=0){return d(this,c,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),T.prototype.writeBigInt64BE=st(function(c,f=0){return _(this,c,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),T.prototype.writeFloatLE=function(c,f,v){return E(this,c,f,!0,v)},T.prototype.writeFloatBE=function(c,f,v){return E(this,c,f,!1,v)},T.prototype.writeDoubleLE=function(c,f,v){return k(this,c,f,!0,v)},T.prototype.writeDoubleBE=function(c,f,v){return k(this,c,f,!1,v)},T.prototype.copy=function(c,f,v,D){if(!T.isBuffer(c))throw new TypeError("argument should be a Buffer");if(v||(v=0),!D&&0!==D&&(D=this.length),f>=c.length&&(f=c.length),f||(f=0),D>0&&D<v&&(D=v),D===v||0===c.length||0===this.length)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),c.length-f<D-v&&(D=c.length-f+v);const W=D-v;return this===c&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(f,v,D):Uint8Array.prototype.set.call(c,this.subarray(v,D),f),W},T.prototype.fill=function(c,f,v,D){if("string"==typeof c){if("string"==typeof f?(D=f,f=0,v=this.length):"string"==typeof v&&(D=v,v=this.length),void 0!==D&&"string"!=typeof D)throw new TypeError("encoding must be a string");if("string"==typeof D&&!T.isEncoding(D))throw new TypeError("Unknown encoding: "+D);if(1===c.length){const J=c.charCodeAt(0);("utf8"===D&&J<128||"latin1"===D)&&(c=J)}}else"number"==typeof c?c&=255:"boolean"==typeof c&&(c=Number(c));if(f<0||this.length<f||this.length<v)throw new RangeError("Out of range index");if(v<=f)return this;let W;if(f>>>=0,v=void 0===v?this.length:v>>>0,c||(c=0),"number"==typeof c)for(W=f;W<v;++W)this[W]=c;else{const J=T.isBuffer(c)?c:T.from(c,D),Be=J.length;if(0===Be)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(W=0;W<v-f;++W)this[W+f]=J[W%Be]}return this};const L={};function $(m,c,f){L[m]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,delete this.name}get code(){return m}set code(D){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:D,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}function G(m){let c="",f=m.length;const v="-"===m[0]?1:0;for(;f>=v+4;f-=3)c=`_${m.slice(f-3,f)}${c}`;return`${m.slice(0,f)}${c}`}function ee(m,c,f,v,D,W){if(m>f||m<c){const J="bigint"==typeof c?"n":"";let Be;throw Be=W>3?0===c||c===BigInt(0)?`>= 0${J} and < 2${J} ** ${8*(W+1)}${J}`:`>= -(2${J} ** ${8*(W+1)-1}${J}) and < 2 ** ${8*(W+1)-1}${J}`:`>= ${c}${J} and <= ${f}${J}`,new L.ERR_OUT_OF_RANGE("value",Be,m)}!function se(m,c,f){be(c,"offset"),(void 0===m[c]||void 0===m[c+f])&&lt(c,m.length-(f+1))}(v,D,W)}function be(m,c){if("number"!=typeof m)throw new L.ERR_INVALID_ARG_TYPE(c,"number",m)}function lt(m,c,f){throw Math.floor(m)!==m?(be(m,f),new L.ERR_OUT_OF_RANGE(f||"offset","an integer",m)):c<0?new L.ERR_BUFFER_OUT_OF_BOUNDS:new L.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${c}`,m)}$("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$("ERR_INVALID_ARG_TYPE",function(m,c){return`The "${m}" argument must be of type number. Received type ${typeof c}`},TypeError),$("ERR_OUT_OF_RANGE",function(m,c,f){let v=`The value of "${m}" is out of range.`,D=f;return Number.isInteger(f)&&Math.abs(f)>2**32?D=G(String(f)):"bigint"==typeof f&&(D=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(D=G(D)),D+="n"),v+=` It must be ${c}. Received ${D}`,v},RangeError);const qe=/[^+/0-9A-Za-z-_]/g;function hn(m,c){let f;c=c||1/0;const v=m.length;let D=null;const W=[];for(let J=0;J<v;++J){if(f=m.charCodeAt(J),f>55295&&f<57344){if(!D){if(f>56319){(c-=3)>-1&&W.push(239,191,189);continue}if(J+1===v){(c-=3)>-1&&W.push(239,191,189);continue}D=f;continue}if(f<56320){(c-=3)>-1&&W.push(239,191,189),D=f;continue}f=65536+(D-55296<<10|f-56320)}else D&&(c-=3)>-1&&W.push(239,191,189);if(D=null,f<128){if((c-=1)<0)break;W.push(f)}else if(f<2048){if((c-=2)<0)break;W.push(f>>6|192,63&f|128)}else if(f<65536){if((c-=3)<0)break;W.push(f>>12|224,f>>6&63|128,63&f|128)}else{if(!(f<1114112))throw new Error("Invalid code point");if((c-=4)<0)break;W.push(f>>18|240,f>>12&63|128,f>>6&63|128,63&f|128)}}return W}function fn(m){return w.toByteArray(function et(m){if((m=(m=m.split("=")[0]).trim().replace(qe,"")).length<2)return"";for(;m.length%4!=0;)m+="=";return m}(m))}function It(m,c,f,v){let D;for(D=0;D<v&&!(D+f>=c.length||D>=m.length);++D)c[D+f]=m[D];return D}function ft(m,c){return m instanceof c||null!=m&&null!=m.constructor&&null!=m.constructor.name&&m.constructor.name===c.name}function Cn(m){return m!=m}const bt=function(){const m="0123456789abcdef",c=new Array(256);for(let f=0;f<16;++f){const v=16*f;for(let D=0;D<16;++D)c[v+D]=m[f]+m[D]}return c}();function st(m){return typeof BigInt>"u"?Bn:m}function Bn(){throw new Error("BigInt not supported")}},3981:(Rt,Ne)=>{"use strict";Ne.byteLength=function T(ae){var X=j(ae),Q=X[1];return 3*(X[0]+Q)/4-Q},Ne.toByteArray=function p(ae){var X,he,De=j(ae),Q=De[0],Y=De[1],ve=new ce(function fe(ae,X,De){return 3*(X+De)/4-De}(0,Q,Y)),me=0,Se=Y>0?Q-4:Q;for(he=0;he<Se;he+=4)X=w[ae.charCodeAt(he)]<<18|w[ae.charCodeAt(he+1)]<<12|w[ae.charCodeAt(he+2)]<<6|w[ae.charCodeAt(he+3)],ve[me++]=X>>16&255,ve[me++]=X>>8&255,ve[me++]=255&X;return 2===Y&&(X=w[ae.charCodeAt(he)]<<2|w[ae.charCodeAt(he+1)]>>4,ve[me++]=255&X),1===Y&&(X=w[ae.charCodeAt(he)]<<10|w[ae.charCodeAt(he+1)]<<4|w[ae.charCodeAt(he+2)]>>2,ve[me++]=X>>8&255,ve[me++]=255&X),ve},Ne.fromByteArray=function Oe(ae){for(var X,De=ae.length,Q=De%3,Y=[],me=0,Se=De-Q;me<Se;me+=16383)Y.push(Ce(ae,me,me+16383>Se?Se:me+16383));return 1===Q?Y.push(ge[(X=ae[De-1])>>2]+ge[X<<4&63]+"=="):2===Q&&Y.push(ge[(X=(ae[De-2]<<8)+ae[De-1])>>10]+ge[X>>4&63]+ge[X<<2&63]+"="),Y.join("")};for(var ge=[],w=[],ce=typeof Uint8Array<"u"?Uint8Array:Array,q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",te=0;te<64;++te)ge[te]=q[te],w[q.charCodeAt(te)]=te;function j(ae){var X=ae.length;if(X%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var De=ae.indexOf("=");return-1===De&&(De=X),[De,De===X?0:4-De%4]}function Ee(ae){return ge[ae>>18&63]+ge[ae>>12&63]+ge[ae>>6&63]+ge[63&ae]}function Ce(ae,X,De){for(var Y=[],ve=X;ve<De;ve+=3)Y.push(Ee((ae[ve]<<16&16711680)+(ae[ve+1]<<8&65280)+(255&ae[ve+2])));return Y.join("")}w[45]=62,w[95]=63},5538:(Rt,Ne,ge)=>{var w=ge(7741);Rt.exports=w("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},5749:(Rt,Ne,ge)=>{"use strict";const w=ge(2097).v4,ce=ge(6384),q=function(te,R){if(!(this instanceof q))return new q(te,R);R||(R={}),this.options={reviver:typeof R.reviver<"u"?R.reviver:null,replacer:typeof R.replacer<"u"?R.replacer:null,generator:typeof R.generator<"u"?R.generator:function(){return w()},version:typeof R.version<"u"?R.version:2,notificationIdNull:"boolean"==typeof R.notificationIdNull&&R.notificationIdNull},this.callServer=te};Rt.exports=q,q.prototype.request=function(te,R,j,T){const fe=this;let p=null;const Ee=Array.isArray(te)&&"function"==typeof R;if(1===this.options.version&&Ee)throw new TypeError("JSON-RPC 1.0 does not support batching");if(Ee||!Ee&&te&&"object"==typeof te&&"function"==typeof R)T=R,p=te;else{"function"==typeof j&&(T=j,j=void 0);const ae="function"==typeof T;try{p=ce(te,R,j,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(X){if(ae)return T(X);throw X}if(!ae)return p}let Oe;try{Oe=JSON.stringify(p,this.options.replacer)}catch(ae){return T(ae)}return this.callServer(Oe,function(ae,X){fe._parseResponse(ae,X,T)}),p},q.prototype._parseResponse=function(te,R,j){if(te)return void j(te);if(!R)return j();let T;try{T=JSON.parse(R,this.options.reviver)}catch(fe){return j(fe)}if(3===j.length){if(Array.isArray(T)){const fe=function(Ee){return typeof Ee.error<"u"},p=function(Ee){return!fe(Ee)};return j(null,T.filter(fe),T.filter(p))}return j(null,T.error,T.result)}j(null,T)}},5802:(Rt,Ne,ge)=>{"use strict";ge.r(Ne),ge.d(Ne,{NftDetailPageModule:()=>k});var w=ge(2200),ce=ge(4341),q=ge(9893),te=ge(8132),R=ge(467),j=ge(5312),T=ge(5083);const fe=(0,T.F3)("Browser",{web:()=>ge.e(4786).then(ge.bind(ge,4786)).then(L=>new L.BrowserWeb)});var p=ge(3664),Ee=ge(2615),Ce=ge(9330),Oe=ge(6991),ae=ge(3205),X=ge(5910),De=ge(1350),Q=ge(3144),Y=ge(3469);const ve=()=>["/explorer"],me=()=>["/all-collection"],Se=(L,$)=>({"slide-up":L,"slide-down":$});function he(L,$){1&L&&(p.j41(0,"a",12),p.EFF(1," Explore NFT"),p.nrm(2,"i",13),p.k0s()),2&L&&p.Y8G("routerLink",p.lJ4(1,ve))}function Me(L,$){1&L&&(p.j41(0,"a",12),p.EFF(1," All Collection"),p.nrm(2,"i",13),p.k0s()),2&L&&p.Y8G("routerLink",p.lJ4(1,me))}function Ue(L,$){if(1&L&&(p.j41(0,"div",14)(1,"div",15)(2,"div",16)(3,"a",17),p.nrm(4,"img",18),p.k0s()(),p.j41(5,"h6",19),p.nrm(6,"img",20),p.k0s(),p.j41(7,"div",21),p.EFF(8,"10"),p.nrm(9,"i",22),p.k0s(),p.j41(10,"div",23),p.nrm(11,"span",24),p.k0s()()()),2&L){const G=p.XpG();p.R7$(4),p.Y8G("alt",p.mNQ(G.metadata.name))("src",G.metadata.image||"assets/images/box-item/product-detail-01.jpg",p.B4B)}}function ze(L,$){if(1&L){const G=p.RV6();p.j41(0,"div",25)(1,"div",26)(2,"div",27),p.EFF(3),p.j41(4,"span",28),p.nrm(5,"span",29)(6,"span",30),p.k0s()(),p.j41(7,"div",31)(8,"div",32)(9,"div",33)(10,"a",34),p.nrm(11,"i",35),p.k0s(),p.j41(12,"div",36)(13,"a",37),p.bIt("click",function(){Ee.eBV(G);const ee=p.XpG();return Ee.Njj(ee.copyLink())}),p.nrm(14,"i",38),p.EFF(15,"Copy link"),p.k0s(),p.j41(16,"a",39),p.nrm(17,"i",40),p.EFF(18,"Share on Facebook"),p.k0s(),p.j41(19,"a",41),p.nrm(20,"i",42),p.EFF(21,"Share on Twitter"),p.k0s()()()(),p.j41(22,"div",32)(23,"div",33)(24,"a",34),p.nrm(25,"i",43),p.k0s(),p.j41(26,"div",36)(27,"a",37),p.bIt("click",function(){Ee.eBV(G);const ee=p.XpG();return Ee.Njj(ee.refreshMetadata())}),p.nrm(28,"i",44),p.EFF(29,"Refresh metadata"),p.k0s(),p.j41(30,"a",41),p.nrm(31,"i",45),p.EFF(32,"Report"),p.k0s()()()()(),p.j41(33,"h2"),p.EFF(34),p.k0s(),p.j41(35,"div",46)(36,"div",47),p.nrm(37,"i",48),p.EFF(38),p.k0s(),p.j41(39,"div",49),p.bIt("click",function(){Ee.eBV(G);const ee=p.XpG();return Ee.Njj(ee.openSolscan())}),p.nrm(40,"i",50),p.EFF(41,"Solscan"),p.k0s(),p.j41(42,"div",51),p.nrm(43,"i",52),p.EFF(44),p.k0s()()(),p.j41(45,"div",53)(46,"h6"),p.nrm(47,"i",54),p.EFF(48),p.k0s(),p.j41(49,"div",55)(50,"div",27),p.EFF(51,"Current price"),p.k0s(),p.j41(52,"div",56)(53,"p",57),p.EFF(54," SOL"),p.k0s(),p.j41(55,"a",58),p.bIt("click",function(){Ee.eBV(G);const ee=p.XpG();return Ee.Njj(ee.toggleSendModal())}),p.EFF(56,"Buy NFT"),p.nrm(57,"i",50),p.k0s()()()(),p.j41(58,"div",59)(59,"h6"),p.nrm(60,"i",54),p.EFF(61,"Description"),p.k0s(),p.nrm(62,"i",60),p.j41(63,"div",55)(64,"p"),p.EFF(65),p.k0s()()()()}if(2&L){const G=p.XpG();p.R7$(3),p.SpI(" ",G.metadata.symbol," "),p.R7$(31),p.JRh(null==G.metadata?null:G.metadata.name),p.R7$(4),p.JRh(G.shortenAddress(null==G.metadata.properties||null==G.metadata.properties.creators||null==G.metadata.properties.creators[0]?null:G.metadata.properties.creators[0].address)||"Unknown"),p.R7$(6),p.SpI("",G.metadata.seller_fee_basis_points/100,"%"),p.R7$(4),p.JRh(G.shortenAddress(G.mintAddress)),p.R7$(5),p.Y8G("innerHTML",null!=G.metadata&&G.metadata.price?G.formatWithZeroCount(G.metadata.price):"-",p.npT),p.R7$(12),p.JRh(G.metadata.description)}}function Qe(L,$){if(1&L&&(p.j41(0,"div",64)(1,"p"),p.EFF(2),p.k0s(),p.j41(3,"div",65),p.EFF(4),p.k0s()()),2&L){const G=$.$implicit;p.R7$(2),p.JRh(G.trait_type),p.R7$(2),p.JRh(G.value)}}function de(L,$){if(1&L&&(p.j41(0,"div",61)(1,"div",62)(2,"h6"),p.nrm(3,"i",54),p.EFF(4,"Traits"),p.k0s(),p.nrm(5,"i",60),p.j41(6,"div",55),p.DNE(7,Qe,5,2,"div",63),p.k0s()()()),2&L){const G=p.XpG();p.R7$(7),p.Y8G("ngForOf",G.metadata.attributes)}}function Z(L,$){if(1&L&&(p.j41(0,"div",72)(1,"div",73),p.nrm(2,"i",74),p.EFF(3),p.k0s(),p.j41(4,"div",70),p.EFF(5),p.k0s(),p.j41(6,"div",70)(7,"span",75),p.EFF(8),p.k0s()(),p.j41(9,"div",70)(10,"span",75),p.EFF(11),p.k0s()(),p.j41(12,"div",70),p.EFF(13),p.k0s()()),2&L){const G=$.$implicit,se=p.XpG(2);p.R7$(3),p.SpI("",G.event," "),p.R7$(2),p.JRh(G.amount),p.R7$(3),p.SpI(" ",G.from?se.shortenAddress(G.from):"-"," "),p.R7$(3),p.SpI(" ",G.to?se.shortenAddress(G.to):se.shortenAddress(null==se.metadata.properties||null==se.metadata.properties.creators||null==se.metadata.properties.creators[0]?null:se.metadata.properties.creators[0].address)||"Unknown"," "),p.R7$(2),p.SpI(" ",G.blockTime," ")}}function ue(L,$){if(1&L&&(p.j41(0,"div",66)(1,"div",67)(2,"h6"),p.nrm(3,"i",68),p.EFF(4,"Item activity"),p.k0s(),p.nrm(5,"i",60),p.j41(6,"div",55)(7,"div",69)(8,"div",70),p.EFF(9,"Event"),p.k0s(),p.j41(10,"div",70),p.EFF(11,"Amount"),p.k0s(),p.j41(12,"div",70),p.EFF(13,"Form"),p.k0s(),p.j41(14,"div",70),p.EFF(15,"To"),p.k0s(),p.j41(16,"div",70),p.EFF(17,"Date"),p.k0s()(),p.DNE(18,Z,14,5,"div",71),p.k0s()()()),2&L){const G=p.XpG();p.R7$(18),p.Y8G("ngForOf",G.metadata.history)}}function ye(L,$){if(1&L){const G=p.RV6();p.j41(0,"div",91),p.bIt("click",function(){const ee=Ee.eBV(G).$implicit,be=p.XpG(4);return Ee.Njj(be.buyNft(ee.mint))}),p.j41(1,"div",92)(2,"div",93)(3,"div",94),p.nrm(4,"img",18),p.k0s(),p.j41(5,"div",95),p.EFF(6),p.j41(7,"h6",96),p.EFF(8),p.k0s()()(),p.j41(9,"div",97)(10,"h6",19),p.EFF(11),p.j41(12,"div",98)(13,"span",99),p.EFF(14),p.nI1(15,"number"),p.k0s(),p.nrm(16,"i",99),p.k0s()()()()()}if(2&L){const G=$.$implicit;p.R7$(4),p.Y8G("alt",p.mNQ(G.symbol))("src",G.logoURI||"assets/images/box-item/rank-01.jpg",p.B4B),p.R7$(2),p.SpI(" ",G.symbol," "),p.R7$(2),p.JRh(G.amount),p.R7$(3),p.SpI(" $",G.usdValue," "),p.R7$(2),p.Y8G("ngClass",G.trend>0?"warning":G.trend<0?"danger":""),p.R7$(),p.Lme(" ",G.trend>0?"+":"","",p.i5U(15,10,G.percentChange,"1.2-2"),"% "),p.R7$(2),p.Y8G("ngClass",G.trend>0?"icon-arrow-up2 warning":G.trend<0?"icon-arrow-down2 danger":"")}}function A(L,$){if(1&L&&(p.j41(0,"div",89),p.DNE(1,ye,17,13,"div",90),p.k0s()),2&L){const G=p.XpG(3);p.R7$(),p.Y8G("ngForOf",G.filteredTokens)}}function a(L,$){1&L&&(p.j41(0,"div",100),p.EFF(1," No tokens found "),p.k0s())}function h(L,$){if(1&L){const G=p.RV6();p.j41(0,"div")(1,"h2",80),p.EFF(2,"Select Token to Send"),p.k0s(),p.j41(3,"form",81),p.bIt("submit",function(ee){return Ee.eBV(G),Ee.Njj(ee.preventDefault())}),p.j41(4,"input",82),p.mxI("ngModelChange",function(ee){Ee.eBV(G);const be=p.XpG(2);return p.DH7(be.tokenSearch,ee)||(be.tokenSearch=ee),Ee.Njj(ee)}),p.k0s(),p.j41(5,"button",83),p.nrm(6,"i",84),p.k0s()(),p.DNE(7,A,2,1,"div",85)(8,a,2,0,"div",86),p.j41(9,"div",87)(10,"button",88),p.bIt("click",function(){Ee.eBV(G);const ee=p.XpG(2);return Ee.Njj(ee.resetSendModal())}),p.EFF(11,"Cancel"),p.k0s()()()}if(2&L){const G=p.XpG(2);p.R7$(4),p.R50("ngModel",G.tokenSearch),p.R7$(3),p.Y8G("ngIf",G.filteredTokens.length>0),p.R7$(),p.Y8G("ngIf",0===G.filteredTokens.length)}}function y(L,$){1&L&&(p.j41(0,"h2",80),p.EFF(1,"Processing Transaction..."),p.k0s())}function S(L,$){1&L&&(p.j41(0,"div",104),p.nrm(1,"ion-spinner",105),p.k0s())}function O(L,$){if(1&L){const G=p.RV6();p.j41(0,"div",106)(1,"h2",80),p.EFF(2,"Transaction Successful"),p.k0s(),p.nrm(3,"ion-icon",107),p.j41(4,"p"),p.EFF(5),p.k0s(),p.j41(6,"a",108),p.EFF(7," View on Solscan "),p.k0s(),p.j41(8,"div",87)(9,"button",88),p.bIt("click",function(){Ee.eBV(G);const ee=p.XpG(3);return Ee.Njj(ee.resetSendModal())}),p.EFF(10," Close "),p.k0s()()()}if(2&L){const G=p.XpG(3);p.Y8G("@fadeSlide",void 0),p.R7$(5),p.Lme("You sent ",null==G.selectedToken?null:G.selectedToken.amount," ",null==G.selectedToken?null:G.selectedToken.symbol),p.R7$(),p.Y8G("href","https://solscan.io/tx/"+G.txSig+"?cluster=mainnet",p.B4B)}}function U(L,$){if(1&L&&(p.j41(0,"div"),p.DNE(1,y,2,0,"h2",101)(2,S,2,0,"div",102)(3,O,11,4,"div",103),p.k0s()),2&L){const G=p.XpG(2);p.Y8G("@fadeSlide",void 0),p.R7$(),p.Y8G("ngIf",G.isSending),p.R7$(),p.Y8G("ngIf",G.isSending),p.R7$(),p.Y8G("ngIf",G.txSig)}}function F(L,$){if(1&L){const G=p.RV6();p.j41(0,"div",76)(1,"div",77),p.bIt("click",function(){Ee.eBV(G);const ee=p.XpG();return Ee.Njj(ee.resetSendModal())}),p.k0s(),p.j41(2,"div",78),p.DNE(3,h,12,3,"div",79)(4,U,4,4,"div",79),p.k0s()()}if(2&L){const G=p.XpG();p.R7$(2),p.Y8G("ngClass",p.l_i(3,Se,!G.isClosingSend,G.isClosingSend)),p.R7$(),p.Y8G("ngIf",!G.selectedToken&&!G.isSending&&!G.txSig),p.R7$(),p.Y8G("ngIf",G.isSending||G.txSig)}}ge(1923);const _=[{path:"",component:(()=>{var L;class ${constructor(se,ee,be,lt,qe,et,hn,yt,St,fn){this.http=se,this.route=ee,this.toastCtrl=be,this.router=lt,this.actionSheetCtrl=qe,this.loadingCtrl=et,this.auth=hn,this.walletService=yt,this.modalService=St,this.userService=fn,this.userAddress=null,this.metadata=null,this.loading=!1,this.activeWallet="",this.wallets=[],this.name="",this.email="",this.oldPassword="",this.newPassword="",this.confirmPassword="",this.notifyNewItems=!1,this.notifyEmail=!1,this.avatarFile=null,this.avatar="",this.balance=null,this.balanceUsd=null,this.totalBalanceUsd=null,this.totalBalanceSol=null,this.lastBalanceUsd=null,this.trend=0,this.percentChange=0,this.tokens=[],this.showSendModal=!1,this.isClosingSend=!1,this.recipient="",this.amount=null,this.selectedToken=null,this.tokenSearch="",this.txSig=null,this.isSending=!1,this.isClosingStep=!1,this.authToken=null}ngOnInit(){var se=this;return(0,R.A)(function*(){se.walletService.getActiveWallet().subscribe(function(){var lt=(0,R.A)(function*(qe){qe&&(se.activeWallet=qe,console.log("\u{1f504} Active wallet updated in Home:",qe),yield se.updateBalance(),yield se.loadTokens())});return function(qe){return lt.apply(this,arguments)}}()),se.userService.getUser().subscribe(lt=>{se.name=lt.name,se.email=lt.email,se.notifyNewItems=lt.notifyNewItems,se.notifyEmail=lt.notifyEmail,se.avatar=lt.avatar});const ee=se.route.snapshot.paramMap.get("mintAddress");ee&&(se.mintAddress=ee,yield se.loadMetadata(ee),yield se.loadTokens());const be=localStorage.getItem("token");be&&(se.authToken=be)})()}loadMetadata(se){var ee=this;return(0,R.A)(function*(){ee.loading=!0;try{const be=yield ee.http.get(`${j.c.apiUrl}/nft/${se}/onchain`).toPromise();ee.metadata={...be,symbol:be.symbol||"UOG",price:be.price??.01,seller_fee_basis_points:be.royalty||0,attributes:[{trait_type:"Level",value:be.level},{trait_type:"HP",value:be.hp},{trait_type:"ATK",value:be.atk},{trait_type:"DEF",value:be.def},{trait_type:"SPD",value:be.spd},{trait_type:"Crit Rate",value:be.critRate+"%"},{trait_type:"Crit Dmg",value:be.critDmg+"%"}],properties:{creators:[{address:be.owner}]},history:be.history||[]},console.log("\u2705 NFT Metadata normalized:",ee.metadata)}catch(be){console.error("\u274c Error loading metadata:",be),(yield ee.toastCtrl.create({message:"Failed to load NFT metadata",duration:4e3,color:"danger",position:"top"})).present()}finally{ee.loading=!1}})()}copyLink(){var se=this;return(0,R.A)(function*(){const ee=`${window.location.origin}/nft-detail/${se.mintAddress}`;try{yield navigator.clipboard.writeText(ee),(yield se.toastCtrl.create({message:"\u2705 Link copied to clipboard!",duration:2e3,color:"success",position:"top"})).present()}catch(be){console.error("\u274c Copy failed",be)}})()}refreshMetadata(){var se=this;return(0,R.A)(function*(){try{yield se.http.post(`${j.c.apiUrl}/nft/${se.mintAddress}/onchain`,{}).toPromise(),yield se.loadMetadata(se.mintAddress),(yield se.toastCtrl.create({message:"\u2705 Metadata refreshed successfully!",duration:2e3,color:"success",position:"top"})).present()}catch(ee){console.error("\u274c Failed to refresh metadata:",ee),(yield se.toastCtrl.create({message:"\u274c Failed to refresh metadata",duration:2e3,color:"danger",position:"top"})).present()}})()}shortenUrl(se){return se.slice(0,20)+"..."+se.slice(-4)}shortenAddress(se){return se.slice(0,6)+"..."+se.slice(-4)}loadTokens(){var se=this;return(0,R.A)(function*(){if(se.activeWallet)try{const ee=yield se.http.get(`${j.c.apiUrl}/wallet/tokens/${se.activeWallet}`).toPromise();se.tokens=ee.tokens||[],localStorage.setItem("walletTokens",JSON.stringify(se.tokens))}catch(ee){console.error("Error fetch tokens from API",ee),se.router.navigateByUrl("/tabs/offline")}})()}updateBalance(){var se=this;return(0,R.A)(function*(){if(se.activeWallet)try{const ee=yield se.http.get(`${j.c.apiUrl}/wallet/balance/${se.activeWallet}`).toPromise();se.balance=ee.solBalance,se.balanceUsd=ee.usdValue,se.trend=ee.trend??0,se.percentChange=ee.percentChange??0}catch(ee){console.error("Error fetch balance from API",ee),se.router.navigateByUrl("/tabs/offline")}})()}toggleSendModal(){this.showSendModal=!0}get filteredTokens(){return this.tokenSearch?this.tokens.filter(se=>se.symbol?.toLowerCase().includes(this.tokenSearch.toLowerCase())||se.name?.toLowerCase().includes(this.tokenSearch.toLowerCase())):this.tokens}selectToken(se){this.selectedToken=se}resetSendModal(){this.selectedToken=null,this.txSig=null,this.isSending=!1,this.showSendModal=!1}buyNft(se){var ee=this;return(0,R.A)(function*(){const be=ee.route.snapshot.paramMap.get("mintAddress");if(be)try{ee.isSending=!0,ee.txSig=null;const lt=yield ee.http.post(`${j.c.apiUrl}/auth/nft/${be}/buy?demo=false`,{user:ee.activeWallet,paymentMint:se,price:ee.metadata?.price,name:ee.metadata?.name,symbol:ee.metadata?.symbol,uri:ee.metadata?.uri},{headers:{Authorization:`Bearer ${ee.authToken}`}}).toPromise();if(!lt.signature)throw new Error("\u274c No signature returned from backend");ee.txSig=lt.signature,yield ee.updateBalance(),yield ee.loadTokens(),yield(yield ee.toastCtrl.create({message:"NFT purchase successful! \u2705",duration:2500,position:"bottom",color:"success",icon:"checkmark-circle-outline",cssClass:"custom-toast"})).present()}catch(lt){yield ee.updateBalance(),yield ee.loadTokens(),console.error("\u274c buyNft error:",lt),yield(yield ee.toastCtrl.create({message:"Failed to buy NFT",duration:2e3,position:"bottom",color:"danger",icon:"close-circle-outline",cssClass:"custom-toast"})).present()}finally{ee.isSending=!1}})()}openSolscan(){var se=this;return(0,R.A)(function*(){const be=`https://solscan.io/token/${se.route.snapshot.paramMap.get("mintAddress")}?cluster=mainnet-beta`;T.Ii.isNativePlatform()?yield fe.open({url:be}):window.open(be,"_blank")})()}formatWithZeroCount(se){const ee=se.toString();if(!ee.includes("."))return`$${ee}`;const[be,lt]=ee.split(".");let qe=0;for(const fn of lt){if("0"!==fn)break;qe++}const et=lt.slice(qe),hn={0:"\u2080",1:"\u2081",2:"\u2082",3:"\u2083",4:"\u2084",5:"\u2085",6:"\u2086",7:"\u2087",8:"\u2088",9:"\u2089"};return`${be}.0${qe.toString().split("").map(fn=>hn[fn]||fn).join("")}${et} SOL`}isLoggedIn(){return!!localStorage.getItem("token")}logout(){this.auth.logout()}static#e=L=()=>(this.\u0275fac=function(ee){return new(ee||$)(p.rXU(Ce.Qq),p.rXU(Oe.nX),p.rXU(q.K_),p.rXU(Oe.Ix),p.rXU(q.GD),p.rXU(q.Xi),p.rXU(ae.N),p.rXU(X.u),p.rXU(De.a),p.rXU(Q.K))},this.\u0275cmp=p.VBU({type:$,selectors:[["app-nft-detail"]],standalone:!1,decls:15,vars:7,consts:[[1,"content-tabs"],[1,""],[1,"wrapper-content"],[1,"themesflat-container"],[1,"row"],[1,"col-md-12","pb-20"],["class","tf-button style-1 h50 w216",3,"routerLink",4,"ngIf"],["class","col-md-6 pb-20",4,"ngIf"],["class","col-md-6",4,"ngIf"],["class","col-md-12",4,"ngIf"],["class","col-12",4,"ngIf"],["class","custom-modal",4,"ngIf"],[1,"tf-button","style-1","h50","w216",3,"routerLink"],[1,"icon-arrow-left2"],[1,"col-md-6","pb-20"],[1,"tf-card-box","style-5","mb-0"],[1,"card-media","mb-0"],["href","javascript:void(0)"],[3,"src","alt"],[1,"price","gem"],["src","assets/images/box-icon/coin-04.png","alt",""],[1,"wishlist-button"],[1,"icon-heart"],[1,"featured-countdown"],["data-timer","7500","data-labels","d,h,m,s",1,"js-countdown"],[1,"col-md-6"],[1,"infor-product"],[1,"text"],[1,"icon-tick"],[1,"path1"],[1,"path2"],[1,"menu_card"],[1,"dropdown"],[1,"icon"],["href","javascript:void(0);","data-bs-toggle","dropdown",1,"btn-link"],[1,"icon-link-1"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"icon-link"],[1,"dropdown-item"],[1,"icon-facebook"],[1,"dropdown-item","mb-0"],[1,"icon-twitter"],[1,"icon-content"],[1,"icon-refresh"],[1,"icon-report"],[1,"meta","mb-20"],[1,"meta-item","view"],[1,"icon-show"],[1,"meta-item","rating",3,"click"],[1,"icon-arrow-up-right2"],[1,"meta-item","favorites"],[1,"icon-link-3"],[1,"product-item","time-sales"],[1,"icon-description"],[1,"content"],[1,"flex","justify-between"],[3,"innerHTML"],[1,"tf-button","style-1","h50","w216",3,"click"],[1,"product-item","description"],[1,"icon-keyboard_arrow_down"],[1,"col-md-12"],[1,"product-item","traits","style-1"],["class","trait-item",4,"ngFor","ngForOf"],[1,"trait-item"],[1,"title"],[1,"col-12"],[1,"product-item","item-activity","mb-0"],[1,"icon-two-arrow","rotateZ90"],[1,"table-heading"],[1,"column"],["class","table-item",4,"ngFor","ngForOf"],[1,"table-item"],[1,"column","flex","items-center"],[1,"icon-two-arrow"],[1,"tf-color"],[1,"custom-modal"],[1,"modal-backdrop",3,"click"],[1,"modal-sheet",3,"ngClass"],[4,"ngIf"],[1,"modal-title"],["action","#","method","get","role","search",1,"search-form","relative",3,"submit"],["type","search","id","search","placeholder","Search...","name","tokenSearch","title","Search for",1,"search-field","style-1",3,"ngModelChange","ngModel"],["type","submit","title","Search",1,"search","search-submit"],[1,"icon-search"],["class","widget-table-ranking pb-20",4,"ngIf"],["class","no-result",4,"ngIf"],[1,"modal-actions"],["type","button",1,"btn-cancel",3,"click"],[1,"widget-table-ranking","pb-20"],["class","table-ranking-content",3,"click",4,"ngFor","ngForOf"],[1,"table-ranking-content",3,"click"],["data-wow-delay","0s",1,"fl-row-ranking"],[1,"td1"],[1,"item-avatar"],[1,"item-name"],[1,"price","gem","pt-10"],[1,"td5"],[1,"td4","warning","pt-10"],[3,"ngClass"],[1,"no-result"],["class","modal-title",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["class","success-tx",4,"ngIf"],[1,"loading-spinner"],["name","crescent"],[1,"success-tx"],["name","checkmark-circle-outline"],["target","_blank",1,"btn-send",3,"href"]],template:function(ee,be){1&ee&&(p.j41(0,"ion-content")(1,"app-market-layout")(2,"div",0)(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),p.DNE(8,he,3,2,"a",6)(9,Me,3,2,"a",6),p.k0s(),p.DNE(10,Ue,12,3,"div",7)(11,ze,66,7,"div",8)(12,de,8,1,"div",9)(13,ue,19,1,"div",10),p.k0s()()()()()(),p.DNE(14,F,5,6,"div",11),p.k0s()),2&ee&&(p.R7$(8),p.Y8G("ngIf",!be.isLoggedIn()),p.R7$(),p.Y8G("ngIf",be.isLoggedIn()),p.R7$(),p.Y8G("ngIf",be.metadata),p.R7$(),p.Y8G("ngIf",be.metadata),p.R7$(),p.Y8G("ngIf",be.metadata),p.R7$(),p.Y8G("ngIf",be.metadata),p.R7$(),p.Y8G("ngIf",be.showSendModal))},dependencies:[w.YU,w.Sq,w.bT,ce.qT,ce.me,ce.BC,ce.cb,ce.vS,ce.cV,q.W9,q.iq,q.w2,q.oY,te.Wk,Y.u,w.QX],styles:[".themesflat-container[_ngcontent-%COMP%]{position:relative;margin-left:auto;margin-right:auto;padding-right:15px;padding-left:15px;width:100%;max-width:100%}.widget-table-ranking[_ngcontent-%COMP%]   .table-ranking-content[_ngcontent-%COMP%]   .fl-row-ranking[_ngcontent-%COMP%]   .td1[_ngcontent-%COMP%]{width:285px}.widget-menu-tab[_ngcontent-%COMP%]{display:flex;gap:9px;flex-wrap:nowrap;margin-bottom:20px;flex-direction:row;justify-content:center}.pages-title[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-family:Azeret Mono;line-height:22px;max-width:634px;margin:auto auto 50px}span.warning[_ngcontent-%COMP%]{background:linear-gradient(90deg,#524afc,#1ac4fc);-webkit-background-clip:text;-webkit-text-fill-color:transparent}span.danger[_ngcontent-%COMP%]{color:#f24747}i.warning[_ngcontent-%COMP%]{background:linear-gradient(90deg,#524afc,#1ac4fc);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:12px}i.danger[_ngcontent-%COMP%]{color:#f24747;font-size:12px}#balanceUsdValue[_ngcontent-%COMP%]   .pct.warning[_ngcontent-%COMP%], #balanceUsdValue[_ngcontent-%COMP%]   .pct.danger[_ngcontent-%COMP%]{background:linear-gradient(90deg,#524afc,#1ac4fc);-webkit-background-clip:text;-webkit-text-fill-color:transparent}#balanceUsdValue[_ngcontent-%COMP%]   .pct.warning[_ngcontent-%COMP%] + .trend-icon[_ngcontent-%COMP%]{font-size:12px;margin-left:2px;color:#ddf247}#balanceUsdValue[_ngcontent-%COMP%]   .pct.danger[_ngcontent-%COMP%] + .trend-icon[_ngcontent-%COMP%]{font-size:12px;margin-left:2px;color:#f24747}.custom-action-sheet[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:flex-end;z-index:1000}.custom-action-sheet[_ngcontent-%COMP%]   .sheet-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;animation:_ngcontent-%COMP%_fadeIn .3s ease forwards}.custom-action-sheet[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]{position:relative;width:100%;background:#161616;border-radius:16px 16px 0 0;padding:20px;z-index:1001;text-align:center;transform:translateY(100%);animation:_ngcontent-%COMP%_slideUp .3s ease forwards}.custom-action-sheet[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px}.custom-action-sheet[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;word-break:break-all;margin-bottom:15px}.custom-action-sheet[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;width:100%;padding:12px;margin:5px 0;border:none;border-radius:8px;font-size:16px;cursor:pointer}.custom-action-sheet[_ngcontent-%COMP%]   .sheet-container[_ngcontent-%COMP%]   button.cancel[_ngcontent-%COMP%]{background:#eee}.custom-action-sheet[_ngcontent-%COMP%]   .slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s ease forwards}.custom-action-sheet[_ngcontent-%COMP%]   .slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease forwards}.custom-toast[_ngcontent-%COMP%]{--border-radius: 12px;--background: #DDF247;--color: #fff;font-weight:600}.custom-toast[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:8px}.custom-modal[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:flex-end;z-index:2000}.custom-modal[_ngcontent-%COMP%]   .modal-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;animation:_ngcontent-%COMP%_fadeIn .3s ease forwards}.custom-modal[_ngcontent-%COMP%]   .modal-sheet[_ngcontent-%COMP%]{position:relative;width:100%;max-height:80%;background:#111;border-radius:16px 16px 0 0;padding:20px;z-index:2001;text-align:left;overflow-y:auto}.custom-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:16px;text-align:center}.custom-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.custom-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;display:block;margin-bottom:6px}.custom-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.custom-modal[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}.custom-modal[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#eee;border:none;padding:10px 20px;border-radius:6px;cursor:pointer}.custom-modal[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{background:linear-gradient(45deg,#524afc,#1ac4fc);color:#161616;border:none;padding:10px 20px;border-radius:6px;cursor:pointer}.modal-title[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:600;margin-bottom:10px}.search-bar[_ngcontent-%COMP%]{margin:0 0 15px}.token-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-height:300px;overflow-y:auto;margin-bottom:20px}.token-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;border:1px solid #ddd;border-radius:8px;cursor:pointer;transition:background .2s ease}.token-item[_ngcontent-%COMP%]:hover{background:#f5f5f5}.token-item[_ngcontent-%COMP%]   .token-logo[_ngcontent-%COMP%]{width:36px;height:36px;margin-right:12px;border-radius:50%}.token-item[_ngcontent-%COMP%]   .token-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:14px;gap:2px}.token-item[_ngcontent-%COMP%]   .token-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:15px}.no-result[_ngcontent-%COMP%]{text-align:center;color:#999;padding:20px;font-size:14px}.balance-info[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:12px;color:#666}.btn-send[_ngcontent-%COMP%]:disabled{background:#ccc!important;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px 0}.success-tx[_ngcontent-%COMP%]{text-align:center}.success-tx[_ngcontent-%COMP%]   .addr[_ngcontent-%COMP%]{font-size:13px;color:#555;word-break:break-all;margin:10px 0 20px}.success-tx[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{display:inline-block;background:#2ecc71;color:#fff;padding:12px 20px;border-radius:6px;text-decoration:none;margin-bottom:20px}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s ease forwards}.slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease forwards}.step[_ngcontent-%COMP%]{animation-duration:.4s;animation-fill-mode:both}.fade-slide-in[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeSlideIn}@keyframes _ngcontent-%COMP%_fadeSlideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.fade-slide-out[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeSlideOut}@keyframes _ngcontent-%COMP%_fadeSlideOut{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(0)}to{transform:translateY(100%)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.home-1[_ngcontent-%COMP%]   .flat-pages-title[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-bottom:0}  .demoBorderRadius canvas{border-radius:10px}.selected-token[_ngcontent-%COMP%]{background-color:#2d2d2d;border-radius:8px}.quick-buttons[_ngcontent-%COMP%]{margin-top:8px;display:flex;gap:10px}.quick-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:6px 0;border:none;border-radius:6px;background:#2d2d2d;color:#fff;cursor:pointer}.quick-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#444}.pt-20[_ngcontent-%COMP%]{padding-top:20px}.tf-button.style-1[_ngcontent-%COMP%]{width:170px;height:44px;gap:10px;flex-shrink:0;background:linear-gradient(90deg,#524afc,#1ac4fc)}.tf-card-box.style-5[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{position:absolute;top:5px;right:80px;width:26px;height:26px;background-color:#fff3;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;border-radius:50%}@media (max-width: 991px){.widget-table-ranking[_ngcontent-%COMP%]   .table-ranking-heading[_ngcontent-%COMP%], .widget-table-ranking[_ngcontent-%COMP%]   .table-ranking-content[_ngcontent-%COMP%]{width:auto}}@media (max-width: 1440px){.wrap-box-card[_ngcontent-%COMP%]   .col-item[_ngcontent-%COMP%]{width:calc(50% - 28.5px)!important}}@media (max-width: 1024px){.icon-background[_ngcontent-%COMP%]{display:block}}"]}))}return L(),$})()}];let g=(()=>{var L;class ${static#e=L=()=>(this.\u0275fac=function(ee){return new(ee||$)},this.\u0275mod=p.$C({type:$}),this.\u0275inj=Ee.G2t({imports:[te.iI.forChild(_),te.iI]}))}return L(),$})();var E=ge(7507);let k=(()=>{var L;class ${static#e=L=()=>(this.\u0275fac=function(ee){return new(ee||$)},this.\u0275mod=p.$C({type:$}),this.\u0275inj=Ee.G2t({imports:[w.MD,ce.YN,q.bv,g,E.MarketLayoutPageModule]}))}return L(),$})()},5970:(Rt,Ne,ge)=>{"use strict";var w=ge(7054).Buffer;Rt.exports=function ce(q){if(q.length>=255)throw new TypeError("Alphabet too long");for(var te=new Uint8Array(256),R=0;R<te.length;R++)te[R]=255;for(var j=0;j<q.length;j++){var T=q.charAt(j),fe=T.charCodeAt(0);if(255!==te[fe])throw new TypeError(T+" is ambiguous");te[fe]=j}var p=q.length,Ee=q.charAt(0),Ce=Math.log(p)/Math.log(256),Oe=Math.log(256)/Math.log(p);function X(Q){if("string"!=typeof Q)throw new TypeError("Expected String");if(0===Q.length)return w.alloc(0);for(var Y=0,ve=0,me=0;Q[Y]===Ee;)ve++,Y++;for(var Se=(Q.length-Y)*Ce+1>>>0,he=new Uint8Array(Se);Y<Q.length;){var Me=Q.charCodeAt(Y);if(Me>255)return;var Ue=te[Me];if(255===Ue)return;for(var ze=0,Qe=Se-1;(0!==Ue||ze<me)&&-1!==Qe;Qe--,ze++)he[Qe]=(Ue+=p*he[Qe]>>>0)%256>>>0,Ue=Ue/256>>>0;if(0!==Ue)throw new Error("Non-zero carry");me=ze,Y++}for(var de=Se-me;de!==Se&&0===he[de];)de++;var Z=w.allocUnsafe(ve+(Se-de));Z.fill(0,0,ve);for(var ue=ve;de!==Se;)Z[ue++]=he[de++];return Z}return{encode:function ae(Q){if((Array.isArray(Q)||Q instanceof Uint8Array)&&(Q=w.from(Q)),!w.isBuffer(Q))throw new TypeError("Expected Buffer");if(0===Q.length)return"";for(var Y=0,ve=0,me=0,Se=Q.length;me!==Se&&0===Q[me];)me++,Y++;for(var he=(Se-me)*Oe+1>>>0,Me=new Uint8Array(he);me!==Se;){for(var Ue=Q[me],ze=0,Qe=he-1;(0!==Ue||ze<ve)&&-1!==Qe;Qe--,ze++)Me[Qe]=(Ue+=256*Me[Qe]>>>0)%p>>>0,Ue=Ue/p>>>0;if(0!==Ue)throw new Error("Non-zero carry");ve=ze,me++}for(var de=he-ve;de!==he&&0===Me[de];)de++;for(var Z=Ee.repeat(Y);de<he;++de)Z+=q.charAt(Me[de]);return Z},decodeUnsafe:X,decode:function De(Q){var Y=X(Q);if(Y)return Y;throw new Error("Non-base"+p+" character")}}}},6384:(Rt,Ne,ge)=>{"use strict";const w=ge(2097).v4;Rt.exports=function(q,te,R,j){if("string"!=typeof q)throw new TypeError(q+" must be a string");const T="number"==typeof(j=j||{}).version?j.version:2;if(1!==T&&2!==T)throw new TypeError(T+" must be 1 or 2");const fe={method:q};if(2===T&&(fe.jsonrpc="2.0"),te){if("object"!=typeof te&&!Array.isArray(te))throw new TypeError(te+" must be an object, array or omitted");fe.params=te}return typeof R>"u"?fe.id=("function"==typeof j.generator?j.generator:function(){return w()})(fe,j):2===T&&null===R?j.notificationIdNull&&(fe.id=null):fe.id=R,fe}},7054:(Rt,Ne,ge)=>{var w=ge(3838),ce=w.Buffer;function q(R,j){for(var T in R)j[T]=R[T]}function te(R,j,T){return ce(R,j,T)}ce.from&&ce.alloc&&ce.allocUnsafe&&ce.allocUnsafeSlow?Rt.exports=w:(q(w,Ne),Ne.Buffer=te),te.prototype=Object.create(ce.prototype),q(ce,te),te.from=function(R,j,T){if("number"==typeof R)throw new TypeError("Argument must not be a number");return ce(R,j,T)},te.alloc=function(R,j,T){if("number"!=typeof R)throw new TypeError("Argument must be a number");var fe=ce(R);return void 0!==j?"string"==typeof T?fe.fill(j,T):fe.fill(j):fe.fill(0),fe},te.allocUnsafe=function(R){if("number"!=typeof R)throw new TypeError("Argument must be a number");return ce(R)},te.allocUnsafeSlow=function(R){if("number"!=typeof R)throw new TypeError("Argument must be a number");return w.SlowBuffer(R)}},7238:(Rt,Ne,ge)=>{var w=ge(5970);Rt.exports=w("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},7422:(Rt,Ne,ge)=>{"use strict";function w(Q,Y,ve){return Y<=Q&&Q<=ve}function ce(Q){if(void 0===Q)return{};if(Q===Object(Q))return Q;throw TypeError("Could not convert argument to dictionary")}function j(Q){this.tokens=[].slice.call(Q)}ge.r(Ne),ge.d(Ne,{TextDecoder:()=>Oe,TextEncoder:()=>ae}),j.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(Q){if(Array.isArray(Q))for(var Y=Q;Y.length;)this.tokens.unshift(Y.pop());else this.tokens.unshift(Q)},push:function(Q){if(Array.isArray(Q))for(var Y=Q;Y.length;)this.tokens.push(Y.shift());else this.tokens.push(Q)}};var T=-1;function fe(Q,Y){if(Q)throw TypeError("Decoder error");return Y||65533}var Ce="utf-8";function Oe(Q,Y){if(!(this instanceof Oe))return new Oe(Q,Y);if((Q=void 0!==Q?String(Q).toLowerCase():Ce)!==Ce)throw new Error("Encoding not supported. Only utf-8 is supported");Y=ce(Y),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!Y.fatal,this._ignoreBOM=!!Y.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function ae(Q,Y){if(!(this instanceof ae))return new ae(Q,Y);if((Q=void 0!==Q?String(Q).toLowerCase():Ce)!==Ce)throw new Error("Encoding not supported. Only utf-8 is supported");Y=ce(Y),this._streaming=!1,this._encoder=null,this._options={fatal:!!Y.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function X(Q){var Y=Q.fatal,ve=0,me=0,Se=0,he=128,Me=191;this.handler=function(Ue,ze){if(-1===ze&&0!==Se)return Se=0,fe(Y);if(-1===ze)return T;if(0===Se){if(w(ze,0,127))return ze;if(w(ze,194,223))Se=1,ve=ze-192;else if(w(ze,224,239))224===ze&&(he=160),237===ze&&(Me=159),Se=2,ve=ze-224;else{if(!w(ze,240,244))return fe(Y);240===ze&&(he=144),244===ze&&(Me=143),Se=3,ve=ze-240}return ve<<=6*Se,null}if(!w(ze,he,Me))return ve=Se=me=0,he=128,Me=191,Ue.prepend(ze),fe(Y);if(he=128,Me=191,ve+=ze-128<<6*(Se-(me+=1)),me!==Se)return null;var Qe=ve;return ve=Se=me=0,Qe}}function De(Q){this.handler=function(ve,me){if(-1===me)return T;if(w(me,0,127))return me;var Se,he;w(me,128,2047)?(Se=1,he=192):w(me,2048,65535)?(Se=2,he=224):w(me,65536,1114111)&&(Se=3,he=240);for(var Me=[(me>>6*Se)+he];Se>0;)Me.push(128|63&me>>6*(Se-1)),Se-=1;return Me}}Oe.prototype={decode:function(Y,ve){var me;me="object"==typeof Y&&Y instanceof ArrayBuffer?new Uint8Array(Y):"object"==typeof Y&&"buffer"in Y&&Y.buffer instanceof ArrayBuffer?new Uint8Array(Y.buffer,Y.byteOffset,Y.byteLength):new Uint8Array(0),ve=ce(ve),this._streaming||(this._decoder=new X({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!ve.stream;for(var Me,Se=new j(me),he=[];!Se.endOfStream()&&(Me=this._decoder.handler(Se,Se.read()))!==T;)null!==Me&&(Array.isArray(Me)?he.push.apply(he,Me):he.push(Me));if(!this._streaming){do{if((Me=this._decoder.handler(Se,Se.read()))===T)break;null!==Me&&(Array.isArray(Me)?he.push.apply(he,Me):he.push(Me))}while(!Se.endOfStream());this._decoder=null}return he.length&&-1!==["utf-8"].indexOf(this.encoding)&&!this._ignoreBOM&&!this._BOMseen&&(65279===he[0]?(this._BOMseen=!0,he.shift()):this._BOMseen=!0),function te(Q){for(var Y="",ve=0;ve<Q.length;++ve){var me=Q[ve];me<=65535?Y+=String.fromCharCode(me):(me-=65536,Y+=String.fromCharCode(55296+(me>>10),56320+(1023&me)))}return Y}(he)}},ae.prototype={encode:function(Y,ve){Y=Y?String(Y):"",ve=ce(ve),this._streaming||(this._encoder=new De(this._options)),this._streaming=!!ve.stream;for(var he,me=[],Se=new j(function q(Q){for(var Y=String(Q),ve=Y.length,me=0,Se=[];me<ve;){var he=Y.charCodeAt(me);if(he<55296||he>57343)Se.push(he);else if(56320<=he&&he<=57343)Se.push(65533);else if(55296<=he&&he<=56319)if(me===ve-1)Se.push(65533);else{var Me=Q.charCodeAt(me+1);56320<=Me&&Me<=57343?(Se.push(65536+((1023&he)<<10)+(1023&Me)),me+=1):Se.push(65533)}me+=1}return Se}(Y));!Se.endOfStream()&&(he=this._encoder.handler(Se,Se.read()))!==T;)Array.isArray(he)?me.push.apply(me,he):me.push(he);if(!this._streaming){for(;(he=this._encoder.handler(Se,Se.read()))!==T;)Array.isArray(he)?me.push.apply(me,he):me.push(he);this._encoder=null}return new Uint8Array(me)}}},7680:(Rt,Ne,ge)=>{"use strict";Ne.I0=Ne.DH=Ne.NX=Ne.u8=Ne.cY=void 0,Ne.av=Ne.O6=Ne.w3=Ne.Wg=void 0;const ce=ge(3838);function q(_){if(!(_ instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function te(_){return q(_),ce.Buffer.from(_.buffer,_.byteOffset,_.length)}class R{constructor(g,E){if(!Number.isInteger(g))throw new TypeError("span must be an integer");this.span=g,this.property=E}makeDestinationObject(){return{}}getSpan(g,E){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(g){const E=Object.create(this.constructor.prototype);return Object.assign(E,this),E.property=g,E}fromArray(g){}}function j(_,g){return g.property?_+"["+g.property+"]":_}class fe extends R{isCount(){throw new Error("ExternalLayout is abstract")}}class Ee extends fe{constructor(g,E=0,k){if(!(g instanceof R))throw new TypeError("layout must be a Layout");if(!Number.isInteger(E))throw new TypeError("offset must be integer or undefined");super(g.span,k||g.property),this.layout=g,this.offset=E}isCount(){return this.layout instanceof Ce||this.layout instanceof Oe}decode(g,E=0){return this.layout.decode(g,E+this.offset)}encode(g,E,k=0){return this.layout.encode(g,E,k+this.offset)}}class Ce extends R{constructor(g,E){if(super(g,E),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(g,E=0){return te(g).readUIntLE(E,this.span)}encode(g,E,k=0){return te(E).writeUIntLE(g,k,this.span),this.span}}class Oe extends R{constructor(g,E){if(super(g,E),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(g,E=0){return te(g).readUIntBE(E,this.span)}encode(g,E,k=0){return te(E).writeUIntBE(g,k,this.span),this.span}}const De=Math.pow(2,32);function Q(_){const g=Math.floor(_/De);return{hi32:g,lo32:_-g*De}}function Y(_,g){return _*De+g}class ve extends R{constructor(g){super(8,g)}decode(g,E=0){const k=te(g),L=k.readUInt32LE(E);return Y(k.readUInt32LE(E+4),L)}encode(g,E,k=0){const L=Q(g),$=te(E);return $.writeUInt32LE(L.lo32,k),$.writeUInt32LE(L.hi32,k+4),8}}class Se extends R{constructor(g){super(8,g)}decode(g,E=0){const k=te(g),L=k.readUInt32LE(E);return Y(k.readInt32LE(E+4),L)}encode(g,E,k=0){const L=Q(g),$=te(E);return $.writeUInt32LE(L.lo32,k),$.writeInt32LE(L.hi32,k+4),8}}class de extends R{constructor(g,E,k){if(!(g instanceof R))throw new TypeError("elementLayout must be a Layout");if(!(E instanceof fe&&E.isCount()||Number.isInteger(E)&&0<=E))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let L=-1;!(E instanceof fe)&&0<g.span&&(L=E*g.span),super(L,k),this.elementLayout=g,this.count=E}getSpan(g,E=0){if(0<=this.span)return this.span;let k=0,L=this.count;if(L instanceof fe&&(L=L.decode(g,E)),0<this.elementLayout.span)k=L*this.elementLayout.span;else{let $=0;for(;$<L;)k+=this.elementLayout.getSpan(g,E+k),++$}return k}decode(g,E=0){const k=[];let L=0,$=this.count;for($ instanceof fe&&($=$.decode(g,E));L<$;)k.push(this.elementLayout.decode(g,E)),E+=this.elementLayout.getSpan(g,E),L+=1;return k}encode(g,E,k=0){const L=this.elementLayout,$=g.reduce((G,se)=>G+L.encode(se,E,k+G),0);return this.count instanceof fe&&this.count.encode(g.length,E,k),$}}class Z extends R{constructor(g,E,k){if(!Array.isArray(g)||!g.reduce(($,G)=>$&&G instanceof R,!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof E&&void 0===k&&(k=E,E=void 0);for(const $ of g)if(0>$.span&&void 0===$.property)throw new Error("fields cannot contain unnamed variable-length layout");let L=-1;try{L=g.reduce(($,G)=>$+G.getSpan(),0)}catch{}super(L,E),this.fields=g,this.decodePrefixes=!!k}getSpan(g,E=0){if(0<=this.span)return this.span;let k=0;try{k=this.fields.reduce((L,$)=>{const G=$.getSpan(g,E);return E+=G,L+G},0)}catch{throw new RangeError("indeterminate span")}return k}decode(g,E=0){q(g);const k=this.makeDestinationObject();for(const L of this.fields)if(void 0!==L.property&&(k[L.property]=L.decode(g,E)),E+=L.getSpan(g,E),this.decodePrefixes&&g.length===E)break;return k}encode(g,E,k=0){const L=k;let $=0,G=0;for(const se of this.fields){let ee=se.span;if(G=0<ee?ee:0,void 0!==se.property){const be=g[se.property];void 0!==be&&(G=se.encode(be,E,k),0>ee&&(ee=se.getSpan(E,k)))}$=k,k+=ee}return $+G-L}fromArray(g){const E=this.makeDestinationObject();for(const k of this.fields)void 0!==k.property&&0<g.length&&(E[k.property]=g.shift());return E}layoutFor(g){if("string"!=typeof g)throw new TypeError("property must be string");for(const E of this.fields)if(E.property===g)return E}offsetOf(g){if("string"!=typeof g)throw new TypeError("property must be string");let E=0;for(const k of this.fields){if(k.property===g)return E;0>k.span?E=-1:0<=E&&(E+=k.span)}}}class U extends R{constructor(g,E){if(!(g instanceof fe&&g.isCount()||Number.isInteger(g)&&0<=g))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let k=-1;g instanceof fe||(k=g),super(k,E),this.length=g}getSpan(g,E){let k=this.span;return 0>k&&(k=this.length.decode(g,E)),k}decode(g,E=0){let k=this.span;return 0>k&&(k=this.length.decode(g,E)),te(g).slice(E,E+k)}encode(g,E,k){let L=this.length;if(this.length instanceof fe&&(L=g.length),!(g instanceof Uint8Array&&L===g.length))throw new TypeError(j("Blob.encode",this)+" requires (length "+L+") Uint8Array as src");if(k+L>E.length)throw new RangeError("encoding overruns Uint8Array");const $=te(g);return te(E).write($.toString("hex"),k,L,"hex"),this.length instanceof fe&&this.length.encode(L,E,k),L}}Ne.cY=(_,g,E)=>new Ee(_,g,E),Ne.u8=_=>new Ce(1,_),Ne.NX=_=>new Ce(2,_),Ne.DH=_=>new Ce(4,_),Ne.I0=_=>new ve(_),Ne.Wg=_=>new Se(_),Ne.w3=(_,g,E)=>new Z(_,g,E),Ne.O6=(_,g,E)=>new de(_,g,E),Ne.av=(_,g)=>new U(_,g)},7741:(Rt,Ne,ge)=>{"use strict";var w=ge(7054).Buffer;Rt.exports=function ce(q){if(q.length>=255)throw new TypeError("Alphabet too long");for(var te=new Uint8Array(256),R=0;R<te.length;R++)te[R]=255;for(var j=0;j<q.length;j++){var T=q.charAt(j),fe=T.charCodeAt(0);if(255!==te[fe])throw new TypeError(T+" is ambiguous");te[fe]=j}var p=q.length,Ee=q.charAt(0),Ce=Math.log(p)/Math.log(256),Oe=Math.log(256)/Math.log(p);function X(Q){if("string"!=typeof Q)throw new TypeError("Expected String");if(0===Q.length)return w.alloc(0);for(var Y=0,ve=0,me=0;Q[Y]===Ee;)ve++,Y++;for(var Se=(Q.length-Y)*Ce+1>>>0,he=new Uint8Array(Se);Y<Q.length;){var Me=Q.charCodeAt(Y);if(Me>255)return;var Ue=te[Me];if(255===Ue)return;for(var ze=0,Qe=Se-1;(0!==Ue||ze<me)&&-1!==Qe;Qe--,ze++)he[Qe]=(Ue+=p*he[Qe]>>>0)%256>>>0,Ue=Ue/256>>>0;if(0!==Ue)throw new Error("Non-zero carry");me=ze,Y++}for(var de=Se-me;de!==Se&&0===he[de];)de++;var Z=w.allocUnsafe(ve+(Se-de));Z.fill(0,0,ve);for(var ue=ve;de!==Se;)Z[ue++]=he[de++];return Z}return{encode:function ae(Q){if((Array.isArray(Q)||Q instanceof Uint8Array)&&(Q=w.from(Q)),!w.isBuffer(Q))throw new TypeError("Expected Buffer");if(0===Q.length)return"";for(var Y=0,ve=0,me=0,Se=Q.length;me!==Se&&0===Q[me];)me++,Y++;for(var he=(Se-me)*Oe+1>>>0,Me=new Uint8Array(he);me!==Se;){for(var Ue=Q[me],ze=0,Qe=he-1;(0!==Ue||ze<ve)&&-1!==Qe;Qe--,ze++)Me[Qe]=(Ue+=256*Me[Qe]>>>0)%p>>>0,Ue=Ue/p>>>0;if(0!==Ue)throw new Error("Non-zero carry");ve=ze,me++}for(var de=he-ve;de!==he&&0===Me[de];)de++;for(var Z=Ee.repeat(Y);de<he;++de)Z+=q.charAt(Me[de]);return Z},decodeUnsafe:X,decode:function De(Q){var Y=X(Q);if(Y)return Y;throw new Error("Non-base"+p+" character")}}}},7790:()=>{}}]);